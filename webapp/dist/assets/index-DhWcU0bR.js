var WI=Object.defineProperty;var GI=(t,e,n)=>e in t?WI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ws=(t,e,n)=>GI(t,typeof e!="symbol"?e+"":e,n);function KI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function QI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fv={exports:{}},mu={},pv={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=Symbol.for("react.element"),YI=Symbol.for("react.portal"),XI=Symbol.for("react.fragment"),JI=Symbol.for("react.strict_mode"),ZI=Symbol.for("react.profiler"),eT=Symbol.for("react.provider"),tT=Symbol.for("react.context"),nT=Symbol.for("react.forward_ref"),rT=Symbol.for("react.suspense"),sT=Symbol.for("react.memo"),iT=Symbol.for("react.lazy"),Pm=Symbol.iterator;function oT(t){return t===null||typeof t!="object"?null:(t=Pm&&t[Pm]||t["@@iterator"],typeof t=="function"?t:null)}var mv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gv=Object.assign,yv={};function ci(t,e,n){this.props=t,this.context=e,this.refs=yv,this.updater=n||mv}ci.prototype.isReactComponent={};ci.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ci.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vv(){}vv.prototype=ci.prototype;function Dh(t,e,n){this.props=t,this.context=e,this.refs=yv,this.updater=n||mv}var jh=Dh.prototype=new vv;jh.constructor=Dh;gv(jh,ci.prototype);jh.isPureReactComponent=!0;var km=Array.isArray,_v=Object.prototype.hasOwnProperty,bh={current:null},wv={key:!0,ref:!0,__self:!0,__source:!0};function Ev(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)_v.call(e,r)&&!wv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:$o,type:t,key:i,ref:o,props:s,_owner:bh.current}}function aT(t,e){return{$$typeof:$o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Oh(t){return typeof t=="object"&&t!==null&&t.$$typeof===$o}function lT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dm=/\/+/g;function Rc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lT(""+t.key):e.toString(36)}function rl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $o:case YI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Rc(o,0):r,km(s)?(n="",t!=null&&(n=t.replace(Dm,"$&/")+"/"),rl(s,e,n,"",function(d){return d})):s!=null&&(Oh(s)&&(s=aT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",km(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Rc(i,l);o+=rl(i,e,n,u,s)}else if(u=oT(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Rc(i,l++),o+=rl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ja(t,e,n){if(t==null)return t;var r=[],s=0;return rl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function uT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},sl={transition:null},cT={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:sl,ReactCurrentOwner:bh};function Iv(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:ja,forEach:function(t,e,n){ja(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ja(t,function(){e++}),e},toArray:function(t){return ja(t,function(e){return e})||[]},only:function(t){if(!Oh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=ci;se.Fragment=XI;se.Profiler=ZI;se.PureComponent=Dh;se.StrictMode=JI;se.Suspense=rT;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cT;se.act=Iv;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)_v.call(e,u)&&!wv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:$o,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:tT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eT,_context:t},t.Consumer=t};se.createElement=Ev;se.createFactory=function(t){var e=Ev.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:nT,render:t}};se.isValidElement=Oh;se.lazy=function(t){return{$$typeof:iT,_payload:{_status:-1,_result:t},_init:uT}};se.memo=function(t,e){return{$$typeof:sT,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=sl.transition;sl.transition={};try{t()}finally{sl.transition=e}};se.unstable_act=Iv;se.useCallback=function(t,e){return St.current.useCallback(t,e)};se.useContext=function(t){return St.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return St.current.useDeferredValue(t)};se.useEffect=function(t,e){return St.current.useEffect(t,e)};se.useId=function(){return St.current.useId()};se.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return St.current.useMemo(t,e)};se.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};se.useRef=function(t){return St.current.useRef(t)};se.useState=function(t){return St.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return St.current.useTransition()};se.version="18.3.1";pv.exports=se;var D=pv.exports;const Ho=QI(D),dT=KI({__proto__:null,default:Ho},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT=D,fT=Symbol.for("react.element"),pT=Symbol.for("react.fragment"),mT=Object.prototype.hasOwnProperty,gT=hT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yT={key:!0,ref:!0,__self:!0,__source:!0};function Tv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mT.call(e,r)&&!yT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:fT,type:t,key:i,ref:o,props:s,_owner:gT.current}}mu.Fragment=pT;mu.jsx=Tv;mu.jsxs=Tv;fv.exports=mu;var c=fv.exports,hd={},xv={exports:{}},Bt={},Sv={exports:{}},Av={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var J=B.length;B.push(Y);e:for(;0<J;){var pe=J-1>>>1,de=B[pe];if(0<s(de,Y))B[pe]=Y,B[J]=de,J=pe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],J=B.pop();if(J!==Y){B[0]=J;e:for(var pe=0,de=B.length,q=de>>>1;pe<q;){var Ye=2*(pe+1)-1,Jt=B[Ye],$t=Ye+1,An=B[$t];if(0>s(Jt,J))$t<de&&0>s(An,Jt)?(B[pe]=An,B[$t]=J,pe=$t):(B[pe]=Jt,B[Ye]=J,pe=Ye);else if($t<de&&0>s(An,J))B[pe]=An,B[$t]=J,pe=$t;else break e}}return Y}function s(B,Y){var J=B.sortIndex-Y.sortIndex;return J!==0?J:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,T=!1,I=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function b(B){if(N=!1,R(B),!I)if(n(u)!==null)I=!0,bt(L);else{var Y=n(d);Y!==null&&qe(b,Y.startTime-B)}}function L(B,Y){I=!1,N&&(N=!1,E(w),w=-1),T=!0;var J=g;try{for(R(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||B&&!k());){var pe=m.callback;if(typeof pe=="function"){m.callback=null,g=m.priorityLevel;var de=pe(m.expirationTime<=Y);Y=t.unstable_now(),typeof de=="function"?m.callback=de:m===n(u)&&r(u),R(Y)}else r(u);m=n(u)}if(m!==null)var q=!0;else{var Ye=n(d);Ye!==null&&qe(b,Ye.startTime-Y),q=!1}return q}finally{m=null,g=J,T=!1}}var M=!1,x=null,w=-1,S=5,C=-1;function k(){return!(t.unstable_now()-C<S)}function P(){if(x!==null){var B=t.unstable_now();C=B;var Y=!0;try{Y=x(!0,B)}finally{Y?v():(M=!1,x=null)}}else M=!1}var v;if(typeof _=="function")v=function(){_(P)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,me=te.port2;te.port1.onmessage=P,v=function(){me.postMessage(null)}}else v=function(){A(P,0)};function bt(B){x=B,M||(M=!0,v())}function qe(B,Y){w=A(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){I||T||(I=!0,bt(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var J=g;g=Y;try{return B()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=g;g=B;try{return Y()}finally{g=J}},t.unstable_scheduleCallback=function(B,Y,J){var pe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?pe+J:pe):J=pe,B){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=J+de,B={id:f++,callback:Y,priorityLevel:B,startTime:J,expirationTime:de,sortIndex:-1},J>pe?(B.sortIndex=J,e(d,B),n(u)===null&&B===n(d)&&(N?(E(w),w=-1):N=!0,qe(b,J-pe))):(B.sortIndex=de,e(u,B),I||T||(I=!0,bt(L))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var Y=g;return function(){var J=g;g=Y;try{return B.apply(this,arguments)}finally{g=J}}}})(Av);Sv.exports=Av;var vT=Sv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T=D,Ft=vT;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rv=new Set,mo={};function cs(t,e){Gs(t,e),Gs(t+"Capture",e)}function Gs(t,e){for(mo[t]=e,t=0;t<e.length;t++)Rv.add(e[t])}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fd=Object.prototype.hasOwnProperty,wT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jm={},bm={};function ET(t){return fd.call(bm,t)?!0:fd.call(jm,t)?!1:wT.test(t)?bm[t]=!0:(jm[t]=!0,!1)}function IT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TT(t,e,n,r){if(e===null||typeof e>"u"||IT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lh=/[\-:]([a-z])/g;function Vh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lh,Vh);st[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lh,Vh);st[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lh,Vh);st[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mh(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TT(e,n,s,r)&&(n=null),r||s===null?ET(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qn=_T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ba=Symbol.for("react.element"),Ss=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),Uh=Symbol.for("react.strict_mode"),pd=Symbol.for("react.profiler"),Cv=Symbol.for("react.provider"),Nv=Symbol.for("react.context"),Fh=Symbol.for("react.forward_ref"),md=Symbol.for("react.suspense"),gd=Symbol.for("react.suspense_list"),Bh=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),Pv=Symbol.for("react.offscreen"),Om=Symbol.iterator;function Li(t){return t===null||typeof t!="object"?null:(t=Om&&t[Om]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Cc;function qi(t){if(Cc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cc=e&&e[1]||""}return`
`+Cc+t}var Nc=!1;function Pc(t,e){if(!t||Nc)return"";Nc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Nc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qi(t):""}function xT(t){switch(t.tag){case 5:return qi(t.type);case 16:return qi("Lazy");case 13:return qi("Suspense");case 19:return qi("SuspenseList");case 0:case 2:case 15:return t=Pc(t.type,!1),t;case 11:return t=Pc(t.type.render,!1),t;case 1:return t=Pc(t.type,!0),t;default:return""}}function yd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case As:return"Fragment";case Ss:return"Portal";case pd:return"Profiler";case Uh:return"StrictMode";case md:return"Suspense";case gd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Nv:return(t.displayName||"Context")+".Consumer";case Cv:return(t._context.displayName||"Context")+".Provider";case Fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bh:return e=t.displayName||null,e!==null?e:yd(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return yd(t(e))}catch{}}return null}function ST(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yd(e);case 8:return e===Uh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AT(t){var e=kv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oa(t){t._valueTracker||(t._valueTracker=AT(t))}function Dv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vd(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jv(t,e){e=e.checked,e!=null&&Mh(t,"checked",e,!1)}function _d(t,e){jv(t,e);var n=Tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wd(t,e.type,n):e.hasOwnProperty("defaultValue")&&wd(t,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wd(t,e,n){(e!=="number"||Al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wi=Array.isArray;function Vs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ed(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Wi(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tr(n)}}function bv(t,e){var n=Tr(e.value),r=Tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Um(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ov(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ov(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var La,Lv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(La=La||document.createElement("div"),La.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=La.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RT=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(t){RT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zi[e]=Zi[t]})});function Vv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zi.hasOwnProperty(t)&&Zi[t]?(""+e).trim():e+"px"}function Mv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Vv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var CT=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Td(t,e){if(e){if(CT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function xd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sd=null;function zh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ad=null,Ms=null,Us=null;function Fm(t){if(t=Go(t)){if(typeof Ad!="function")throw Error(F(280));var e=t.stateNode;e&&(e=wu(e),Ad(t.stateNode,t.type,e))}}function Uv(t){Ms?Us?Us.push(t):Us=[t]:Ms=t}function Fv(){if(Ms){var t=Ms,e=Us;if(Us=Ms=null,Fm(t),e)for(t=0;t<e.length;t++)Fm(e[t])}}function Bv(t,e){return t(e)}function zv(){}var kc=!1;function $v(t,e,n){if(kc)return t(e,n);kc=!0;try{return Bv(t,e,n)}finally{kc=!1,(Ms!==null||Us!==null)&&(zv(),Fv())}}function yo(t,e){var n=t.stateNode;if(n===null)return null;var r=wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Rd=!1;if(Fn)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){Rd=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{Rd=!1}function NT(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var eo=!1,Rl=null,Cl=!1,Cd=null,PT={onError:function(t){eo=!0,Rl=t}};function kT(t,e,n,r,s,i,o,l,u){eo=!1,Rl=null,NT.apply(PT,arguments)}function DT(t,e,n,r,s,i,o,l,u){if(kT.apply(this,arguments),eo){if(eo){var d=Rl;eo=!1,Rl=null}else throw Error(F(198));Cl||(Cl=!0,Cd=d)}}function ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Hv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bm(t){if(ds(t)!==t)throw Error(F(188))}function jT(t){var e=t.alternate;if(!e){if(e=ds(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Bm(s),t;if(i===r)return Bm(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function qv(t){return t=jT(t),t!==null?Wv(t):null}function Wv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wv(t);if(e!==null)return e;t=t.sibling}return null}var Gv=Ft.unstable_scheduleCallback,zm=Ft.unstable_cancelCallback,bT=Ft.unstable_shouldYield,OT=Ft.unstable_requestPaint,be=Ft.unstable_now,LT=Ft.unstable_getCurrentPriorityLevel,$h=Ft.unstable_ImmediatePriority,Kv=Ft.unstable_UserBlockingPriority,Nl=Ft.unstable_NormalPriority,VT=Ft.unstable_LowPriority,Qv=Ft.unstable_IdlePriority,gu=null,pn=null;function MT(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:BT,UT=Math.log,FT=Math.LN2;function BT(t){return t>>>=0,t===0?32:31-(UT(t)/FT|0)|0}var Va=64,Ma=4194304;function Gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Gi(l):(i&=o,i!==0&&(r=Gi(i)))}else o=n&~s,o!==0?r=Gi(o):i!==0&&(r=Gi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-on(e),s=1<<n,r|=t[n],e&=~s;return r}function zT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $T(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-on(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=zT(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Nd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yv(){var t=Va;return Va<<=1,!(Va&4194240)&&(Va=64),t}function Dc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-on(e),t[e]=n}function HT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-on(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Hh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-on(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function Xv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jv,qh,Zv,e_,t_,Pd=!1,Ua=[],hr=null,fr=null,pr=null,vo=new Map,_o=new Map,rr=[],qT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $m(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(e.pointerId)}}function Mi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Go(e),e!==null&&qh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function WT(t,e,n,r,s){switch(e){case"focusin":return hr=Mi(hr,t,e,n,r,s),!0;case"dragenter":return fr=Mi(fr,t,e,n,r,s),!0;case"mouseover":return pr=Mi(pr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return vo.set(i,Mi(vo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,_o.set(i,Mi(_o.get(i)||null,t,e,n,r,s)),!0}return!1}function n_(t){var e=Hr(t.target);if(e!==null){var n=ds(e);if(n!==null){if(e=n.tag,e===13){if(e=Hv(n),e!==null){t.blockedOn=e,t_(t.priority,function(){Zv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sd=r,n.target.dispatchEvent(r),Sd=null}else return e=Go(n),e!==null&&qh(e),t.blockedOn=n,!1;e.shift()}return!0}function Hm(t,e,n){il(t)&&n.delete(e)}function GT(){Pd=!1,hr!==null&&il(hr)&&(hr=null),fr!==null&&il(fr)&&(fr=null),pr!==null&&il(pr)&&(pr=null),vo.forEach(Hm),_o.forEach(Hm)}function Ui(t,e){t.blockedOn===e&&(t.blockedOn=null,Pd||(Pd=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,GT)))}function wo(t){function e(s){return Ui(s,t)}if(0<Ua.length){Ui(Ua[0],t);for(var n=1;n<Ua.length;n++){var r=Ua[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hr!==null&&Ui(hr,t),fr!==null&&Ui(fr,t),pr!==null&&Ui(pr,t),vo.forEach(e),_o.forEach(e),n=0;n<rr.length;n++)r=rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)n_(n),n.blockedOn===null&&rr.shift()}var Fs=Qn.ReactCurrentBatchConfig,kl=!0;function KT(t,e,n,r){var s=he,i=Fs.transition;Fs.transition=null;try{he=1,Wh(t,e,n,r)}finally{he=s,Fs.transition=i}}function QT(t,e,n,r){var s=he,i=Fs.transition;Fs.transition=null;try{he=4,Wh(t,e,n,r)}finally{he=s,Fs.transition=i}}function Wh(t,e,n,r){if(kl){var s=kd(t,e,n,r);if(s===null)zc(t,e,r,Dl,n),$m(t,r);else if(WT(s,t,e,n,r))r.stopPropagation();else if($m(t,r),e&4&&-1<qT.indexOf(t)){for(;s!==null;){var i=Go(s);if(i!==null&&Jv(i),i=kd(t,e,n,r),i===null&&zc(t,e,r,Dl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else zc(t,e,r,null,n)}}var Dl=null;function kd(t,e,n,r){if(Dl=null,t=zh(r),t=Hr(t),t!==null)if(e=ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Hv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dl=t,null}function r_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LT()){case $h:return 1;case Kv:return 4;case Nl:case VT:return 16;case Qv:return 536870912;default:return 16}default:return 16}}var lr=null,Gh=null,ol=null;function s_(){if(ol)return ol;var t,e=Gh,n=e.length,r,s="value"in lr?lr.value:lr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ol=s.slice(t,1<r?1-r:void 0)}function al(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fa(){return!0}function qm(){return!1}function zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fa:qm,this.isPropagationStopped=qm,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),e}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kh=zt(di),Wo=Ne({},di,{view:0,detail:0}),YT=zt(Wo),jc,bc,Fi,yu=Ne({},Wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fi&&(Fi&&t.type==="mousemove"?(jc=t.screenX-Fi.screenX,bc=t.screenY-Fi.screenY):bc=jc=0,Fi=t),jc)},movementY:function(t){return"movementY"in t?t.movementY:bc}}),Wm=zt(yu),XT=Ne({},yu,{dataTransfer:0}),JT=zt(XT),ZT=Ne({},Wo,{relatedTarget:0}),Oc=zt(ZT),ex=Ne({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),tx=zt(ex),nx=Ne({},di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rx=zt(nx),sx=Ne({},di,{data:0}),Gm=zt(sx),ix={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ox={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ax={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ax[t])?!!e[t]:!1}function Qh(){return lx}var ux=Ne({},Wo,{key:function(t){if(t.key){var e=ix[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=al(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ox[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qh,charCode:function(t){return t.type==="keypress"?al(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?al(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cx=zt(ux),dx=Ne({},yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Km=zt(dx),hx=Ne({},Wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qh}),fx=zt(hx),px=Ne({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),mx=zt(px),gx=Ne({},yu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yx=zt(gx),vx=[9,13,27,32],Yh=Fn&&"CompositionEvent"in window,to=null;Fn&&"documentMode"in document&&(to=document.documentMode);var _x=Fn&&"TextEvent"in window&&!to,i_=Fn&&(!Yh||to&&8<to&&11>=to),Qm=" ",Ym=!1;function o_(t,e){switch(t){case"keyup":return vx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rs=!1;function wx(t,e){switch(t){case"compositionend":return a_(e);case"keypress":return e.which!==32?null:(Ym=!0,Qm);case"textInput":return t=e.data,t===Qm&&Ym?null:t;default:return null}}function Ex(t,e){if(Rs)return t==="compositionend"||!Yh&&o_(t,e)?(t=s_(),ol=Gh=lr=null,Rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return i_&&e.locale!=="ko"?null:e.data;default:return null}}var Ix={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ix[t.type]:e==="textarea"}function l_(t,e,n,r){Uv(r),e=jl(e,"onChange"),0<e.length&&(n=new Kh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var no=null,Eo=null;function Tx(t){__(t,0)}function vu(t){var e=Ps(t);if(Dv(e))return t}function xx(t,e){if(t==="change")return e}var u_=!1;if(Fn){var Lc;if(Fn){var Vc="oninput"in document;if(!Vc){var Jm=document.createElement("div");Jm.setAttribute("oninput","return;"),Vc=typeof Jm.oninput=="function"}Lc=Vc}else Lc=!1;u_=Lc&&(!document.documentMode||9<document.documentMode)}function Zm(){no&&(no.detachEvent("onpropertychange",c_),Eo=no=null)}function c_(t){if(t.propertyName==="value"&&vu(Eo)){var e=[];l_(e,Eo,t,zh(t)),$v(Tx,e)}}function Sx(t,e,n){t==="focusin"?(Zm(),no=e,Eo=n,no.attachEvent("onpropertychange",c_)):t==="focusout"&&Zm()}function Ax(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vu(Eo)}function Rx(t,e){if(t==="click")return vu(e)}function Cx(t,e){if(t==="input"||t==="change")return vu(e)}function Nx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var un=typeof Object.is=="function"?Object.is:Nx;function Io(t,e){if(un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fd.call(e,s)||!un(t[s],e[s]))return!1}return!0}function eg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tg(t,e){var n=eg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=eg(n)}}function d_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?d_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function h_(){for(var t=window,e=Al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Al(t.document)}return e}function Xh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Px(t){var e=h_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&d_(n.ownerDocument.documentElement,n)){if(r!==null&&Xh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=tg(n,i);var o=tg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kx=Fn&&"documentMode"in document&&11>=document.documentMode,Cs=null,Dd=null,ro=null,jd=!1;function ng(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jd||Cs==null||Cs!==Al(r)||(r=Cs,"selectionStart"in r&&Xh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ro&&Io(ro,r)||(ro=r,r=jl(Dd,"onSelect"),0<r.length&&(e=new Kh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cs)))}function Ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ns={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionend:Ba("Transition","TransitionEnd")},Mc={},f_={};Fn&&(f_=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function _u(t){if(Mc[t])return Mc[t];if(!Ns[t])return t;var e=Ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in f_)return Mc[t]=e[n];return t}var p_=_u("animationend"),m_=_u("animationiteration"),g_=_u("animationstart"),y_=_u("transitionend"),v_=new Map,rg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(t,e){v_.set(t,e),cs(e,[t])}for(var Uc=0;Uc<rg.length;Uc++){var Fc=rg[Uc],Dx=Fc.toLowerCase(),jx=Fc[0].toUpperCase()+Fc.slice(1);Dr(Dx,"on"+jx)}Dr(p_,"onAnimationEnd");Dr(m_,"onAnimationIteration");Dr(g_,"onAnimationStart");Dr("dblclick","onDoubleClick");Dr("focusin","onFocus");Dr("focusout","onBlur");Dr(y_,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ki));function sg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,DT(r,e,void 0,t),t.currentTarget=null}function __(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;sg(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;sg(s,l,d),i=u}}}if(Cl)throw t=Cd,Cl=!1,Cd=null,t}function _e(t,e){var n=e[Md];n===void 0&&(n=e[Md]=new Set);var r=t+"__bubble";n.has(r)||(w_(e,t,2,!1),n.add(r))}function Bc(t,e,n){var r=0;e&&(r|=4),w_(n,t,r,e)}var za="_reactListening"+Math.random().toString(36).slice(2);function To(t){if(!t[za]){t[za]=!0,Rv.forEach(function(n){n!=="selectionchange"&&(bx.has(n)||Bc(n,!1,t),Bc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[za]||(e[za]=!0,Bc("selectionchange",!1,e))}}function w_(t,e,n,r){switch(r_(e)){case 1:var s=KT;break;case 4:s=QT;break;default:s=Wh}n=s.bind(null,e,n,t),s=void 0,!Rd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function zc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Hr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}$v(function(){var d=i,f=zh(n),m=[];e:{var g=v_.get(t);if(g!==void 0){var T=Kh,I=t;switch(t){case"keypress":if(al(n)===0)break e;case"keydown":case"keyup":T=cx;break;case"focusin":I="focus",T=Oc;break;case"focusout":I="blur",T=Oc;break;case"beforeblur":case"afterblur":T=Oc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Wm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=JT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=fx;break;case p_:case m_:case g_:T=tx;break;case y_:T=mx;break;case"scroll":T=YT;break;case"wheel":T=yx;break;case"copy":case"cut":case"paste":T=rx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Km}var N=(e&4)!==0,A=!N&&t==="scroll",E=N?g!==null?g+"Capture":null:g;N=[];for(var _=d,R;_!==null;){R=_;var b=R.stateNode;if(R.tag===5&&b!==null&&(R=b,E!==null&&(b=yo(_,E),b!=null&&N.push(xo(_,b,R)))),A)break;_=_.return}0<N.length&&(g=new T(g,I,null,n,f),m.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==Sd&&(I=n.relatedTarget||n.fromElement)&&(Hr(I)||I[Bn]))break e;if((T||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,T?(I=n.relatedTarget||n.toElement,T=d,I=I?Hr(I):null,I!==null&&(A=ds(I),I!==A||I.tag!==5&&I.tag!==6)&&(I=null)):(T=null,I=d),T!==I)){if(N=Wm,b="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(N=Km,b="onPointerLeave",E="onPointerEnter",_="pointer"),A=T==null?g:Ps(T),R=I==null?g:Ps(I),g=new N(b,_+"leave",T,n,f),g.target=A,g.relatedTarget=R,b=null,Hr(f)===d&&(N=new N(E,_+"enter",I,n,f),N.target=R,N.relatedTarget=A,b=N),A=b,T&&I)t:{for(N=T,E=I,_=0,R=N;R;R=Es(R))_++;for(R=0,b=E;b;b=Es(b))R++;for(;0<_-R;)N=Es(N),_--;for(;0<R-_;)E=Es(E),R--;for(;_--;){if(N===E||E!==null&&N===E.alternate)break t;N=Es(N),E=Es(E)}N=null}else N=null;T!==null&&ig(m,g,T,N,!1),I!==null&&A!==null&&ig(m,A,I,N,!0)}}e:{if(g=d?Ps(d):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var L=xx;else if(Xm(g))if(u_)L=Cx;else{L=Ax;var M=Sx}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=Rx);if(L&&(L=L(t,d))){l_(m,L,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&wd(g,"number",g.value)}switch(M=d?Ps(d):window,t){case"focusin":(Xm(M)||M.contentEditable==="true")&&(Cs=M,Dd=d,ro=null);break;case"focusout":ro=Dd=Cs=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,ng(m,n,f);break;case"selectionchange":if(kx)break;case"keydown":case"keyup":ng(m,n,f)}var x;if(Yh)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rs?o_(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(i_&&n.locale!=="ko"&&(Rs||w!=="onCompositionStart"?w==="onCompositionEnd"&&Rs&&(x=s_()):(lr=f,Gh="value"in lr?lr.value:lr.textContent,Rs=!0)),M=jl(d,w),0<M.length&&(w=new Gm(w,t,null,n,f),m.push({event:w,listeners:M}),x?w.data=x:(x=a_(n),x!==null&&(w.data=x)))),(x=_x?wx(t,n):Ex(t,n))&&(d=jl(d,"onBeforeInput"),0<d.length&&(f=new Gm("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=x))}__(m,e)})}function xo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yo(t,n),i!=null&&r.unshift(xo(t,i,s)),i=yo(t,e),i!=null&&r.push(xo(t,i,s))),t=t.return}return r}function Es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ig(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=yo(n,i),u!=null&&o.unshift(xo(n,u,l))):s||(u=yo(n,i),u!=null&&o.push(xo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ox=/\r\n?/g,Lx=/\u0000|\uFFFD/g;function og(t){return(typeof t=="string"?t:""+t).replace(Ox,`
`).replace(Lx,"")}function $a(t,e,n){if(e=og(e),og(t)!==e&&n)throw Error(F(425))}function bl(){}var bd=null,Od=null;function Ld(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vd=typeof setTimeout=="function"?setTimeout:void 0,Vx=typeof clearTimeout=="function"?clearTimeout:void 0,ag=typeof Promise=="function"?Promise:void 0,Mx=typeof queueMicrotask=="function"?queueMicrotask:typeof ag<"u"?function(t){return ag.resolve(null).then(t).catch(Ux)}:Vd;function Ux(t){setTimeout(function(){throw t})}function $c(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wo(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fn="__reactFiber$"+hi,So="__reactProps$"+hi,Bn="__reactContainer$"+hi,Md="__reactEvents$"+hi,Fx="__reactListeners$"+hi,Bx="__reactHandles$"+hi;function Hr(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lg(t);t!==null;){if(n=t[fn])return n;t=lg(t)}return e}t=n,n=t.parentNode}return null}function Go(t){return t=t[fn]||t[Bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function wu(t){return t[So]||null}var Ud=[],ks=-1;function jr(t){return{current:t}}function Ie(t){0>ks||(t.current=Ud[ks],Ud[ks]=null,ks--)}function ye(t,e){ks++,Ud[ks]=t.current,t.current=e}var xr={},gt=jr(xr),Pt=jr(!1),es=xr;function Ks(t,e){var n=t.type.contextTypes;if(!n)return xr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kt(t){return t=t.childContextTypes,t!=null}function Ol(){Ie(Pt),Ie(gt)}function ug(t,e,n){if(gt.current!==xr)throw Error(F(168));ye(gt,e),ye(Pt,n)}function E_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,ST(t)||"Unknown",s));return Ne({},n,r)}function Ll(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xr,es=gt.current,ye(gt,t),ye(Pt,Pt.current),!0}function cg(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=E_(t,e,es),r.__reactInternalMemoizedMergedChildContext=t,Ie(Pt),Ie(gt),ye(gt,t)):Ie(Pt),ye(Pt,n)}var Pn=null,Eu=!1,Hc=!1;function I_(t){Pn===null?Pn=[t]:Pn.push(t)}function zx(t){Eu=!0,I_(t)}function br(){if(!Hc&&Pn!==null){Hc=!0;var t=0,e=he;try{var n=Pn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pn=null,Eu=!1}catch(s){throw Pn!==null&&(Pn=Pn.slice(t+1)),Gv($h,br),s}finally{he=e,Hc=!1}}return null}var Ds=[],js=0,Vl=null,Ml=0,Ht=[],qt=0,ts=null,Dn=1,jn="";function Br(t,e){Ds[js++]=Ml,Ds[js++]=Vl,Vl=t,Ml=e}function T_(t,e,n){Ht[qt++]=Dn,Ht[qt++]=jn,Ht[qt++]=ts,ts=t;var r=Dn;t=jn;var s=32-on(r)-1;r&=~(1<<s),n+=1;var i=32-on(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Dn=1<<32-on(e)+s|n<<s|r,jn=i+t}else Dn=1<<i|n<<s|r,jn=t}function Jh(t){t.return!==null&&(Br(t,1),T_(t,1,0))}function Zh(t){for(;t===Vl;)Vl=Ds[--js],Ds[js]=null,Ml=Ds[--js],Ds[js]=null;for(;t===ts;)ts=Ht[--qt],Ht[qt]=null,jn=Ht[--qt],Ht[qt]=null,Dn=Ht[--qt],Ht[qt]=null}var Ut=null,Vt=null,Te=!1,rn=null;function x_(t,e){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Vt=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ts!==null?{id:Dn,overflow:jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Vt=null,!0):!1;default:return!1}}function Fd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bd(t){if(Te){var e=Vt;if(e){var n=e;if(!dg(t,e)){if(Fd(t))throw Error(F(418));e=mr(n.nextSibling);var r=Ut;e&&dg(t,e)?x_(r,n):(t.flags=t.flags&-4097|2,Te=!1,Ut=t)}}else{if(Fd(t))throw Error(F(418));t.flags=t.flags&-4097|2,Te=!1,Ut=t}}}function hg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function Ha(t){if(t!==Ut)return!1;if(!Te)return hg(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ld(t.type,t.memoizedProps)),e&&(e=Vt)){if(Fd(t))throw S_(),Error(F(418));for(;e;)x_(t,e),e=mr(e.nextSibling)}if(hg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Ut?mr(t.stateNode.nextSibling):null;return!0}function S_(){for(var t=Vt;t;)t=mr(t.nextSibling)}function Qs(){Vt=Ut=null,Te=!1}function ef(t){rn===null?rn=[t]:rn.push(t)}var $x=Qn.ReactCurrentBatchConfig;function Bi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function qa(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fg(t){var e=t._init;return e(t._payload)}function A_(t){function e(E,_){if(t){var R=E.deletions;R===null?(E.deletions=[_],E.flags|=16):R.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=_r(E,_),E.index=0,E.sibling=null,E}function i(E,_,R){return E.index=R,t?(R=E.alternate,R!==null?(R=R.index,R<_?(E.flags|=2,_):R):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,R,b){return _===null||_.tag!==6?(_=Xc(R,E.mode,b),_.return=E,_):(_=s(_,R),_.return=E,_)}function u(E,_,R,b){var L=R.type;return L===As?f(E,_,R.props.children,b,R.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===tr&&fg(L)===_.type)?(b=s(_,R.props),b.ref=Bi(E,_,R),b.return=E,b):(b=pl(R.type,R.key,R.props,null,E.mode,b),b.ref=Bi(E,_,R),b.return=E,b)}function d(E,_,R,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==R.containerInfo||_.stateNode.implementation!==R.implementation?(_=Jc(R,E.mode,b),_.return=E,_):(_=s(_,R.children||[]),_.return=E,_)}function f(E,_,R,b,L){return _===null||_.tag!==7?(_=Yr(R,E.mode,b,L),_.return=E,_):(_=s(_,R),_.return=E,_)}function m(E,_,R){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Xc(""+_,E.mode,R),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ba:return R=pl(_.type,_.key,_.props,null,E.mode,R),R.ref=Bi(E,null,_),R.return=E,R;case Ss:return _=Jc(_,E.mode,R),_.return=E,_;case tr:var b=_._init;return m(E,b(_._payload),R)}if(Wi(_)||Li(_))return _=Yr(_,E.mode,R,null),_.return=E,_;qa(E,_)}return null}function g(E,_,R,b){var L=_!==null?_.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return L!==null?null:l(E,_,""+R,b);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ba:return R.key===L?u(E,_,R,b):null;case Ss:return R.key===L?d(E,_,R,b):null;case tr:return L=R._init,g(E,_,L(R._payload),b)}if(Wi(R)||Li(R))return L!==null?null:f(E,_,R,b,null);qa(E,R)}return null}function T(E,_,R,b,L){if(typeof b=="string"&&b!==""||typeof b=="number")return E=E.get(R)||null,l(_,E,""+b,L);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ba:return E=E.get(b.key===null?R:b.key)||null,u(_,E,b,L);case Ss:return E=E.get(b.key===null?R:b.key)||null,d(_,E,b,L);case tr:var M=b._init;return T(E,_,R,M(b._payload),L)}if(Wi(b)||Li(b))return E=E.get(R)||null,f(_,E,b,L,null);qa(_,b)}return null}function I(E,_,R,b){for(var L=null,M=null,x=_,w=_=0,S=null;x!==null&&w<R.length;w++){x.index>w?(S=x,x=null):S=x.sibling;var C=g(E,x,R[w],b);if(C===null){x===null&&(x=S);break}t&&x&&C.alternate===null&&e(E,x),_=i(C,_,w),M===null?L=C:M.sibling=C,M=C,x=S}if(w===R.length)return n(E,x),Te&&Br(E,w),L;if(x===null){for(;w<R.length;w++)x=m(E,R[w],b),x!==null&&(_=i(x,_,w),M===null?L=x:M.sibling=x,M=x);return Te&&Br(E,w),L}for(x=r(E,x);w<R.length;w++)S=T(x,E,w,R[w],b),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?w:S.key),_=i(S,_,w),M===null?L=S:M.sibling=S,M=S);return t&&x.forEach(function(k){return e(E,k)}),Te&&Br(E,w),L}function N(E,_,R,b){var L=Li(R);if(typeof L!="function")throw Error(F(150));if(R=L.call(R),R==null)throw Error(F(151));for(var M=L=null,x=_,w=_=0,S=null,C=R.next();x!==null&&!C.done;w++,C=R.next()){x.index>w?(S=x,x=null):S=x.sibling;var k=g(E,x,C.value,b);if(k===null){x===null&&(x=S);break}t&&x&&k.alternate===null&&e(E,x),_=i(k,_,w),M===null?L=k:M.sibling=k,M=k,x=S}if(C.done)return n(E,x),Te&&Br(E,w),L;if(x===null){for(;!C.done;w++,C=R.next())C=m(E,C.value,b),C!==null&&(_=i(C,_,w),M===null?L=C:M.sibling=C,M=C);return Te&&Br(E,w),L}for(x=r(E,x);!C.done;w++,C=R.next())C=T(x,E,w,C.value,b),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?w:C.key),_=i(C,_,w),M===null?L=C:M.sibling=C,M=C);return t&&x.forEach(function(P){return e(E,P)}),Te&&Br(E,w),L}function A(E,_,R,b){if(typeof R=="object"&&R!==null&&R.type===As&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case ba:e:{for(var L=R.key,M=_;M!==null;){if(M.key===L){if(L=R.type,L===As){if(M.tag===7){n(E,M.sibling),_=s(M,R.props.children),_.return=E,E=_;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===tr&&fg(L)===M.type){n(E,M.sibling),_=s(M,R.props),_.ref=Bi(E,M,R),_.return=E,E=_;break e}n(E,M);break}else e(E,M);M=M.sibling}R.type===As?(_=Yr(R.props.children,E.mode,b,R.key),_.return=E,E=_):(b=pl(R.type,R.key,R.props,null,E.mode,b),b.ref=Bi(E,_,R),b.return=E,E=b)}return o(E);case Ss:e:{for(M=R.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===R.containerInfo&&_.stateNode.implementation===R.implementation){n(E,_.sibling),_=s(_,R.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=Jc(R,E.mode,b),_.return=E,E=_}return o(E);case tr:return M=R._init,A(E,_,M(R._payload),b)}if(Wi(R))return I(E,_,R,b);if(Li(R))return N(E,_,R,b);qa(E,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,R),_.return=E,E=_):(n(E,_),_=Xc(R,E.mode,b),_.return=E,E=_),o(E)):n(E,_)}return A}var Ys=A_(!0),R_=A_(!1),Ul=jr(null),Fl=null,bs=null,tf=null;function nf(){tf=bs=Fl=null}function rf(t){var e=Ul.current;Ie(Ul),t._currentValue=e}function zd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bs(t,e){Fl=t,tf=bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(tf!==t)if(t={context:t,memoizedValue:e,next:null},bs===null){if(Fl===null)throw Error(F(308));bs=t,Fl.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var qr=null;function sf(t){qr===null?qr=[t]:qr.push(t)}function C_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,sf(e)):(n.next=s.next,s.next=n),e.interleaved=n,zn(t,r)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function of(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zn(t,n)}return s=r.interleaved,s===null?(e.next=e,sf(r)):(e.next=s.next,s.next=e),r.interleaved=e,zn(t,n)}function ll(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hh(t,n)}}function pg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bl(t,e,n,r){var s=t.updateQueue;nr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,T=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,N=l;switch(g=e,T=n,N.tag){case 1:if(I=N.payload,typeof I=="function"){m=I.call(T,m,g);break e}m=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=N.payload,g=typeof I=="function"?I.call(T,m,g):I,g==null)break e;m=Ne({},m,g);break e;case 2:nr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else T={eventTime:T,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=T,u=m):f=f.next=T,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);rs|=o,t.lanes=o,t.memoizedState=m}}function mg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Ko={},mn=jr(Ko),Ao=jr(Ko),Ro=jr(Ko);function Wr(t){if(t===Ko)throw Error(F(174));return t}function af(t,e){switch(ye(Ro,e),ye(Ao,t),ye(mn,Ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Id(e,t)}Ie(mn),ye(mn,e)}function Xs(){Ie(mn),Ie(Ao),Ie(Ro)}function P_(t){Wr(Ro.current);var e=Wr(mn.current),n=Id(e,t.type);e!==n&&(ye(Ao,t),ye(mn,n))}function lf(t){Ao.current===t&&(Ie(mn),Ie(Ao))}var Ae=jr(0);function zl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qc=[];function uf(){for(var t=0;t<qc.length;t++)qc[t]._workInProgressVersionPrimary=null;qc.length=0}var ul=Qn.ReactCurrentDispatcher,Wc=Qn.ReactCurrentBatchConfig,ns=0,Ce=null,Fe=null,Ge=null,$l=!1,so=!1,Co=0,Hx=0;function ut(){throw Error(F(321))}function cf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!un(t[n],e[n]))return!1;return!0}function df(t,e,n,r,s,i){if(ns=i,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ul.current=t===null||t.memoizedState===null?Kx:Qx,t=n(r,s),so){i=0;do{if(so=!1,Co=0,25<=i)throw Error(F(301));i+=1,Ge=Fe=null,e.updateQueue=null,ul.current=Yx,t=n(r,s)}while(so)}if(ul.current=Hl,e=Fe!==null&&Fe.next!==null,ns=0,Ge=Fe=Ce=null,$l=!1,e)throw Error(F(300));return t}function hf(){var t=Co!==0;return Co=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Xt(){if(Fe===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=Ge===null?Ce.memoizedState:Ge.next;if(e!==null)Ge=e,Fe=t;else{if(t===null)throw Error(F(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function No(t,e){return typeof e=="function"?e(t):e}function Gc(t){var e=Xt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((ns&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ce.lanes|=f,rs|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,un(r,e.memoizedState)||(Nt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ce.lanes|=i,rs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Kc(t){var e=Xt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);un(i,e.memoizedState)||(Nt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function k_(){}function D_(t,e){var n=Ce,r=Xt(),s=e(),i=!un(r.memoizedState,s);if(i&&(r.memoizedState=s,Nt=!0),r=r.queue,ff(O_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Po(9,b_.bind(null,n,r,s,e),void 0,null),Ke===null)throw Error(F(349));ns&30||j_(n,e,s)}return s}function j_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function b_(t,e,n,r){e.value=n,e.getSnapshot=r,L_(e)&&V_(t)}function O_(t,e,n){return n(function(){L_(e)&&V_(t)})}function L_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!un(t,n)}catch{return!0}}function V_(t){var e=zn(t,1);e!==null&&an(e,t,1,-1)}function gg(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},e.queue=t,t=t.dispatch=Gx.bind(null,Ce,t),[e.memoizedState,t]}function Po(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function M_(){return Xt().memoizedState}function cl(t,e,n,r){var s=hn();Ce.flags|=t,s.memoizedState=Po(1|e,n,void 0,r===void 0?null:r)}function Iu(t,e,n,r){var s=Xt();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var o=Fe.memoizedState;if(i=o.destroy,r!==null&&cf(r,o.deps)){s.memoizedState=Po(e,n,i,r);return}}Ce.flags|=t,s.memoizedState=Po(1|e,n,i,r)}function yg(t,e){return cl(8390656,8,t,e)}function ff(t,e){return Iu(2048,8,t,e)}function U_(t,e){return Iu(4,2,t,e)}function F_(t,e){return Iu(4,4,t,e)}function B_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function z_(t,e,n){return n=n!=null?n.concat([t]):null,Iu(4,4,B_.bind(null,e,t),n)}function pf(){}function $_(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function H_(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function q_(t,e,n){return ns&21?(un(n,e)||(n=Yv(),Ce.lanes|=n,rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=n)}function qx(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Wc.transition;Wc.transition={};try{t(!1),e()}finally{he=n,Wc.transition=r}}function W_(){return Xt().memoizedState}function Wx(t,e,n){var r=vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},G_(t))K_(e,n);else if(n=C_(t,e,n,r),n!==null){var s=Tt();an(n,t,r,s),Q_(n,e,r)}}function Gx(t,e,n){var r=vr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(G_(t))K_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,un(l,o)){var u=e.interleaved;u===null?(s.next=s,sf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=C_(t,e,s,r),n!==null&&(s=Tt(),an(n,t,r,s),Q_(n,e,r))}}function G_(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function K_(t,e){so=$l=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hh(t,n)}}var Hl={readContext:Yt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},Kx={readContext:Yt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:yg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cl(4194308,4,B_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cl(4194308,4,t,e)},useInsertionEffect:function(t,e){return cl(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Wx.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:gg,useDebugValue:pf,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=gg(!1),e=t[0];return t=qx.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,s=hn();if(Te){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ke===null)throw Error(F(349));ns&30||j_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,yg(O_.bind(null,r,i,t),[t]),r.flags|=2048,Po(9,b_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=Ke.identifierPrefix;if(Te){var n=jn,r=Dn;n=(r&~(1<<32-on(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Co++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qx={readContext:Yt,useCallback:$_,useContext:Yt,useEffect:ff,useImperativeHandle:z_,useInsertionEffect:U_,useLayoutEffect:F_,useMemo:H_,useReducer:Gc,useRef:M_,useState:function(){return Gc(No)},useDebugValue:pf,useDeferredValue:function(t){var e=Xt();return q_(e,Fe.memoizedState,t)},useTransition:function(){var t=Gc(No)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:k_,useSyncExternalStore:D_,useId:W_,unstable_isNewReconciler:!1},Yx={readContext:Yt,useCallback:$_,useContext:Yt,useEffect:ff,useImperativeHandle:z_,useInsertionEffect:U_,useLayoutEffect:F_,useMemo:H_,useReducer:Kc,useRef:M_,useState:function(){return Kc(No)},useDebugValue:pf,useDeferredValue:function(t){var e=Xt();return Fe===null?e.memoizedState=t:q_(e,Fe.memoizedState,t)},useTransition:function(){var t=Kc(No)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:k_,useSyncExternalStore:D_,useId:W_,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $d(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tu={isMounted:function(t){return(t=t._reactInternals)?ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=vr(t),i=Mn(r,s);i.payload=e,n!=null&&(i.callback=n),e=gr(t,i,s),e!==null&&(an(e,t,s,r),ll(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=vr(t),i=Mn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gr(t,i,s),e!==null&&(an(e,t,s,r),ll(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=vr(t),s=Mn(n,r);s.tag=2,e!=null&&(s.callback=e),e=gr(t,s,r),e!==null&&(an(e,t,r,n),ll(e,t,r))}};function vg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Io(n,r)||!Io(s,i):!0}function Y_(t,e,n){var r=!1,s=xr,i=e.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=kt(e)?es:gt.current,r=e.contextTypes,i=(r=r!=null)?Ks(t,s):xr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function _g(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tu.enqueueReplaceState(e,e.state,null)}function Hd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},of(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=kt(e)?es:gt.current,s.context=Ks(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&($d(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tu.enqueueReplaceState(s,s.state,null),Bl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",r=e;do n+=xT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Qc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Xx=typeof WeakMap=="function"?WeakMap:Map;function X_(t,e,n){n=Mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wl||(Wl=!0,th=r),qd(t,e)},n}function J_(t,e,n){n=Mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){qd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qd(t,e),typeof r!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Xx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=dS.bind(null,t,e,n),e.then(t,t))}function Eg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ig(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mn(-1,1),e.tag=2,gr(n,e,1))),n.lanes|=1),t)}var Jx=Qn.ReactCurrentOwner,Nt=!1;function wt(t,e,n,r){e.child=t===null?R_(e,null,n,r):Ys(e,t.child,n,r)}function Tg(t,e,n,r,s){n=n.render;var i=e.ref;return Bs(e,s),r=df(t,e,n,r,i,s),n=hf(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Te&&n&&Jh(e),e.flags|=1,wt(t,e,r,s),e.child)}function xg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!If(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Z_(t,e,i,r,s)):(t=pl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(o,r)&&t.ref===e.ref)return $n(t,e,s)}return e.flags|=1,t=_r(i,r),t.ref=e.ref,t.return=e,e.child=t}function Z_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Io(i,r)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,$n(t,e,s)}return Wd(t,e,n,r,s)}function e0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Ls,Lt),Lt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Ls,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(Ls,Lt),Lt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(Ls,Lt),Lt|=r;return wt(t,e,s,n),e.child}function t0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wd(t,e,n,r,s){var i=kt(n)?es:gt.current;return i=Ks(e,i),Bs(e,s),n=df(t,e,n,r,i,s),r=hf(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Te&&r&&Jh(e),e.flags|=1,wt(t,e,n,s),e.child)}function Sg(t,e,n,r,s){if(kt(n)){var i=!0;Ll(e)}else i=!1;if(Bs(e,s),e.stateNode===null)dl(t,e),Y_(e,n,r),Hd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Yt(d):(d=kt(n)?es:gt.current,d=Ks(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&_g(e,o,r,d),nr=!1;var g=e.memoizedState;o.state=g,Bl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Pt.current||nr?(typeof f=="function"&&($d(e,n,f,r),u=e.memoizedState),(l=nr||vg(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,N_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:tn(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yt(u):(u=kt(n)?es:gt.current,u=Ks(e,u));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&_g(e,o,r,u),nr=!1,g=e.memoizedState,o.state=g,Bl(e,r,o,s);var I=e.memoizedState;l!==m||g!==I||Pt.current||nr?(typeof T=="function"&&($d(e,n,T,r),I=e.memoizedState),(d=nr||vg(e,n,d,r,g,I,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Gd(t,e,n,r,i,s)}function Gd(t,e,n,r,s,i){t0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&cg(e,n,!1),$n(t,e,i);r=e.stateNode,Jx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ys(e,t.child,null,i),e.child=Ys(e,null,l,i)):wt(t,e,l,i),e.memoizedState=r.state,s&&cg(e,n,!0),e.child}function n0(t){var e=t.stateNode;e.pendingContext?ug(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ug(t,e.context,!1),af(t,e.containerInfo)}function Ag(t,e,n,r,s){return Qs(),ef(s),e.flags|=256,wt(t,e,n,r),e.child}var Kd={dehydrated:null,treeContext:null,retryLane:0};function Qd(t){return{baseLanes:t,cachePool:null,transitions:null}}function r0(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(Ae,s&1),t===null)return Bd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Au(o,r,0,null),t=Yr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qd(n),e.memoizedState=Kd,t):mf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Zx(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=_r(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=_r(l,i):(i=Yr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Qd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Kd,r}return i=t.child,t=i.sibling,r=_r(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mf(t,e){return e=Au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wa(t,e,n,r){return r!==null&&ef(r),Ys(e,t.child,null,n),t=mf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Qc(Error(F(422))),Wa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Au({mode:"visible",children:r.children},s,0,null),i=Yr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ys(e,t.child,null,o),e.child.memoizedState=Qd(o),e.memoizedState=Kd,i);if(!(e.mode&1))return Wa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Qc(i,r,void 0),Wa(t,e,o,r)}if(l=(o&t.childLanes)!==0,Nt||l){if(r=Ke,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zn(t,s),an(r,t,s,-1))}return Ef(),r=Qc(Error(F(421))),Wa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=hS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vt=mr(s.nextSibling),Ut=e,Te=!0,rn=null,t!==null&&(Ht[qt++]=Dn,Ht[qt++]=jn,Ht[qt++]=ts,Dn=t.id,jn=t.overflow,ts=e),e=mf(e,r.children),e.flags|=4096,e)}function Rg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zd(t.return,e,n)}function Yc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function s0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rg(t,n,e);else if(t.tag===19)Rg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Yc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Yc(e,!0,n,null,i);break;case"together":Yc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=_r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eS(t,e,n){switch(e.tag){case 3:n0(e),Qs();break;case 5:P_(e);break;case 1:kt(e.type)&&Ll(e);break;case 4:af(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(Ul,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?r0(t,e,n):(ye(Ae,Ae.current&1),t=$n(t,e,n),t!==null?t.sibling:null);ye(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return s0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,e0(t,e,n)}return $n(t,e,n)}var i0,Yd,o0,a0;i0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yd=function(){};o0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Wr(mn.current);var i=null;switch(n){case"input":s=vd(t,s),r=vd(t,r),i=[];break;case"select":s=Ne({},s,{value:void 0}),r=Ne({},r,{value:void 0}),i=[];break;case"textarea":s=Ed(t,s),r=Ed(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bl)}Td(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(mo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(mo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&_e("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};a0=function(t,e,n,r){n!==r&&(e.flags|=4)};function zi(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tS(t,e,n){var r=e.pendingProps;switch(Zh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return kt(e.type)&&Ol(),ct(e),null;case 3:return r=e.stateNode,Xs(),Ie(Pt),Ie(gt),uf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(sh(rn),rn=null))),Yd(t,e),ct(e),null;case 5:lf(e);var s=Wr(Ro.current);if(n=e.type,t!==null&&e.stateNode!=null)o0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return ct(e),null}if(t=Wr(mn.current),Ha(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fn]=e,r[So]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<Ki.length;s++)_e(Ki[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Lm(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":Mm(r,i),_e("invalid",r)}Td(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&$a(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&$a(r.textContent,l,t),s=["children",""+l]):mo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Oa(r),Vm(r,i,!0);break;case"textarea":Oa(r),Um(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ov(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[So]=r,i0(t,e,!1,!1),e.stateNode=t;e:{switch(o=xd(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ki.length;s++)_e(Ki[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":Lm(t,r),s=vd(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ne({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Mm(t,r),s=Ed(t,r),_e("invalid",t);break;default:s=r}Td(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Mv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Lv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&go(t,u):typeof u=="number"&&go(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",t):u!=null&&Mh(t,i,u,o))}switch(n){case"input":Oa(t),Vm(t,r,!1);break;case"textarea":Oa(t),Um(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Vs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Vs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)a0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Wr(Ro.current),Wr(mn.current),Ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(i=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:$a(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$a(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return ct(e),null;case 13:if(Ie(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Vt!==null&&e.mode&1&&!(e.flags&128))S_(),Qs(),e.flags|=98560,i=!1;else if(i=Ha(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[fn]=e}else Qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),i=!1}else rn!==null&&(sh(rn),rn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?ze===0&&(ze=3):Ef())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return Xs(),Yd(t,e),t===null&&To(e.stateNode.containerInfo),ct(e),null;case 10:return rf(e.type._context),ct(e),null;case 17:return kt(e.type)&&Ol(),ct(e),null;case 19:if(Ie(Ae),i=e.memoizedState,i===null)return ct(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)zi(i,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zl(t),o!==null){for(e.flags|=128,zi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&be()>Zs&&(e.flags|=128,r=!0,zi(i,!1),e.lanes=4194304)}else{if(!r)if(t=zl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return ct(e),null}else 2*be()-i.renderingStartTime>Zs&&n!==1073741824&&(e.flags|=128,r=!0,zi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=be(),e.sibling=null,n=Ae.current,ye(Ae,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return wf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lt&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function nS(t,e){switch(Zh(e),e.tag){case 1:return kt(e.type)&&Ol(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),Ie(Pt),Ie(gt),uf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lf(e),null;case 13:if(Ie(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ae),null;case 4:return Xs(),null;case 10:return rf(e.type._context),null;case 22:case 23:return wf(),null;case 24:return null;default:return null}}var Ga=!1,pt=!1,rS=typeof WeakSet=="function"?WeakSet:Set,W=null;function Os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Xd(t,e,n){try{n()}catch(r){De(t,e,r)}}var Cg=!1;function sS(t,e){if(bd=kl,t=h_(),Xh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var T;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(T=m.firstChild)!==null;)g=m,m=T;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(T=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Od={focusedElem:t,selectionRange:n},kl=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var N=I.memoizedProps,A=I.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?N:tn(e.type,N),A);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(b){De(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return I=Cg,Cg=!1,I}function io(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xd(e,n,i)}s=s.next}while(s!==r)}}function xu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function l0(t){var e=t.alternate;e!==null&&(t.alternate=null,l0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[So],delete e[Md],delete e[Fx],delete e[Bx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function u0(t){return t.tag===5||t.tag===3||t.tag===4}function Ng(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||u0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bl));else if(r!==4&&(t=t.child,t!==null))for(Zd(t,e,n),t=t.sibling;t!==null;)Zd(t,e,n),t=t.sibling}function eh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(eh(t,e,n),t=t.sibling;t!==null;)eh(t,e,n),t=t.sibling}var Je=null,nn=!1;function Zn(t,e,n){for(n=n.child;n!==null;)c0(t,e,n),n=n.sibling}function c0(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(gu,n)}catch{}switch(n.tag){case 5:pt||Os(n,e);case 6:var r=Je,s=nn;Je=null,Zn(t,e,n),Je=r,nn=s,Je!==null&&(nn?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(nn?(t=Je,n=n.stateNode,t.nodeType===8?$c(t.parentNode,n):t.nodeType===1&&$c(t,n),wo(t)):$c(Je,n.stateNode));break;case 4:r=Je,s=nn,Je=n.stateNode.containerInfo,nn=!0,Zn(t,e,n),Je=r,nn=s;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Xd(n,e,o),s=s.next}while(s!==r)}Zn(t,e,n);break;case 1:if(!pt&&(Os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,e,l)}Zn(t,e,n);break;case 21:Zn(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,Zn(t,e,n),pt=r):Zn(t,e,n);break;default:Zn(t,e,n)}}function Pg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rS),e.forEach(function(r){var s=fS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function en(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,nn=!1;break e;case 3:Je=l.stateNode.containerInfo,nn=!0;break e;case 4:Je=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(Je===null)throw Error(F(160));c0(i,o,s),Je=null,nn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){De(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d0(e,t),e=e.sibling}function d0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),dn(t),r&4){try{io(3,t,t.return),xu(3,t)}catch(N){De(t,t.return,N)}try{io(5,t,t.return)}catch(N){De(t,t.return,N)}}break;case 1:en(e,t),dn(t),r&512&&n!==null&&Os(n,n.return);break;case 5:if(en(e,t),dn(t),r&512&&n!==null&&Os(n,n.return),t.flags&32){var s=t.stateNode;try{go(s,"")}catch(N){De(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&jv(s,i),xd(l,o);var d=xd(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Mv(s,m):f==="dangerouslySetInnerHTML"?Lv(s,m):f==="children"?go(s,m):Mh(s,f,m,d)}switch(l){case"input":_d(s,i);break;case"textarea":bv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?Vs(s,!!i.multiple,T,!1):g!==!!i.multiple&&(i.defaultValue!=null?Vs(s,!!i.multiple,i.defaultValue,!0):Vs(s,!!i.multiple,i.multiple?[]:"",!1))}s[So]=i}catch(N){De(t,t.return,N)}}break;case 6:if(en(e,t),dn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){De(t,t.return,N)}}break;case 3:if(en(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wo(e.containerInfo)}catch(N){De(t,t.return,N)}break;case 4:en(e,t),dn(t);break;case 13:en(e,t),dn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vf=be())),r&4&&Pg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(d=pt)||f,en(e,t),pt=d):en(e,t),dn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(m=W=f;W!==null;){switch(g=W,T=g.child,g.tag){case 0:case 11:case 14:case 15:io(4,g,g.return);break;case 1:Os(g,g.return);var I=g.stateNode;if(typeof I.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(N){De(r,n,N)}}break;case 5:Os(g,g.return);break;case 22:if(g.memoizedState!==null){Dg(m);continue}}T!==null?(T.return=g,W=T):Dg(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Vv("display",o))}catch(N){De(t,t.return,N)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){De(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:en(e,t),dn(t),r&4&&Pg(t);break;case 21:break;default:en(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(u0(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(go(s,""),r.flags&=-33);var i=Ng(t);eh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ng(t);Zd(t,l,o);break;default:throw Error(F(161))}}catch(u){De(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iS(t,e,n){W=t,h0(t)}function h0(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ga;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||pt;l=Ga;var d=pt;if(Ga=o,(pt=u)&&!d)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?jg(s):u!==null?(u.return=o,W=u):jg(s);for(;i!==null;)W=i,h0(i),i=i.sibling;W=s,Ga=l,pt=d}kg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):kg(t)}}function kg(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||xu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&mg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&wo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}pt||e.flags&512&&Jd(e)}catch(g){De(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Dg(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function jg(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xu(4,e)}catch(u){De(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){De(e,s,u)}}var i=e.return;try{Jd(e)}catch(u){De(e,i,u)}break;case 5:var o=e.return;try{Jd(e)}catch(u){De(e,o,u)}}}catch(u){De(e,e.return,u)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var oS=Math.ceil,ql=Qn.ReactCurrentDispatcher,gf=Qn.ReactCurrentOwner,Qt=Qn.ReactCurrentBatchConfig,le=0,Ke=null,Le=null,nt=0,Lt=0,Ls=jr(0),ze=0,ko=null,rs=0,Su=0,yf=0,oo=null,Rt=null,vf=0,Zs=1/0,Nn=null,Wl=!1,th=null,yr=null,Ka=!1,ur=null,Gl=0,ao=0,nh=null,hl=-1,fl=0;function Tt(){return le&6?be():hl!==-1?hl:hl=be()}function vr(t){return t.mode&1?le&2&&nt!==0?nt&-nt:$x.transition!==null?(fl===0&&(fl=Yv()),fl):(t=he,t!==0||(t=window.event,t=t===void 0?16:r_(t.type)),t):1}function an(t,e,n,r){if(50<ao)throw ao=0,nh=null,Error(F(185));qo(t,n,r),(!(le&2)||t!==Ke)&&(t===Ke&&(!(le&2)&&(Su|=n),ze===4&&sr(t,nt)),Dt(t,r),n===1&&le===0&&!(e.mode&1)&&(Zs=be()+500,Eu&&br()))}function Dt(t,e){var n=t.callbackNode;$T(t,e);var r=Pl(t,t===Ke?nt:0);if(r===0)n!==null&&zm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zm(n),e===1)t.tag===0?zx(bg.bind(null,t)):I_(bg.bind(null,t)),Mx(function(){!(le&6)&&br()}),n=null;else{switch(Xv(r)){case 1:n=$h;break;case 4:n=Kv;break;case 16:n=Nl;break;case 536870912:n=Qv;break;default:n=Nl}n=w0(n,f0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function f0(t,e){if(hl=-1,fl=0,le&6)throw Error(F(327));var n=t.callbackNode;if(zs()&&t.callbackNode!==n)return null;var r=Pl(t,t===Ke?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kl(t,r);else{e=r;var s=le;le|=2;var i=m0();(Ke!==t||nt!==e)&&(Nn=null,Zs=be()+500,Qr(t,e));do try{uS();break}catch(l){p0(t,l)}while(!0);nf(),ql.current=i,le=s,Le!==null?e=0:(Ke=null,nt=0,e=ze)}if(e!==0){if(e===2&&(s=Nd(t),s!==0&&(r=s,e=rh(t,s))),e===1)throw n=ko,Qr(t,0),sr(t,r),Dt(t,be()),n;if(e===6)sr(t,r);else{if(s=t.current.alternate,!(r&30)&&!aS(s)&&(e=Kl(t,r),e===2&&(i=Nd(t),i!==0&&(r=i,e=rh(t,i))),e===1))throw n=ko,Qr(t,0),sr(t,r),Dt(t,be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:zr(t,Rt,Nn);break;case 3:if(sr(t,r),(r&130023424)===r&&(e=vf+500-be(),10<e)){if(Pl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Vd(zr.bind(null,t,Rt,Nn),e);break}zr(t,Rt,Nn);break;case 4:if(sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-on(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oS(r/1960))-r,10<r){t.timeoutHandle=Vd(zr.bind(null,t,Rt,Nn),r);break}zr(t,Rt,Nn);break;case 5:zr(t,Rt,Nn);break;default:throw Error(F(329))}}}return Dt(t,be()),t.callbackNode===n?f0.bind(null,t):null}function rh(t,e){var n=oo;return t.current.memoizedState.isDehydrated&&(Qr(t,e).flags|=256),t=Kl(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&sh(e)),t}function sh(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function aS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!un(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~yf,e&=~Su,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-on(e),r=1<<n;t[n]=-1,e&=~r}}function bg(t){if(le&6)throw Error(F(327));zs();var e=Pl(t,0);if(!(e&1))return Dt(t,be()),null;var n=Kl(t,e);if(t.tag!==0&&n===2){var r=Nd(t);r!==0&&(e=r,n=rh(t,r))}if(n===1)throw n=ko,Qr(t,0),sr(t,e),Dt(t,be()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zr(t,Rt,Nn),Dt(t,be()),null}function _f(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Zs=be()+500,Eu&&br())}}function ss(t){ur!==null&&ur.tag===0&&!(le&6)&&zs();var e=le;le|=1;var n=Qt.transition,r=he;try{if(Qt.transition=null,he=1,t)return t()}finally{he=r,Qt.transition=n,le=e,!(le&6)&&br()}}function wf(){Lt=Ls.current,Ie(Ls)}function Qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Vx(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(Zh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ol();break;case 3:Xs(),Ie(Pt),Ie(gt),uf();break;case 5:lf(r);break;case 4:Xs();break;case 13:Ie(Ae);break;case 19:Ie(Ae);break;case 10:rf(r.type._context);break;case 22:case 23:wf()}n=n.return}if(Ke=t,Le=t=_r(t.current,null),nt=Lt=e,ze=0,ko=null,yf=Su=rs=0,Rt=oo=null,qr!==null){for(e=0;e<qr.length;e++)if(n=qr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}qr=null}return t}function p0(t,e){do{var n=Le;try{if(nf(),ul.current=Hl,$l){for(var r=Ce.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$l=!1}if(ns=0,Ge=Fe=Ce=null,so=!1,Co=0,gf.current=null,n===null||n.return===null){ze=1,ko=e,Le=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=nt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=Eg(o);if(T!==null){T.flags&=-257,Ig(T,o,l,i,e),T.mode&1&&wg(i,d,e),e=T,u=d;var I=e.updateQueue;if(I===null){var N=new Set;N.add(u),e.updateQueue=N}else I.add(u);break e}else{if(!(e&1)){wg(i,d,e),Ef();break e}u=Error(F(426))}}else if(Te&&l.mode&1){var A=Eg(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Ig(A,o,l,i,e),ef(Js(u,l));break e}}i=u=Js(u,l),ze!==4&&(ze=2),oo===null?oo=[i]:oo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=X_(i,u,e);pg(i,E);break e;case 1:l=u;var _=i.type,R=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(yr===null||!yr.has(R)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=J_(i,l,e);pg(i,b);break e}}i=i.return}while(i!==null)}y0(n)}catch(L){e=L,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function m0(){var t=ql.current;return ql.current=Hl,t===null?Hl:t}function Ef(){(ze===0||ze===3||ze===2)&&(ze=4),Ke===null||!(rs&268435455)&&!(Su&268435455)||sr(Ke,nt)}function Kl(t,e){var n=le;le|=2;var r=m0();(Ke!==t||nt!==e)&&(Nn=null,Qr(t,e));do try{lS();break}catch(s){p0(t,s)}while(!0);if(nf(),le=n,ql.current=r,Le!==null)throw Error(F(261));return Ke=null,nt=0,ze}function lS(){for(;Le!==null;)g0(Le)}function uS(){for(;Le!==null&&!bT();)g0(Le)}function g0(t){var e=_0(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?y0(t):Le=e,gf.current=null}function y0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nS(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Le=null;return}}else if(n=tS(n,e,Lt),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);ze===0&&(ze=5)}function zr(t,e,n){var r=he,s=Qt.transition;try{Qt.transition=null,he=1,cS(t,e,n,r)}finally{Qt.transition=s,he=r}return null}function cS(t,e,n,r){do zs();while(ur!==null);if(le&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(HT(t,i),t===Ke&&(Le=Ke=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ka||(Ka=!0,w0(Nl,function(){return zs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=he;he=1;var l=le;le|=4,gf.current=null,sS(t,n),d0(n,t),Px(Od),kl=!!bd,Od=bd=null,t.current=n,iS(n),OT(),le=l,he=o,Qt.transition=i}else t.current=n;if(Ka&&(Ka=!1,ur=t,Gl=s),i=t.pendingLanes,i===0&&(yr=null),MT(n.stateNode),Dt(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,t=th,th=null,t;return Gl&1&&t.tag!==0&&zs(),i=t.pendingLanes,i&1?t===nh?ao++:(ao=0,nh=t):ao=0,br(),null}function zs(){if(ur!==null){var t=Xv(Gl),e=Qt.transition,n=he;try{if(Qt.transition=null,he=16>t?16:t,ur===null)var r=!1;else{if(t=ur,ur=null,Gl=0,le&6)throw Error(F(331));var s=le;for(le|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(W=d;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:io(8,f,i)}var m=f.child;if(m!==null)m.return=f,W=m;else for(;W!==null;){f=W;var g=f.sibling,T=f.return;if(l0(f),f===d){W=null;break}if(g!==null){g.return=T,W=g;break}W=T}}}var I=i.alternate;if(I!==null){var N=I.child;if(N!==null){I.child=null;do{var A=N.sibling;N.sibling=null,N=A}while(N!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:io(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,W=E;break e}W=i.return}}var _=t.current;for(W=_;W!==null;){o=W;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,W=R;else e:for(o=_;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xu(9,l)}}catch(L){De(l,l.return,L)}if(l===o){W=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,W=b;break e}W=l.return}}if(le=s,br(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{he=n,Qt.transition=e}}return!1}function Og(t,e,n){e=Js(n,e),e=X_(t,e,1),t=gr(t,e,1),e=Tt(),t!==null&&(qo(t,1,e),Dt(t,e))}function De(t,e,n){if(t.tag===3)Og(t,t,n);else for(;e!==null;){if(e.tag===3){Og(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yr===null||!yr.has(r))){t=Js(n,t),t=J_(e,t,1),e=gr(e,t,1),t=Tt(),e!==null&&(qo(e,1,t),Dt(e,t));break}}e=e.return}}function dS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(nt&n)===n&&(ze===4||ze===3&&(nt&130023424)===nt&&500>be()-vf?Qr(t,0):yf|=n),Dt(t,e)}function v0(t,e){e===0&&(t.mode&1?(e=Ma,Ma<<=1,!(Ma&130023424)&&(Ma=4194304)):e=1);var n=Tt();t=zn(t,e),t!==null&&(qo(t,e,n),Dt(t,n))}function hS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),v0(t,n)}function fS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),v0(t,n)}var _0;_0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pt.current)Nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nt=!1,eS(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,Te&&e.flags&1048576&&T_(e,Ml,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dl(t,e),t=e.pendingProps;var s=Ks(e,gt.current);Bs(e,n),s=df(null,e,r,t,s,n);var i=hf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kt(r)?(i=!0,Ll(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,of(e),s.updater=Tu,e.stateNode=s,s._reactInternals=e,Hd(e,r,t,n),e=Gd(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&Jh(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=mS(r),t=tn(r,t),s){case 0:e=Wd(null,e,r,t,n);break e;case 1:e=Sg(null,e,r,t,n);break e;case 11:e=Tg(null,e,r,t,n);break e;case 14:e=xg(null,e,r,tn(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Wd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Sg(t,e,r,s,n);case 3:e:{if(n0(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,N_(t,e),Bl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Js(Error(F(423)),e),e=Ag(t,e,r,n,s);break e}else if(r!==s){s=Js(Error(F(424)),e),e=Ag(t,e,r,n,s);break e}else for(Vt=mr(e.stateNode.containerInfo.firstChild),Ut=e,Te=!0,rn=null,n=R_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===s){e=$n(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return P_(e),t===null&&Bd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ld(r,s)?o=null:i!==null&&Ld(r,i)&&(e.flags|=32),t0(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&Bd(e),null;case 13:return r0(t,e,n);case 4:return af(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ys(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Tg(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ye(Ul,r._currentValue),r._currentValue=o,i!==null)if(un(i.value,o)){if(i.children===s.children&&!Pt.current){e=$n(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Mn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),zd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),zd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bs(e,n),s=Yt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=tn(r,e.pendingProps),s=tn(r.type,s),xg(t,e,r,s,n);case 15:return Z_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),dl(t,e),e.tag=1,kt(r)?(t=!0,Ll(e)):t=!1,Bs(e,n),Y_(e,r,s),Hd(e,r,s,n),Gd(null,e,r,!0,t,n);case 19:return s0(t,e,n);case 22:return e0(t,e,n)}throw Error(F(156,e.tag))};function w0(t,e){return Gv(t,e)}function pS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,r){return new pS(t,e,n,r)}function If(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mS(t){if(typeof t=="function")return If(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fh)return 11;if(t===Bh)return 14}return 2}function _r(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")If(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case As:return Yr(n.children,s,i,e);case Uh:o=8,s|=8;break;case pd:return t=Gt(12,n,e,s|2),t.elementType=pd,t.lanes=i,t;case md:return t=Gt(13,n,e,s),t.elementType=md,t.lanes=i,t;case gd:return t=Gt(19,n,e,s),t.elementType=gd,t.lanes=i,t;case Pv:return Au(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cv:o=10;break e;case Nv:o=9;break e;case Fh:o=11;break e;case Bh:o=14;break e;case tr:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Gt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Yr(t,e,n,r){return t=Gt(7,t,r,e),t.lanes=n,t}function Au(t,e,n,r){return t=Gt(22,t,r,e),t.elementType=Pv,t.lanes=n,t.stateNode={isHidden:!1},t}function Xc(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function Jc(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dc(0),this.expirationTimes=Dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Tf(t,e,n,r,s,i,o,l,u){return t=new gS(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},of(i),t}function yS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ss,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function E0(t){if(!t)return xr;t=t._reactInternals;e:{if(ds(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(kt(n))return E_(t,n,e)}return e}function I0(t,e,n,r,s,i,o,l,u){return t=Tf(n,r,!0,t,s,i,o,l,u),t.context=E0(null),n=t.current,r=Tt(),s=vr(n),i=Mn(r,s),i.callback=e??null,gr(n,i,s),t.current.lanes=s,qo(t,s,r),Dt(t,r),t}function Ru(t,e,n,r){var s=e.current,i=Tt(),o=vr(s);return n=E0(n),e.context===null?e.context=n:e.pendingContext=n,e=Mn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gr(s,e,o),t!==null&&(an(t,s,o,i),ll(t,s,o)),o}function Ql(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xf(t,e){Lg(t,e),(t=t.alternate)&&Lg(t,e)}function vS(){return null}var T0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sf(t){this._internalRoot=t}Cu.prototype.render=Sf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Ru(t,e,null,null)};Cu.prototype.unmount=Sf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){Ru(null,t,null,null)}),e[Bn]=null}};function Cu(t){this._internalRoot=t}Cu.prototype.unstable_scheduleHydration=function(t){if(t){var e=e_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&n_(t)}};function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vg(){}function _S(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ql(o);i.call(d)}}var o=I0(e,r,t,0,null,!1,!1,"",Vg);return t._reactRootContainer=o,t[Bn]=o.current,To(t.nodeType===8?t.parentNode:t),ss(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ql(u);l.call(d)}}var u=Tf(t,0,!1,null,null,!1,!1,"",Vg);return t._reactRootContainer=u,t[Bn]=u.current,To(t.nodeType===8?t.parentNode:t),ss(function(){Ru(e,u,n,r)}),u}function Pu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Ql(o);l.call(u)}}Ru(e,o,t,s)}else o=_S(n,e,t,s,r);return Ql(o)}Jv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gi(e.pendingLanes);n!==0&&(Hh(e,n|1),Dt(e,be()),!(le&6)&&(Zs=be()+500,br()))}break;case 13:ss(function(){var r=zn(t,1);if(r!==null){var s=Tt();an(r,t,1,s)}}),xf(t,1)}};qh=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=Tt();an(e,t,134217728,n)}xf(t,134217728)}};Zv=function(t){if(t.tag===13){var e=vr(t),n=zn(t,e);if(n!==null){var r=Tt();an(n,t,e,r)}xf(t,e)}};e_=function(){return he};t_=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};Ad=function(t,e,n){switch(e){case"input":if(_d(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wu(r);if(!s)throw Error(F(90));Dv(r),_d(r,s)}}}break;case"textarea":bv(t,n);break;case"select":e=n.value,e!=null&&Vs(t,!!n.multiple,e,!1)}};Bv=_f;zv=ss;var wS={usingClientEntryPoint:!1,Events:[Go,Ps,wu,Uv,Fv,_f]},$i={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ES={bundleType:$i.bundleType,version:$i.version,rendererPackageName:$i.rendererPackageName,rendererConfig:$i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qv(t),t===null?null:t.stateNode},findFiberByHostInstance:$i.findFiberByHostInstance||vS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{gu=Qa.inject(ES),pn=Qa}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wS;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(e))throw Error(F(200));return yS(t,e,null,n)};Bt.createRoot=function(t,e){if(!Af(t))throw Error(F(299));var n=!1,r="",s=T0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Tf(t,1,!1,null,null,n,!1,r,s),t[Bn]=e.current,To(t.nodeType===8?t.parentNode:t),new Sf(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=qv(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return ss(t)};Bt.hydrate=function(t,e,n){if(!Nu(e))throw Error(F(200));return Pu(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Af(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=T0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=I0(e,null,t,1,n??null,s,!1,i,o),t[Bn]=e.current,To(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Cu(e)};Bt.render=function(t,e,n){if(!Nu(e))throw Error(F(200));return Pu(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Nu(t))throw Error(F(40));return t._reactRootContainer?(ss(function(){Pu(null,null,t,!1,function(){t._reactRootContainer=null,t[Bn]=null})}),!0):!1};Bt.unstable_batchedUpdates=_f;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nu(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Pu(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function x0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x0)}catch(t){console.error(t)}}x0(),xv.exports=Bt;var IS=xv.exports,Mg=IS;hd.createRoot=Mg.createRoot,hd.hydrateRoot=Mg.hydrateRoot;var Ug={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},TS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},A0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,T=d&63;u||(T=64,o||(g=64)),r.push(n[f],n[m],n[g],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(S0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new xS;const g=i<<2|l>>4;if(r.push(g),d!==64){const T=l<<4&240|d>>2;if(r.push(T),m!==64){const I=d<<6&192|m;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SS=function(t){const e=S0(t);return A0.encodeByteArray(e,!0)},Yl=function(t){return SS(t).replace(/\./g,"")},R0=function(t){try{return A0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=()=>AS().__FIREBASE_DEFAULTS__,CS=()=>{if(typeof process>"u"||typeof Ug>"u")return;const t=Ug.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&R0(t[1]);return e&&JSON.parse(e)},ku=()=>{try{return RS()||CS()||NS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},C0=t=>{var e,n;return(n=(e=ku())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},N0=t=>{const e=C0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},P0=()=>{var t;return(t=ku())===null||t===void 0?void 0:t.config},k0=t=>{var e;return(e=ku())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Yl(JSON.stringify(n)),Yl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function DS(){var t;const e=(t=ku())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LS(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VS(){return!DS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MS(){try{return typeof indexedDB=="object"}catch{return!1}}function US(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="FirebaseError";class xn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FS,Object.setPrototypeOf(this,xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qo.prototype.create)}}class Qo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?BS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new xn(s,l,r)}}function BS(t,e){return t.replace(zS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zS=/\{\$([^}]+)}/g;function $S(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Fg(i)&&Fg(o)){if(!Xl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Fg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function HS(t,e){const n=new qS(t,e);return n.subscribe.bind(n)}class qS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Zc),s.error===void 0&&(s.error=Zc),s.complete===void 0&&(s.complete=Zc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class Sr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new PS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QS(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KS(t){return t===$r?void 0:t}function QS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const XS={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},JS=oe.INFO,ZS={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},eA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ZS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rf{constructor(e){this.name=e,this._logLevel=JS,this._logHandler=eA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const tA=(t,e)=>e.some(n=>t instanceof n);let Bg,zg;function nA(){return Bg||(Bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rA(){return zg||(zg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j0=new WeakMap,ih=new WeakMap,b0=new WeakMap,ed=new WeakMap,Cf=new WeakMap;function sA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&j0.set(n,t)}).catch(()=>{}),Cf.set(e,t),e}function iA(t){if(ih.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ih.set(t,e)}let oh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ih.get(t);if(e==="objectStoreNames")return t.objectStoreNames||b0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oA(t){oh=t(oh)}function aA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(td(this),e,...n);return b0.set(r,e.sort?e.sort():[e]),wr(r)}:rA().includes(t)?function(...e){return t.apply(td(this),e),wr(j0.get(this))}:function(...e){return wr(t.apply(td(this),e))}}function lA(t){return typeof t=="function"?aA(t):(t instanceof IDBTransaction&&iA(t),tA(t,nA())?new Proxy(t,oh):t)}function wr(t){if(t instanceof IDBRequest)return sA(t);if(ed.has(t))return ed.get(t);const e=lA(t);return e!==t&&(ed.set(t,e),Cf.set(e,t)),e}const td=t=>Cf.get(t);function uA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=wr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(wr(o.result),u.oldVersion,u.newVersion,wr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const cA=["get","getKey","getAll","getAllKeys","count"],dA=["put","add","delete","clear"],nd=new Map;function $g(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nd.get(e))return nd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=dA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||cA.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return nd.set(e,i),i}oA(t=>({...t,get:(e,n,r)=>$g(e,n)||t.get(e,n,r),has:(e,n)=>!!$g(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ah="@firebase/app",Hg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Rf("@firebase/app"),pA="@firebase/app-compat",mA="@firebase/analytics-compat",gA="@firebase/analytics",yA="@firebase/app-check-compat",vA="@firebase/app-check",_A="@firebase/auth",wA="@firebase/auth-compat",EA="@firebase/database",IA="@firebase/data-connect",TA="@firebase/database-compat",xA="@firebase/functions",SA="@firebase/functions-compat",AA="@firebase/installations",RA="@firebase/installations-compat",CA="@firebase/messaging",NA="@firebase/messaging-compat",PA="@firebase/performance",kA="@firebase/performance-compat",DA="@firebase/remote-config",jA="@firebase/remote-config-compat",bA="@firebase/storage",OA="@firebase/storage-compat",LA="@firebase/firestore",VA="@firebase/vertexai-preview",MA="@firebase/firestore-compat",UA="firebase",FA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="[DEFAULT]",BA={[ah]:"fire-core",[pA]:"fire-core-compat",[gA]:"fire-analytics",[mA]:"fire-analytics-compat",[vA]:"fire-app-check",[yA]:"fire-app-check-compat",[_A]:"fire-auth",[wA]:"fire-auth-compat",[EA]:"fire-rtdb",[IA]:"fire-data-connect",[TA]:"fire-rtdb-compat",[xA]:"fire-fn",[SA]:"fire-fn-compat",[AA]:"fire-iid",[RA]:"fire-iid-compat",[CA]:"fire-fcm",[NA]:"fire-fcm-compat",[PA]:"fire-perf",[kA]:"fire-perf-compat",[DA]:"fire-rc",[jA]:"fire-rc-compat",[bA]:"fire-gcs",[OA]:"fire-gcs-compat",[LA]:"fire-fst",[MA]:"fire-fst-compat",[VA]:"fire-vertex","fire-js":"fire-js",[UA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Map,zA=new Map,uh=new Map;function qg(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function is(t){const e=t.name;if(uh.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;uh.set(e,t);for(const n of Jl.values())qg(n,t);for(const n of zA.values())qg(n,t);return!0}function Du(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new Qo("app","Firebase",$A);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=FA;function O0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Er.create("bad-app-name",{appName:String(s)});if(n||(n=P0()),!n)throw Er.create("no-options");const i=Jl.get(s);if(i){if(Xl(n,i.options)&&Xl(r,i.config))return i;throw Er.create("duplicate-app",{appName:s})}const o=new YS(s);for(const u of uh.values())o.addComponent(u);const l=new HA(n,r,o);return Jl.set(s,l),l}function Nf(t=lh){const e=Jl.get(t);if(!e&&t===lh&&P0())return O0();if(!e)throw Er.create("no-app",{appName:t});return e}function gn(t,e,n){var r;let s=(r=BA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(l.join(" "));return}is(new Sr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firebase-heartbeat-database",WA=1,Do="firebase-heartbeat-store";let rd=null;function L0(){return rd||(rd=uA(qA,WA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Do)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),rd}async function GA(t){try{const n=(await L0()).transaction(Do),r=await n.objectStore(Do).get(V0(t));return await n.done,r}catch(e){if(e instanceof xn)Hn.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hn.warn(n.message)}}}async function Wg(t,e){try{const r=(await L0()).transaction(Do,"readwrite");await r.objectStore(Do).put(e,V0(t)),await r.done}catch(n){if(n instanceof xn)Hn.warn(n.message);else{const r=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hn.warn(r.message)}}}function V0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=1024,QA=30*24*60*60*1e3;class YA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=QA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Hn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gg(),{heartbeatsToSend:r,unsentEntries:s}=XA(this._heartbeatsCache.heartbeats),i=Yl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hn.warn(n),""}}}function Gg(){return new Date().toISOString().substring(0,10)}function XA(t,e=KA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Kg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Kg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MS()?US().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Wg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Wg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Kg(t){return Yl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){is(new Sr("platform-logger",e=>new hA(e),"PRIVATE")),is(new Sr("heartbeat",e=>new YA(e),"PRIVATE")),gn(ah,Hg,t),gn(ah,Hg,"esm2017"),gn("fire-js","")}ZA("");var eR="firebase",tR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn(eR,tR,"app");function Pf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function M0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nR=M0,U0=new Qo("auth","Firebase",M0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=new Rf("@firebase/auth");function rR(t,...e){Zl.logLevel<=oe.WARN&&Zl.warn(`Auth (${hs}): ${t}`,...e)}function ml(t,...e){Zl.logLevel<=oe.ERROR&&Zl.error(`Auth (${hs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,...e){throw Df(t,...e)}function ln(t,...e){return Df(t,...e)}function kf(t,e,n){const r=Object.assign(Object.assign({},nR()),{[e]:n});return new Qo("auth","Firebase",r).create(e,{appName:t.name})}function Xr(t){return kf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&En(t,"argument-error"),kf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Df(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return U0.create(t,...e)}function Z(t,e,...n){if(!t)throw Df(e,...n)}function On(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ml(e),new Error(e)}function qn(t,e){t||On(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iR(){return Qg()==="http:"||Qg()==="https:"}function Qg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iR()||bS()||"connection"in navigator)?navigator.onLine:!0}function aR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=kS()||OS()}get(){return oR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;On("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;On("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;On("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Xo(3e4,6e4);function bf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fi(t,e,n,r,s={}){return B0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Yo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return jS()||(d.referrerPolicy="no-referrer"),F0.fetch()(z0(t,t.config.apiHost,n,l),d)})}async function B0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lR),e);try{const s=new dR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ya(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ya(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ya(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ya(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw kf(t,f,d);En(t,f)}}catch(s){if(s instanceof xn)throw s;En(t,"network-request-failed",{message:String(s)})}}async function cR(t,e,n,r,s={}){const i=await fi(t,e,n,r,s);return"mfaPendingCredential"in i&&En(t,"multi-factor-auth-required",{_serverResponse:i}),i}function z0(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?jf(t.config,s):`${t.config.apiScheme}://${s}`}class dR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ln(this.auth,"network-request-failed")),uR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ya(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ln(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(t,e){return fi(t,"POST","/v1/accounts:delete",e)}async function $0(t,e){return fi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fR(t,e=!1){const n=Qe(t),r=await n.getIdToken(e),s=Of(r);Z(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:lo(sd(s.auth_time)),issuedAtTime:lo(sd(s.iat)),expirationTime:lo(sd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function sd(t){return Number(t)*1e3}function Of(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ml("JWT malformed, contained fewer than 3 sections"),null;try{const s=R0(n);return s?JSON.parse(s):(ml("Failed to decode base64 JWT payload"),null)}catch(s){return ml("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Yg(t){const e=Of(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof xn&&pR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await jo(t,$0(n,{idToken:r}));Z(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?H0(i.providerUserInfo):[],l=yR(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new dh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function gR(t){const e=Qe(t);await eu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function H0(t){return t.map(e=>{var{providerId:n}=e,r=Pf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(t,e){const n=await B0(t,{},async()=>{const r=Yo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=z0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",F0.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _R(t,e){return fi(t,"POST","/v2/accounts:revokeToken",bf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=Yg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await vR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $s;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Z(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Z(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $s,this.toJSON())}_performRefresh(){return On("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ln{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Pf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new dh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await jo(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fR(this,e)}reload(){return gR(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ln(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await eu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await jo(this,hR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,T=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,A=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:R,emailVerified:b,isAnonymous:L,providerData:M,stsTokenManager:x}=n;Z(R&&x,e,"internal-error");const w=$s.fromJSON(this.name,x);Z(typeof R=="string",e,"internal-error"),er(m,e.name),er(g,e.name),Z(typeof b=="boolean",e,"internal-error"),Z(typeof L=="boolean",e,"internal-error"),er(T,e.name),er(I,e.name),er(N,e.name),er(A,e.name),er(E,e.name),er(_,e.name);const S=new Ln({uid:R,auth:e,email:g,emailVerified:b,displayName:m,isAnonymous:L,photoURL:I,phoneNumber:T,tenantId:N,stsTokenManager:w,createdAt:E,lastLoginAt:_});return M&&Array.isArray(M)&&(S.providerData=M.map(C=>Object.assign({},C))),A&&(S._redirectEventId=A),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new $s;s.updateFromServerResponse(n);const i=new Ln({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await eu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Z(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?H0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new $s;l.updateFromIdToken(r);const u=new Ln({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new dh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Map;function Vn(t){qn(t instanceof Function,"Expected a class definition");let e=Xg.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}q0.type="NONE";const Jg=q0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t,e,n){return`firebase:${t}:${e}:${n}`}class Hs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=gl(this.userKey,s.apiKey,i),this.fullPersistenceKey=gl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ln._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hs(Vn(Jg),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Vn(Jg);const o=gl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const m=Ln._fromJSON(e,f);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Hs(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Hs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(W0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X0(e))return"Blackberry";if(J0(e))return"Webos";if(G0(e))return"Safari";if((e.includes("chrome/")||K0(e))&&!e.includes("edge/"))return"Chrome";if(Y0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function W0(t=yt()){return/firefox\//i.test(t)}function G0(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K0(t=yt()){return/crios\//i.test(t)}function Q0(t=yt()){return/iemobile/i.test(t)}function Y0(t=yt()){return/android/i.test(t)}function X0(t=yt()){return/blackberry/i.test(t)}function J0(t=yt()){return/webos/i.test(t)}function Lf(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wR(t=yt()){var e;return Lf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ER(){return LS()&&document.documentMode===10}function Z0(t=yt()){return Lf(t)||Y0(t)||J0(t)||X0(t)||/windows phone/i.test(t)||Q0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t,e=[]){let n;switch(t){case"Browser":n=Zg(yt());break;case"Worker":n=`${Zg(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(t,e={}){return fi(t,"GET","/v2/passwordPolicy",bf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=6;class SR{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:xR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ey(this),this.idTokenSubscription=new ey(this),this.beforeStateQueue=new IR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Hs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $0(this,{idToken:e}),r=await Ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(bn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await eu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(Xr(this));const n=e?Qe(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TR(this),n=new SR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _R(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vn(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await Hs.create(this,[Vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ew(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ju(t){return Qe(t)}class ey{constructor(e){this.auth=e,this.observer=null,this.addObserver=HS(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RR(t){Vf=t}function CR(t){return Vf.loadJS(t)}function NR(){return Vf.gapiScript}function PR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t,e){const n=Du(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Xl(i,e??{}))return s;En(s,"already-initialized")}return n.initialize({options:e})}function DR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jR(t,e,n){const r=ju(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=tw(e),{host:o,port:l}=bR(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),OR()}function tw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bR(t){const e=tw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ty(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ty(o)}}}function ty(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return On("not implemented")}_getIdTokenResponse(e){return On("not implemented")}_linkToIdToken(e,n){return On("not implemented")}_getReauthenticationResolver(e){return On("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e){return cR(t,"POST","/v1/accounts:signInWithIdp",bf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="http://localhost";class os extends nw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):En("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Pf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new os(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qs(e,n)}buildRequest(){const e={requestUri:LR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends Mf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Jo{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends Jo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:kn.PROVIDER_ID,signInMethod:kn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return kn.credentialFromTaggedObject(e)}static credentialFromError(e){return kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return kn.credential(n,r)}catch{return null}}}kn.GOOGLE_SIGN_IN_METHOD="google.com";kn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends Jo{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Jo{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ln._fromIdTokenResponse(e,r,s),o=ny(r);return new ei({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ny(r);return new ei({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ny(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends xn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,tu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new tu(e,n,r,s)}}function rw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?tu._fromErrorAndOperation(t,i,e,r):i})}async function VR(t,e,n=!1){const r=await jo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ei._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e,n=!1){const{auth:r}=t;if(bn(r.app))return Promise.reject(Xr(r));const s="reauthenticate";try{const i=await jo(t,rw(r,s,e,t),n);Z(i.idToken,r,"internal-error");const o=Of(i.idToken);Z(o,r,"internal-error");const{sub:l}=o;return Z(t.uid===l,r,"user-mismatch"),ei._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&En(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(t,e,n=!1){if(bn(t.app))return Promise.reject(Xr(t));const r="signIn",s=await rw(t,r,e),i=await ei._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function FR(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function BR(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function zR(t,e,n,r){return Qe(t).onAuthStateChanged(e,n,r)}function $R(t){return Qe(t).signOut()}const nu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nu,"1"),this.storage.removeItem(nu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=1e3,qR=10;class iw extends sw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);ER()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},HR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iw.type="LOCAL";const WR=iw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow extends sw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ow.type="SESSION";const aw=ow;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new bu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await GR(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=Uf("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return window}function QR(t){yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}async function YR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function JR(){return lw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="firebaseLocalStorageDb",ZR=1,ru="firebaseLocalStorage",cw="fbase_key";class Zo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ou(t,e){return t.transaction([ru],e?"readwrite":"readonly").objectStore(ru)}function eC(){const t=indexedDB.deleteDatabase(uw);return new Zo(t).toPromise()}function hh(){const t=indexedDB.open(uw,ZR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ru,{keyPath:cw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ru)?e(r):(r.close(),await eC(),e(await hh()))})})}async function ry(t,e,n){const r=Ou(t,!0).put({[cw]:e,value:n});return new Zo(r).toPromise()}async function tC(t,e){const n=Ou(t,!1).get(e),r=await new Zo(n).toPromise();return r===void 0?null:r.value}function sy(t,e){const n=Ou(t,!0).delete(e);return new Zo(n).toPromise()}const nC=800,rC=3;class dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bu._getInstance(JR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await YR(),!this.activeServiceWorker)return;this.sender=new KR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hh();return await ry(e,nu,"1"),await sy(e,nu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ry(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ou(s,!1).getAll();return new Zo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dw.type="LOCAL";const sC=dw;new Xo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t,e){return e?Vn(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends nw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iC(t){return UR(t.auth,new Ff(t),t.bypassAuthState)}function oC(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),MR(n,new Ff(t),t.bypassAuthState)}async function aC(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),VR(n,new Ff(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iC;case"linkViaPopup":case"linkViaRedirect":return aC;case"reauthViaPopup":case"reauthViaRedirect":return oC;default:En(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new Xo(2e3,1e4);async function uC(t,e,n){if(bn(t.app))return Promise.reject(ln(t,"operation-not-supported-in-this-environment"));const r=ju(t);sR(t,e,Mf);const s=hw(r,n);return new Gr(r,"signInViaPopup",e,s).executeNotNull()}class Gr extends fw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Gr.currentPopupAction&&Gr.currentPopupAction.cancel(),Gr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=Uf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lC.get())};e()}}Gr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="pendingRedirect",yl=new Map;class dC extends fw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yl.get(this.auth._key());if(!e){try{const r=await hC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yl.set(this.auth._key(),e)}return this.bypassAuthState||yl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hC(t,e){const n=mC(e),r=pC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fC(t,e){yl.set(t._key(),e)}function pC(t){return Vn(t._redirectPersistence)}function mC(t){return gl(cC,t.config.apiKey,t.name)}async function gC(t,e,n=!1){if(bn(t.app))return Promise.reject(Xr(t));const r=ju(t),s=hw(r,e),o=await new dC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=10*60*1e3;class vC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_C(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ln(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yC&&this.cachedEventUids.clear(),this.cachedEventUids.has(iy(e))}saveEventToCache(e){this.cachedEventUids.add(iy(e)),this.lastProcessedEventTime=Date.now()}}function iy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _C(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wC(t,e={}){return fi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IC=/^https?/;async function TC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wC(t);for(const n of e)try{if(xC(n))return}catch{}En(t,"unauthorized-domain")}function xC(t){const e=ch(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IC.test(n))return!1;if(EC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new Xo(3e4,6e4);function oy(){const t=yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AC(t){return new Promise((e,n)=>{var r,s,i;function o(){oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oy(),n(ln(t,"network-request-failed"))},timeout:SC.get()})}if(!((s=(r=yn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=yn().gapi)===null||i===void 0)&&i.load)o();else{const l=PR("iframefcb");return yn()[l]=()=>{gapi.load?o():n(ln(t,"network-request-failed"))},CR(`${NR()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw vl=null,e})}let vl=null;function RC(t){return vl=vl||AC(t),vl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new Xo(5e3,15e3),NC="__/auth/iframe",PC="emulator/auth/iframe",kC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jC(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jf(e,PC):`https://${t.config.authDomain}/${NC}`,r={apiKey:e.apiKey,appName:t.name,v:hs},s=DC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Yo(r).slice(1)}`}async function bC(t){const e=await RC(t),n=yn().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:jC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ln(t,"network-request-failed"),l=yn().setTimeout(()=>{i(o)},CC.get());function u(){yn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LC=500,VC=600,MC="_blank",UC="http://localhost";class ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FC(t,e,n,r=LC,s=VC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},OC),{width:r.toString(),height:s.toString(),top:i,left:o}),d=yt().toLowerCase();n&&(l=K0(d)?MC:n),W0(d)&&(e=e||UC,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[T,I])=>`${g}${T}=${I},`,"");if(wR(d)&&l!=="_self")return BC(e||"",l),new ay(null);const m=window.open(e||"",l,f);Z(m,t,"popup-blocked");try{m.focus()}catch{}return new ay(m)}function BC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="__/auth/handler",$C="emulator/auth/handler",HC=encodeURIComponent("fac");async function ly(t,e,n,r,s,i){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hs,eventId:s};if(e instanceof Mf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$S(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Jo){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${HC}=${encodeURIComponent(u)}`:"";return`${qC(t)}?${Yo(l).slice(1)}${d}`}function qC({config:t}){return t.emulator?jf(t,$C):`https://${t.authDomain}/${zC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="webStorageSupport";class WC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aw,this._completeRedirectFn=gC,this._overrideRedirectResult=fC}async _openPopup(e,n,r,s){var i;qn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await ly(e,n,r,ch(),s);return FC(e,o,Uf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ly(e,n,r,ch(),s);return QR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bC(e),r=new vC(e);return n.register("authEvent",s=>(Z(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(id,{type:id},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[id];o!==void 0&&n(!!o),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Z0()||G0()||Lf()}}const GC=WC;var uy="@firebase/auth",cy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YC(t){is(new Sr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ew(t)},d=new AR(r,s,i,u);return DR(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),is(new Sr("auth-internal",e=>{const n=ju(e.getProvider("auth").getImmediate());return(r=>new KC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gn(uy,cy,QC(t)),gn(uy,cy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=5*60,JC=k0("authIdTokenMaxAge")||XC;let dy=null;const ZC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JC)return;const s=n==null?void 0:n.token;dy!==s&&(dy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eN(t=Nf()){const e=Du(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kR(t,{popupRedirectResolver:GC,persistence:[sC,WR,aw]}),r=k0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=ZC(i.toString());BR(n,o,()=>o(n.currentUser)),FR(n,l=>o(l))}}const s=C0("auth");return s&&jR(n,`http://${s}`),n}function tN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ln("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",tN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YC("Browser");var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,mw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function S(){}S.prototype=w.prototype,x.D=w.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(C,k,P){for(var v=Array(arguments.length-2),te=2;te<arguments.length;te++)v[te-2]=arguments[te];return w.prototype[k].apply(C,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,w,S){S||(S=0);var C=Array(16);if(typeof w=="string")for(var k=0;16>k;++k)C[k]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(k=0;16>k;++k)C[k]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=x.g[0],S=x.g[1],k=x.g[2];var P=x.g[3],v=w+(P^S&(k^P))+C[0]+3614090360&4294967295;w=S+(v<<7&4294967295|v>>>25),v=P+(k^w&(S^k))+C[1]+3905402710&4294967295,P=w+(v<<12&4294967295|v>>>20),v=k+(S^P&(w^S))+C[2]+606105819&4294967295,k=P+(v<<17&4294967295|v>>>15),v=S+(w^k&(P^w))+C[3]+3250441966&4294967295,S=k+(v<<22&4294967295|v>>>10),v=w+(P^S&(k^P))+C[4]+4118548399&4294967295,w=S+(v<<7&4294967295|v>>>25),v=P+(k^w&(S^k))+C[5]+1200080426&4294967295,P=w+(v<<12&4294967295|v>>>20),v=k+(S^P&(w^S))+C[6]+2821735955&4294967295,k=P+(v<<17&4294967295|v>>>15),v=S+(w^k&(P^w))+C[7]+4249261313&4294967295,S=k+(v<<22&4294967295|v>>>10),v=w+(P^S&(k^P))+C[8]+1770035416&4294967295,w=S+(v<<7&4294967295|v>>>25),v=P+(k^w&(S^k))+C[9]+2336552879&4294967295,P=w+(v<<12&4294967295|v>>>20),v=k+(S^P&(w^S))+C[10]+4294925233&4294967295,k=P+(v<<17&4294967295|v>>>15),v=S+(w^k&(P^w))+C[11]+2304563134&4294967295,S=k+(v<<22&4294967295|v>>>10),v=w+(P^S&(k^P))+C[12]+1804603682&4294967295,w=S+(v<<7&4294967295|v>>>25),v=P+(k^w&(S^k))+C[13]+4254626195&4294967295,P=w+(v<<12&4294967295|v>>>20),v=k+(S^P&(w^S))+C[14]+2792965006&4294967295,k=P+(v<<17&4294967295|v>>>15),v=S+(w^k&(P^w))+C[15]+1236535329&4294967295,S=k+(v<<22&4294967295|v>>>10),v=w+(k^P&(S^k))+C[1]+4129170786&4294967295,w=S+(v<<5&4294967295|v>>>27),v=P+(S^k&(w^S))+C[6]+3225465664&4294967295,P=w+(v<<9&4294967295|v>>>23),v=k+(w^S&(P^w))+C[11]+643717713&4294967295,k=P+(v<<14&4294967295|v>>>18),v=S+(P^w&(k^P))+C[0]+3921069994&4294967295,S=k+(v<<20&4294967295|v>>>12),v=w+(k^P&(S^k))+C[5]+3593408605&4294967295,w=S+(v<<5&4294967295|v>>>27),v=P+(S^k&(w^S))+C[10]+38016083&4294967295,P=w+(v<<9&4294967295|v>>>23),v=k+(w^S&(P^w))+C[15]+3634488961&4294967295,k=P+(v<<14&4294967295|v>>>18),v=S+(P^w&(k^P))+C[4]+3889429448&4294967295,S=k+(v<<20&4294967295|v>>>12),v=w+(k^P&(S^k))+C[9]+568446438&4294967295,w=S+(v<<5&4294967295|v>>>27),v=P+(S^k&(w^S))+C[14]+3275163606&4294967295,P=w+(v<<9&4294967295|v>>>23),v=k+(w^S&(P^w))+C[3]+4107603335&4294967295,k=P+(v<<14&4294967295|v>>>18),v=S+(P^w&(k^P))+C[8]+1163531501&4294967295,S=k+(v<<20&4294967295|v>>>12),v=w+(k^P&(S^k))+C[13]+2850285829&4294967295,w=S+(v<<5&4294967295|v>>>27),v=P+(S^k&(w^S))+C[2]+4243563512&4294967295,P=w+(v<<9&4294967295|v>>>23),v=k+(w^S&(P^w))+C[7]+1735328473&4294967295,k=P+(v<<14&4294967295|v>>>18),v=S+(P^w&(k^P))+C[12]+2368359562&4294967295,S=k+(v<<20&4294967295|v>>>12),v=w+(S^k^P)+C[5]+4294588738&4294967295,w=S+(v<<4&4294967295|v>>>28),v=P+(w^S^k)+C[8]+2272392833&4294967295,P=w+(v<<11&4294967295|v>>>21),v=k+(P^w^S)+C[11]+1839030562&4294967295,k=P+(v<<16&4294967295|v>>>16),v=S+(k^P^w)+C[14]+4259657740&4294967295,S=k+(v<<23&4294967295|v>>>9),v=w+(S^k^P)+C[1]+2763975236&4294967295,w=S+(v<<4&4294967295|v>>>28),v=P+(w^S^k)+C[4]+1272893353&4294967295,P=w+(v<<11&4294967295|v>>>21),v=k+(P^w^S)+C[7]+4139469664&4294967295,k=P+(v<<16&4294967295|v>>>16),v=S+(k^P^w)+C[10]+3200236656&4294967295,S=k+(v<<23&4294967295|v>>>9),v=w+(S^k^P)+C[13]+681279174&4294967295,w=S+(v<<4&4294967295|v>>>28),v=P+(w^S^k)+C[0]+3936430074&4294967295,P=w+(v<<11&4294967295|v>>>21),v=k+(P^w^S)+C[3]+3572445317&4294967295,k=P+(v<<16&4294967295|v>>>16),v=S+(k^P^w)+C[6]+76029189&4294967295,S=k+(v<<23&4294967295|v>>>9),v=w+(S^k^P)+C[9]+3654602809&4294967295,w=S+(v<<4&4294967295|v>>>28),v=P+(w^S^k)+C[12]+3873151461&4294967295,P=w+(v<<11&4294967295|v>>>21),v=k+(P^w^S)+C[15]+530742520&4294967295,k=P+(v<<16&4294967295|v>>>16),v=S+(k^P^w)+C[2]+3299628645&4294967295,S=k+(v<<23&4294967295|v>>>9),v=w+(k^(S|~P))+C[0]+4096336452&4294967295,w=S+(v<<6&4294967295|v>>>26),v=P+(S^(w|~k))+C[7]+1126891415&4294967295,P=w+(v<<10&4294967295|v>>>22),v=k+(w^(P|~S))+C[14]+2878612391&4294967295,k=P+(v<<15&4294967295|v>>>17),v=S+(P^(k|~w))+C[5]+4237533241&4294967295,S=k+(v<<21&4294967295|v>>>11),v=w+(k^(S|~P))+C[12]+1700485571&4294967295,w=S+(v<<6&4294967295|v>>>26),v=P+(S^(w|~k))+C[3]+2399980690&4294967295,P=w+(v<<10&4294967295|v>>>22),v=k+(w^(P|~S))+C[10]+4293915773&4294967295,k=P+(v<<15&4294967295|v>>>17),v=S+(P^(k|~w))+C[1]+2240044497&4294967295,S=k+(v<<21&4294967295|v>>>11),v=w+(k^(S|~P))+C[8]+1873313359&4294967295,w=S+(v<<6&4294967295|v>>>26),v=P+(S^(w|~k))+C[15]+4264355552&4294967295,P=w+(v<<10&4294967295|v>>>22),v=k+(w^(P|~S))+C[6]+2734768916&4294967295,k=P+(v<<15&4294967295|v>>>17),v=S+(P^(k|~w))+C[13]+1309151649&4294967295,S=k+(v<<21&4294967295|v>>>11),v=w+(k^(S|~P))+C[4]+4149444226&4294967295,w=S+(v<<6&4294967295|v>>>26),v=P+(S^(w|~k))+C[11]+3174756917&4294967295,P=w+(v<<10&4294967295|v>>>22),v=k+(w^(P|~S))+C[2]+718787259&4294967295,k=P+(v<<15&4294967295|v>>>17),v=S+(P^(k|~w))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(k+(v<<21&4294967295|v>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+P&4294967295}r.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var S=w-this.blockSize,C=this.B,k=this.h,P=0;P<w;){if(k==0)for(;P<=S;)s(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<w;)if(C[k++]=x.charCodeAt(P++),k==this.blockSize){s(this,C),k=0;break}}else for(;P<w;)if(C[k++]=x[P++],k==this.blockSize){s(this,C),k=0;break}}this.h=k,this.o+=w},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var S=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=S&255,S/=256;for(this.u(x),x=Array(16),w=S=0;4>w;++w)for(var C=0;32>C;C+=8)x[S++]=this.g[w]>>>C&255;return x};function i(x,w){var S=l;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=w(x)}function o(x,w){this.h=w;for(var S=[],C=!0,k=x.length-1;0<=k;k--){var P=x[k]|0;C&&P==w||(S[k]=P,C=!1)}this.g=S}var l={};function u(x){return-128<=x&&128>x?i(x,function(w){return new o([w|0],0>w?-1:0)}):new o([x|0],0>x?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return m;if(0>x)return A(d(-x));for(var w=[],S=1,C=0;x>=S;C++)w[C]=x/S|0,S*=4294967296;return new o(w,0)}function f(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return A(f(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(w,8)),C=m,k=0;k<x.length;k+=8){var P=Math.min(8,x.length-k),v=parseInt(x.substring(k,k+P),w);8>P?(P=d(Math.pow(w,P)),C=C.j(P).add(d(v))):(C=C.j(S),C=C.add(d(v)))}return C}var m=u(0),g=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-A(this).m();for(var x=0,w=1,S=0;S<this.g.length;S++){var C=this.i(S);x+=(0<=C?C:4294967296+C)*w,w*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I(this))return"0";if(N(this))return"-"+A(this).toString(x);for(var w=d(Math.pow(x,6)),S=this,C="";;){var k=b(S,w).g;S=E(S,k.j(w));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=k,I(S))return P+C;for(;6>P.length;)P="0"+P;C=P+C}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function I(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function N(x){return x.h==-1}t.l=function(x){return x=E(this,x),N(x)?-1:I(x)?0:1};function A(x){for(var w=x.g.length,S=[],C=0;C<w;C++)S[C]=~x.g[C];return new o(S,~x.h).add(g)}t.abs=function(){return N(this)?A(this):this},t.add=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],C=0,k=0;k<=w;k++){var P=C+(this.i(k)&65535)+(x.i(k)&65535),v=(P>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);C=v>>>16,P&=65535,v&=65535,S[k]=v<<16|P}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(x,w){return x.add(A(w))}t.j=function(x){if(I(this)||I(x))return m;if(N(this))return N(x)?A(this).j(A(x)):A(A(this).j(x));if(N(x))return A(this.j(A(x)));if(0>this.l(T)&&0>x.l(T))return d(this.m()*x.m());for(var w=this.g.length+x.g.length,S=[],C=0;C<2*w;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(var k=0;k<x.g.length;k++){var P=this.i(C)>>>16,v=this.i(C)&65535,te=x.i(k)>>>16,me=x.i(k)&65535;S[2*C+2*k]+=v*me,_(S,2*C+2*k),S[2*C+2*k+1]+=P*me,_(S,2*C+2*k+1),S[2*C+2*k+1]+=v*te,_(S,2*C+2*k+1),S[2*C+2*k+2]+=P*te,_(S,2*C+2*k+2)}for(C=0;C<w;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=w;C<2*w;C++)S[C]=0;return new o(S,0)};function _(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function R(x,w){this.g=x,this.h=w}function b(x,w){if(I(w))throw Error("division by zero");if(I(x))return new R(m,m);if(N(x))return w=b(A(x),w),new R(A(w.g),A(w.h));if(N(w))return w=b(x,A(w)),new R(A(w.g),w.h);if(30<x.g.length){if(N(x)||N(w))throw Error("slowDivide_ only works with positive integers.");for(var S=g,C=w;0>=C.l(x);)S=L(S),C=L(C);var k=M(S,1),P=M(C,1);for(C=M(C,2),S=M(S,2);!I(C);){var v=P.add(C);0>=v.l(x)&&(k=k.add(S),P=v),C=M(C,1),S=M(S,1)}return w=E(x,k.j(w)),new R(k,w)}for(k=m;0<=x.l(w);){for(S=Math.max(1,Math.floor(x.m()/w.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),P=d(S),v=P.j(w);N(v)||0<v.l(x);)S-=C,P=d(S),v=P.j(w);I(P)&&(P=g),k=k.add(P),x=E(x,v)}return new R(k,x)}t.A=function(x){return b(this,x).h},t.and=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)&x.i(C);return new o(S,this.h&x.h)},t.or=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)|x.i(C);return new o(S,this.h|x.h)},t.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)^x.i(C);return new o(S,this.h^x.h)};function L(x){for(var w=x.g.length+1,S=[],C=0;C<w;C++)S[C]=x.i(C)<<1|x.i(C-1)>>>31;return new o(S,x.h)}function M(x,w){var S=w>>5;w%=32;for(var C=x.g.length-S,k=[],P=0;P<C;P++)k[P]=0<w?x.i(P+S)>>>w|x.i(P+S+1)<<32-w:x.i(P+S);return new o(k,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Jr=o}).apply(typeof hy<"u"?hy:typeof self<"u"?self:typeof window<"u"?window:{});var Xa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gw,Qi,yw,_l,fh,vw,_w,ww;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xa=="object"&&Xa];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var j=a[y];if(!(j in p))break e;p=p[j]}a=a[a.length-1],y=p[a],h=h(y),h!=y&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,y=!1,j={next:function(){if(!y&&p<a.length){var O=p++;return{value:h(O,a[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,y),a.apply(h,j)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function T(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function I(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(y,j,O){for(var z=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)z[ge-2]=arguments[ge];return h.prototype[j].apply(y,z)}}function N(a){const h=a.length;if(0<h){const p=Array(h);for(let y=0;y<h;y++)p[y]=a[y];return p}return[]}function A(a,h){for(let p=1;p<arguments.length;p++){const y=arguments[p];if(u(y)){const j=a.length||0,O=y.length||0;a.length=j+O;for(let z=0;z<O;z++)a[j+z]=y[z]}else a.push(y)}}class E{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(a){return/^[\s\xa0]*$/.test(a)}function R(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var L=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function M(a,h,p){for(const y in a)h.call(p,a[y],y,a)}function x(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function w(a){const h={};for(const p in a)h[p]=a[p];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(a,h){let p,y;for(let j=1;j<arguments.length;j++){y=arguments[j];for(p in y)a[p]=y[p];for(let O=0;O<S.length;O++)p=S[O],Object.prototype.hasOwnProperty.call(y,p)&&(a[p]=y[p])}}function k(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function P(a){l.setTimeout(()=>{throw a},0)}function v(){var a=Y;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class te{constructor(){this.h=this.g=null}add(h,p){const y=me.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var me=new E(()=>new bt,a=>a.reset());class bt{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,B=!1,Y=new te,J=()=>{const a=l.Promise.resolve(void 0);qe=()=>{a.then(pe)}};var pe=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(p){P(p)}var h=me;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}B=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var Ye=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function Jt(a,h){if(q.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(L){e:{try{b(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:$t[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Jt.aa.h.call(this)}}I(Jt,q);var $t={2:"touch",3:"pen",4:"mouse"};Jt.prototype.h=function(){Jt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var An="closure_listenable_"+(1e6*Math.random()|0),mI=0;function gI(a,h,p,y,j){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=j,this.key=++mI,this.da=this.fa=!1}function ma(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ga(a){this.src=a,this.g={},this.h=0}ga.prototype.add=function(a,h,p,y,j){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var z=ic(a,h,y,j);return-1<z?(h=a[z],p||(h.fa=!1)):(h=new gI(h,this.src,O,!!y,j),h.fa=p,a.push(h)),h};function sc(a,h){var p=h.type;if(p in a.g){var y=a.g[p],j=Array.prototype.indexOf.call(y,h,void 0),O;(O=0<=j)&&Array.prototype.splice.call(y,j,1),O&&(ma(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function ic(a,h,p,y){for(var j=0;j<a.length;++j){var O=a[j];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==y)return j}return-1}var oc="closure_lm_"+(1e6*Math.random()|0),ac={};function kp(a,h,p,y,j){if(Array.isArray(h)){for(var O=0;O<h.length;O++)kp(a,h[O],p,y,j);return null}return p=bp(p),a&&a[An]?a.K(h,p,d(y)?!!y.capture:!1,j):yI(a,h,p,!1,y,j)}function yI(a,h,p,y,j,O){if(!h)throw Error("Invalid event type");var z=d(j)?!!j.capture:!!j,ge=uc(a);if(ge||(a[oc]=ge=new ga(a)),p=ge.add(h,p,y,z,O),p.proxy)return p;if(y=vI(),p.proxy=y,y.src=a,y.listener=p,a.addEventListener)Ye||(j=z),j===void 0&&(j=!1),a.addEventListener(h.toString(),y,j);else if(a.attachEvent)a.attachEvent(jp(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function vI(){function a(p){return h.call(a.src,a.listener,p)}const h=_I;return a}function Dp(a,h,p,y,j){if(Array.isArray(h))for(var O=0;O<h.length;O++)Dp(a,h[O],p,y,j);else y=d(y)?!!y.capture:!!y,p=bp(p),a&&a[An]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],p=ic(O,p,y,j),-1<p&&(ma(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=uc(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ic(h,p,y,j)),(p=-1<a?h[a]:null)&&lc(p))}function lc(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[An])sc(h.i,a);else{var p=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(p,y,a.capture):h.detachEvent?h.detachEvent(jp(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=uc(h))?(sc(p,a),p.h==0&&(p.src=null,h[oc]=null)):ma(a)}}}function jp(a){return a in ac?ac[a]:ac[a]="on"+a}function _I(a,h){if(a.da)a=!0;else{h=new Jt(h,this);var p=a.listener,y=a.ha||a.src;a.fa&&lc(a),a=p.call(y,h)}return a}function uc(a){return a=a[oc],a instanceof ga?a:null}var cc="__closure_events_fn_"+(1e9*Math.random()>>>0);function bp(a){return typeof a=="function"?a:(a[cc]||(a[cc]=function(h){return a.handleEvent(h)}),a[cc])}function ot(){de.call(this),this.i=new ga(this),this.M=this,this.F=null}I(ot,de),ot.prototype[An]=!0,ot.prototype.removeEventListener=function(a,h,p,y){Dp(this,a,h,p,y)};function vt(a,h){var p,y=a.F;if(y)for(p=[];y;y=y.F)p.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new q(h,a);else if(h instanceof q)h.target=h.target||a;else{var j=h;h=new q(y,a),C(h,j)}if(j=!0,p)for(var O=p.length-1;0<=O;O--){var z=h.g=p[O];j=ya(z,y,!0,h)&&j}if(z=h.g=a,j=ya(z,y,!0,h)&&j,j=ya(z,y,!1,h)&&j,p)for(O=0;O<p.length;O++)z=h.g=p[O],j=ya(z,y,!1,h)&&j}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],y=0;y<p.length;y++)ma(p[y]);delete a.g[h],a.h--}}this.F=null},ot.prototype.K=function(a,h,p,y){return this.i.add(String(a),h,!1,p,y)},ot.prototype.L=function(a,h,p,y){return this.i.add(String(a),h,!0,p,y)};function ya(a,h,p,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,O=0;O<h.length;++O){var z=h[O];if(z&&!z.da&&z.capture==p){var ge=z.listener,Xe=z.ha||z.src;z.fa&&sc(a.i,z),j=ge.call(Xe,y)!==!1&&j}}return j&&!y.defaultPrevented}function Op(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Lp(a){a.g=Op(()=>{a.g=null,a.i&&(a.i=!1,Lp(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class wI extends de{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Lp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(a){de.call(this),this.h=a,this.g={}}I(Ti,de);var Vp=[];function Mp(a){M(a.g,function(h,p){this.g.hasOwnProperty(p)&&lc(h)},a),a.g={}}Ti.prototype.N=function(){Ti.aa.N.call(this),Mp(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dc=l.JSON.stringify,EI=l.JSON.parse,II=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function hc(){}hc.prototype.h=null;function Up(a){return a.h||(a.h=a.i())}function Fp(){}var xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fc(){q.call(this,"d")}I(fc,q);function pc(){q.call(this,"c")}I(pc,q);var Vr={},Bp=null;function va(){return Bp=Bp||new ot}Vr.La="serverreachability";function zp(a){q.call(this,Vr.La,a)}I(zp,q);function Si(a){const h=va();vt(h,new zp(h))}Vr.STAT_EVENT="statevent";function $p(a,h){q.call(this,Vr.STAT_EVENT,a),this.stat=h}I($p,q);function _t(a){const h=va();vt(h,new $p(h,a))}Vr.Ma="timingevent";function Hp(a,h){q.call(this,Vr.Ma,a),this.size=h}I(Hp,q);function Ai(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function TI(a,h,p,y,j,O){a.info(function(){if(a.g)if(O)for(var z="",ge=O.split("&"),Xe=0;Xe<ge.length;Xe++){var ue=ge[Xe].split("=");if(1<ue.length){var at=ue[0];ue=ue[1];var lt=at.split("_");z=2<=lt.length&&lt[1]=="type"?z+(at+"="+ue+"&"):z+(at+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+y+") [attempt "+j+"]: "+h+`
`+p+`
`+z})}function xI(a,h,p,y,j,O,z){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+j+"]: "+h+`
`+p+`
`+O+" "+z})}function gs(a,h,p,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+AI(a,p)+(y?" "+y:"")})}function SI(a,h){a.info(function(){return"TIMEOUT: "+h})}Ri.prototype.info=function(){};function AI(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var y=p[a];if(!(2>y.length)){var j=y[1];if(Array.isArray(j)&&!(1>j.length)){var O=j[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<j.length;z++)j[z]=""}}}}return dc(p)}catch{return h}}var _a={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mc;function wa(){}I(wa,hc),wa.prototype.g=function(){return new XMLHttpRequest},wa.prototype.i=function(){return{}},mc=new wa;function Yn(a,h,p,y){this.j=a,this.i=h,this.l=p,this.R=y||1,this.U=new Ti(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wp}function Wp(){this.i=null,this.g="",this.h=!1}var Gp={},gc={};function yc(a,h,p){a.L=1,a.v=xa(Rn(h)),a.m=p,a.P=!0,Kp(a,null)}function Kp(a,h){a.F=Date.now(),Ea(a),a.A=Rn(a.v);var p=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),lm(p.i,"t",y),a.C=0,p=a.j.J,a.h=new Wp,a.g=Am(a.j,p?h:null,!a.m),0<a.O&&(a.M=new wI(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,y=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(Vp[0]=j.toString()),j=Vp);for(var O=0;O<j.length;O++){var z=kp(p,j[O],y||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.H?w(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Si(),TI(a.i,a.u,a.A,a.l,a.R,a.m)}Yn.prototype.ca=function(a){a=a.target;const h=this.M;h&&Cn(a)==3?h.j():this.Y(a)},Yn.prototype.Y=function(a){try{if(a==this.g)e:{const lt=Cn(this.g);var h=this.g.Ba();const _s=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||mm(this.g)))){this.J||lt!=4||h==7||(h==8||0>=_s?Si(3):Si(2)),vc(this);var p=this.g.Z();this.X=p;t:if(Qp(this)){var y=mm(this.g);a="";var j=y.length,O=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mr(this),Ci(this);var z="";break t}this.h.i=new l.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(O&&h==j-1)});y.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=p==200,xI(this.i,this.u,this.A,this.l,this.R,lt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,Xe=this.g;if((ge=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ge)){var ue=ge;break t}}ue=null}if(p=ue)gs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_c(this,p);else{this.o=!1,this.s=3,_t(12),Mr(this),Ci(this);break e}}if(this.P){p=!0;let Zt;for(;!this.J&&this.C<z.length;)if(Zt=RI(this,z),Zt==gc){lt==4&&(this.s=4,_t(14),p=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==Gp){this.s=4,_t(15),gs(this.i,this.l,z,"[Invalid Chunk]"),p=!1;break}else gs(this.i,this.l,Zt,null),_c(this,Zt);if(Qp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||z.length!=0||this.h.h||(this.s=1,_t(16),p=!1),this.o=this.o&&p,!p)gs(this.i,this.l,z,"[Invalid Chunked Response]"),Mr(this),Ci(this);else if(0<z.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Sc(at),at.M=!0,_t(11))}}else gs(this.i,this.l,z,null),_c(this,z);lt==4&&Mr(this),this.o&&!this.J&&(lt==4?Im(this.j,this):(this.o=!1,Ea(this)))}else HI(this.g),p==400&&0<z.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Mr(this),Ci(this)}}}catch{}finally{}};function Qp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function RI(a,h){var p=a.C,y=h.indexOf(`
`,p);return y==-1?gc:(p=Number(h.substring(p,y)),isNaN(p)?Gp:(y+=1,y+p>h.length?gc:(h=h.slice(y,y+p),a.C=y+p,h)))}Yn.prototype.cancel=function(){this.J=!0,Mr(this)};function Ea(a){a.S=Date.now()+a.I,Yp(a,a.I)}function Yp(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ai(g(a.ba,a),h)}function vc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Yn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(SI(this.i,this.A),this.L!=2&&(Si(),_t(17)),Mr(this),this.s=2,Ci(this)):Yp(this,this.S-a)};function Ci(a){a.j.G==0||a.J||Im(a.j,a)}function Mr(a){vc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Mp(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function _c(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||wc(p.h,a))){if(!a.K&&wc(p.h,a)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var j=y;if(j[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Pa(p),Ca(p);else break e;xc(p),_t(18)}}else p.za=j[1],0<p.za-p.T&&37500>j[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ai(g(p.Za,p),6e3));if(1>=Zp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Fr(p,11)}else if((a.K||p.g==a)&&Pa(p),!_(h))for(j=p.Da.g.parse(h),h=0;h<j.length;h++){let ue=j[h];if(p.T=ue[0],ue=ue[1],p.G==2)if(ue[0]=="c"){p.K=ue[1],p.ia=ue[2];const at=ue[3];at!=null&&(p.la=at,p.j.info("VER="+p.la));const lt=ue[4];lt!=null&&(p.Aa=lt,p.j.info("SVER="+p.Aa));const _s=ue[5];_s!=null&&typeof _s=="number"&&0<_s&&(y=1.5*_s,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const Zt=a.g;if(Zt){const Da=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Da){var O=y.h;O.g||Da.indexOf("spdy")==-1&&Da.indexOf("quic")==-1&&Da.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Ec(O,O.h),O.h=null))}if(y.D){const Ac=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ac&&(y.ya=Ac,ve(y.I,y.D,Ac))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var z=a;if(y.qa=Sm(y,y.J?y.ia:null,y.W),z.K){em(y.h,z);var ge=z,Xe=y.L;Xe&&(ge.I=Xe),ge.B&&(vc(ge),Ea(ge)),y.g=z}else wm(y);0<p.i.length&&Na(p)}else ue[0]!="stop"&&ue[0]!="close"||Fr(p,7);else p.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Fr(p,7):Tc(p):ue[0]!="noop"&&p.l&&p.l.ta(ue),p.v=0)}}Si(4)}catch{}}var CI=class{constructor(a,h){this.g=a,this.map=h}};function Xp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Zp(a){return a.h?1:a.g?a.g.size:0}function wc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Ec(a,h){a.g?a.g.add(h):a.h=h}function em(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Xp.prototype.cancel=function(){if(this.i=tm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function tm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return N(a.i)}function NI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,y=0;y<p;y++)h.push(a[y]);return h}h=[],p=0;for(y in a)h[p++]=a[y];return h}function PI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const y in a)h[p++]=y;return h}}}function nm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=PI(a),y=NI(a),j=y.length,O=0;O<j;O++)h.call(void 0,y[O],p&&p[O],a)}var rm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kI(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var y=a[p].indexOf("="),j=null;if(0<=y){var O=a[p].substring(0,y);j=a[p].substring(y+1)}else O=a[p];h(O,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Ur(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ur){this.h=a.h,Ia(this,a.j),this.o=a.o,this.g=a.g,Ta(this,a.s),this.l=a.l;var h=a.i,p=new ki;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),sm(this,p),this.m=a.m}else a&&(h=String(a).match(rm))?(this.h=!1,Ia(this,h[1]||"",!0),this.o=Ni(h[2]||""),this.g=Ni(h[3]||"",!0),Ta(this,h[4]),this.l=Ni(h[5]||"",!0),sm(this,h[6]||"",!0),this.m=Ni(h[7]||"")):(this.h=!1,this.i=new ki(null,this.h))}Ur.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Pi(h,im,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Pi(h,im,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Pi(p,p.charAt(0)=="/"?bI:jI,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Pi(p,LI)),a.join("")};function Rn(a){return new Ur(a)}function Ia(a,h,p){a.j=p?Ni(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ta(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function sm(a,h,p){h instanceof ki?(a.i=h,VI(a.i,a.h)):(p||(h=Pi(h,OI)),a.i=new ki(h,a.h))}function ve(a,h,p){a.i.set(h,p)}function xa(a){return ve(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ni(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Pi(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,DI),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function DI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var im=/[#\/\?@]/g,jI=/[#\?:]/g,bI=/[#\?]/g,OI=/[#\?@]/g,LI=/#/g;function ki(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Xn(a){a.g||(a.g=new Map,a.h=0,a.i&&kI(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ki.prototype,t.add=function(a,h){Xn(this),this.i=null,a=ys(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function om(a,h){Xn(a),h=ys(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function am(a,h){return Xn(a),h=ys(a,h),a.g.has(h)}t.forEach=function(a,h){Xn(this),this.g.forEach(function(p,y){p.forEach(function(j){a.call(h,j,y,this)},this)},this)},t.na=function(){Xn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){const j=a[y];for(let O=0;O<j.length;O++)p.push(h[y])}return p},t.V=function(a){Xn(this);let h=[];if(typeof a=="string")am(this,a)&&(h=h.concat(this.g.get(ys(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return Xn(this),this.i=null,a=ys(this,a),am(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function lm(a,h,p){om(a,h),0<p.length&&(a.i=null,a.g.set(ys(a,h),N(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];const O=encodeURIComponent(String(y)),z=this.V(y);for(y=0;y<z.length;y++){var j=O;z[y]!==""&&(j+="="+encodeURIComponent(String(z[y]))),a.push(j)}}return this.i=a.join("&")};function ys(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function VI(a,h){h&&!a.j&&(Xn(a),a.i=null,a.g.forEach(function(p,y){var j=y.toLowerCase();y!=j&&(om(this,y),lm(this,j,p))},a)),a.j=h}function MI(a,h){const p=new Ri;if(l.Image){const y=new Image;y.onload=T(Jn,p,"TestLoadImage: loaded",!0,h,y),y.onerror=T(Jn,p,"TestLoadImage: error",!1,h,y),y.onabort=T(Jn,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=T(Jn,p,"TestLoadImage: timeout",!1,h,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function UI(a,h){const p=new Ri,y=new AbortController,j=setTimeout(()=>{y.abort(),Jn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(O=>{clearTimeout(j),O.ok?Jn(p,"TestPingServer: ok",!0,h):Jn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),Jn(p,"TestPingServer: error",!1,h)})}function Jn(a,h,p,y,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),y(p)}catch{}}function FI(){this.g=new II}function BI(a,h,p){const y=p||"";try{nm(a,function(j,O){let z=j;d(j)&&(z=dc(j)),h.push(y+O+"="+encodeURIComponent(z))})}catch(j){throw h.push(y+"type="+encodeURIComponent("_badmap")),j}}function Sa(a){this.l=a.Ub||null,this.j=a.eb||!1}I(Sa,hc),Sa.prototype.g=function(){return new Aa(this.l,this.j)},Sa.prototype.i=function(a){return function(){return a}}({});function Aa(a,h){ot.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Aa,ot),t=Aa.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ji(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;um(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function um(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Di(this):ji(this),this.readyState==3&&um(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Di(this))},t.Qa=function(a){this.g&&(this.response=a,Di(this))},t.ga=function(){this.g&&Di(this)};function Di(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ji(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function ji(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function cm(a){let h="";return M(a,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function Ic(a,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=cm(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):ve(a,h,p))}function ke(a){ot.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ke,ot);var zI=/^https?$/i,$I=["POST","PUT"];t=ke.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mc.g(),this.v=this.o?Up(this.o):Up(mc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){dm(this,O);return}if(a=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var j in y)p.set(j,y[j]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())p.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call($I,h,void 0))||y||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of p)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pm(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){dm(this,O)}};function dm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,hm(a),Ra(a)}function hm(a){a.A||(a.A=!0,vt(a,"complete"),vt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,vt(this,"complete"),vt(this,"abort"),Ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fm(this):this.bb())},t.bb=function(){fm(this)};function fm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Cn(a)!=4||a.Z()!=2)){if(a.u&&Cn(a)==4)Op(a.Ea,0,a);else if(vt(a,"readystatechange"),Cn(a)==4){a.h=!1;try{const z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=z===0){var j=String(a.D).match(rm)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),y=!zI.test(j?j.toLowerCase():"")}p=y}if(p)vt(a,"complete"),vt(a,"success");else{a.m=6;try{var O=2<Cn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",hm(a)}}finally{Ra(a)}}}}function Ra(a,h){if(a.g){pm(a);const p=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||vt(a,"ready");try{p.onreadystatechange=y}catch{}}}function pm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Cn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),EI(h)}};function mm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function HI(a){const h={};a=(a.g&&2<=Cn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var p=k(a[y]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[j]||[];h[j]=O,O.push(p)}x(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function gm(a){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,a),this.cb=bi("retryDelaySeedMs",1e4,a),this.Wa=bi("forwardChannelMaxRetries",2,a),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Xp(a&&a.concurrentRequestLimit),this.Da=new FI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gm.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,y){_t(0),this.W=a,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=Sm(this,null,this.W),Na(this)};function Tc(a){if(ym(a),a.G==3){var h=a.U++,p=Rn(a.I);if(ve(p,"SID",a.K),ve(p,"RID",h),ve(p,"TYPE","terminate"),Oi(a,p),h=new Yn(a,a.j,h),h.L=2,h.v=xa(Rn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=Am(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ea(h)}xm(a)}function Ca(a){a.g&&(Sc(a),a.g.cancel(),a.g=null)}function ym(a){Ca(a),a.u&&(l.clearTimeout(a.u),a.u=null),Pa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Na(a){if(!Jp(a.h)&&!a.s){a.s=!0;var h=a.Ga;qe||J(),B||(qe(),B=!0),Y.add(h,a),a.B=0}}function qI(a,h){return Zp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ai(g(a.Ga,a,h),Tm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new Yn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=w(O),C(O,this.S)):O=this.S),this.m!==null||this.O||(j.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=_m(this,j,h),p=Rn(this.I),ve(p,"RID",a),ve(p,"CVER",22),this.D&&ve(p,"X-HTTP-Session-Id",this.D),Oi(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(cm(O)))+"&"+h:this.m&&Ic(p,this.m,O)),Ec(this.h,j),this.Ua&&ve(p,"TYPE","init"),this.P?(ve(p,"$req",h),ve(p,"SID","null"),j.T=!0,yc(j,p,null)):yc(j,p,h),this.G=2}}else this.G==3&&(a?vm(this,a):this.i.length==0||Jp(this.h)||vm(this))};function vm(a,h){var p;h?p=h.l:p=a.U++;const y=Rn(a.I);ve(y,"SID",a.K),ve(y,"RID",p),ve(y,"AID",a.T),Oi(a,y),a.m&&a.o&&Ic(y,a.m,a.o),p=new Yn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=_m(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ec(a.h,p),yc(p,y,h)}function Oi(a,h){a.H&&M(a.H,function(p,y){ve(h,y,p)}),a.l&&nm({},function(p,y){ve(h,y,p)})}function _m(a,h,p){p=Math.min(a.i.length,p);var y=a.l?g(a.l.Na,a.l,a):null;e:{var j=a.i;let O=-1;for(;;){const z=["count="+p];O==-1?0<p?(O=j[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let ge=!0;for(let Xe=0;Xe<p;Xe++){let ue=j[Xe].g;const at=j[Xe].map;if(ue-=O,0>ue)O=Math.max(0,j[Xe].g-100),ge=!1;else try{BI(at,z,"req"+ue+"_")}catch{y&&y(at)}}if(ge){y=z.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,y}function wm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;qe||J(),B||(qe(),B=!0),Y.add(h,a),a.v=0}}function xc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ai(g(a.Fa,a),Tm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Em(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ai(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),Ca(this),Em(this))};function Sc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Em(a){a.g=new Yn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Rn(a.qa);ve(h,"RID","rpc"),ve(h,"SID",a.K),ve(h,"AID",a.T),ve(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ve(h,"TO",a.ja),ve(h,"TYPE","xmlhttp"),Oi(a,h),a.m&&a.o&&Ic(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=xa(Rn(h)),p.m=null,p.P=!0,Kp(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Ca(this),xc(this),_t(19))};function Pa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Im(a,h){var p=null;if(a.g==h){Pa(a),Sc(a),a.g=null;var y=2}else if(wc(a.h,h))p=h.D,em(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var j=a.B;y=va(),vt(y,new Hp(y,p)),Na(a)}else wm(a);else if(j=h.s,j==3||j==0&&0<h.X||!(y==1&&qI(a,h)||y==2&&xc(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),j){case 1:Fr(a,5);break;case 4:Fr(a,10);break;case 3:Fr(a,6);break;default:Fr(a,2)}}}function Tm(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Fr(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),y=a.Xa;const j=!y;y=new Ur(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ia(y,"https"),xa(y),j?MI(y.toString(),p):UI(y.toString(),p)}else _t(2);a.G=0,a.l&&a.l.sa(h),xm(a),ym(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function xm(a){if(a.G=0,a.ka=[],a.l){const h=tm(a.h);(h.length!=0||a.i.length!=0)&&(A(a.ka,h),A(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Sm(a,h,p){var y=p instanceof Ur?Rn(p):new Ur(p);if(y.g!="")h&&(y.g=h+"."+y.g),Ta(y,y.s);else{var j=l.location;y=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var O=new Ur(null);y&&Ia(O,y),h&&(O.g=h),j&&Ta(O,j),p&&(O.l=p),y=O}return p=a.D,h=a.ya,p&&h&&ve(y,p,h),ve(y,"VER",a.la),Oi(a,y),y}function Am(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ke(new Sa({eb:p})):new ke(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rm(){}t=Rm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ka(){}ka.prototype.g=function(a,h){return new Ot(a,h)};function Ot(a,h){ot.call(this),this.g=new gm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!_(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new vs(this)}I(Ot,ot),Ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){Tc(this.g)},Ot.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=dc(a),a=p);h.i.push(new CI(h.Ya++,a)),h.G==3&&Na(h)},Ot.prototype.N=function(){this.g.l=null,delete this.j,Tc(this.g),delete this.g,Ot.aa.N.call(this)};function Cm(a){fc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}I(Cm,fc);function Nm(){pc.call(this),this.status=1}I(Nm,pc);function vs(a){this.g=a}I(vs,Rm),vs.prototype.ua=function(){vt(this.g,"a")},vs.prototype.ta=function(a){vt(this.g,new Cm(a))},vs.prototype.sa=function(a){vt(this.g,new Nm)},vs.prototype.ra=function(){vt(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,ww=function(){return new ka},_w=function(){return va()},vw=Vr,fh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_a.NO_ERROR=0,_a.TIMEOUT=8,_a.HTTP_ERROR=6,_l=_a,qp.COMPLETE="complete",yw=qp,Fp.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Qi=Fp,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,gw=ke}).apply(typeof Xa<"u"?Xa:typeof self<"u"?self:typeof window<"u"?window:{});const fy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Rf("@firebase/firestore");function Hi(){return as.logLevel}function K(t,...e){if(as.logLevel<=oe.DEBUG){const n=e.map(Bf);as.debug(`Firestore (${pi}): ${t}`,...n)}}function Wn(t,...e){if(as.logLevel<=oe.ERROR){const n=e.map(Bf);as.error(`Firestore (${pi}): ${t}`,...n)}}function ti(t,...e){if(as.logLevel<=oe.WARN){const n=e.map(Bf);as.warn(`Firestore (${pi}): ${t}`,...n)}}function Bf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${pi}) INTERNAL ASSERTION FAILED: `+t;throw Wn(e),new Error(e)}function fe(t,e){t||ee()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class rN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sN{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Un,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Un)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new Ew(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new ft(e)}}class iN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class oN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new iN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){fe(this.o===void 0);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.R=n.token,new aN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=uN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function ni(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Re(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Re(0,0))}static max(){return new ne(new Re(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ee extends bo{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const cN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends bo{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return cN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new G(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new G(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ee.fromString(e))}static fromName(e){return new X(Ee.fromString(e).popFirst(5))}static empty(){return new X(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ee(e.slice()))}}function dN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new Ar(s,X.empty(),e)}function hN(t){return new Ar(t.readTime,t.key,-1)}class Ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ar(ne.min(),X.empty(),-1)}static max(){return new Ar(ne.max(),X.empty(),-1)}}function fN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==pN)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function gN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ta(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zf.oe=-1;function Lu(t){return t==null}function su(t){return t===0&&1/t==-1/0}function yN(t){return typeof t=="number"&&Number.isInteger(t)&&!su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Tw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new Pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ja(this.root,e,this.comparator,!0)}}class Ja{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=s??Ze.EMPTY,this.right=i??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new my(this.data.getIterator())}getIteratorFrom(e){return new my(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class my{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Mt([])}unionWith(e){let n=new rt(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ni(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new xw("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const vN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t){if(fe(!!t),typeof t=="string"){let e=0;const n=vN.exec(t);if(fe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hf(t){const e=t.mapValue.fields.__previous_value__;return $f(e)?Hf(e):e}function Oo(t){const e=Rr(t.mapValue.fields.__local_write_time__.timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Lo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Lo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za={mapValue:{}};function us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$f(t)?4:EN(t)?9007199254740991:wN(t)?10:11:ee()}function In(t,e){if(t===e)return!0;const n=us(t);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oo(t).isEqual(Oo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Rr(s.timestampValue),l=Rr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ls(s.bytesValue).isEqual(ls(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),l=je(i.doubleValue);return o===l?su(o)===su(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ni(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(py(o)!==py(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!In(o[u],l[u])))return!1;return!0}(t,e);default:return ee()}}function Vo(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function ri(t,e){if(t===e)return 0;const n=us(t),r=us(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=je(i.integerValue||i.doubleValue),u=je(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return gy(t.timestampValue,e.timestampValue);case 4:return gy(Oo(t),Oo(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ls(i),u=ls(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=ce(l[d],u[d]);if(f!==0)return f}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ce(je(i.latitude),je(o.latitude));return l!==0?l:ce(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const m=i.fields||{},g=o.fields||{},T=(l=m.value)===null||l===void 0?void 0:l.arrayValue,I=(u=g.value)===null||u===void 0?void 0:u.arrayValue,N=ce(((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0,((f=I==null?void 0:I.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:yy(T,I)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Za.mapValue&&o===Za.mapValue)return 0;if(i===Za.mapValue)return 1;if(o===Za.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=ce(u[m],f[m]);if(g!==0)return g;const T=ri(l[u[m]],d[f[m]]);if(T!==0)return T}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ee()}}function gy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Rr(t),r=Rr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function yy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ri(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function si(t){return ph(t)}function ph(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ph(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ph(n.fields[o])}`;return s+"}"}(t.mapValue):ee()}function vy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mh(t){return!!t&&"integerValue"in t}function qf(t){return!!t&&"arrayValue"in t}function _y(t){return!!t&&"nullValue"in t}function wy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wl(t){return!!t&&"mapValue"in t}function wN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function uo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function EN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uo(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=uo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){fs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ct(uo(this.value))}}function Sw(t){const e=[];return fs(t.fields,(n,r)=>{const s=new et([n]);if(wl(r)){const i=Sw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Mt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new mt(e,0,ne.min(),ne.min(),ne.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,ne.min(),ne.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ne.min(),ne.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.position=e,this.inclusive=n}}function Ey(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=ri(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Iy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function IN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{}class Ve extends Aw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new xN(e,n,r):n==="array-contains"?new RN(e,r):n==="in"?new CN(e,r):n==="not-in"?new NN(e,r):n==="array-contains-any"?new PN(e,r):new Ve(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SN(e,r):new AN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ri(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(ri(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cn extends Aw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new cn(e,n)}matches(e){return Rw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rw(t){return t.op==="and"}function Cw(t){return TN(t)&&Rw(t)}function TN(t){for(const e of t.filters)if(e instanceof cn)return!1;return!0}function gh(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+si(t.value);if(Cw(t))return t.filters.map(e=>gh(e)).join(",");{const e=t.filters.map(n=>gh(n)).join(",");return`${t.op}(${e})`}}function Nw(t,e){return t instanceof Ve?function(r,s){return s instanceof Ve&&r.op===s.op&&r.field.isEqual(s.field)&&In(r.value,s.value)}(t,e):t instanceof cn?function(r,s){return s instanceof cn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Nw(o,s.filters[l]),!0):!1}(t,e):void ee()}function Pw(t){return t instanceof Ve?function(n){return`${n.field.canonicalString()} ${n.op} ${si(n.value)}`}(t):t instanceof cn?function(n){return n.op.toString()+" {"+n.getFilters().map(Pw).join(" ,")+"}"}(t):"Filter"}class xN extends Ve{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class SN extends Ve{constructor(e,n){super(e,"in",n),this.keys=kw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AN extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=kw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class RN extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qf(n)&&Vo(n.arrayValue,this.value)}}class CN extends Ve{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vo(this.value.arrayValue,n)}}class NN extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Vo(this.value.arrayValue,n)}}class PN extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Ty(t,e=null,n=[],r=[],s=null,i=null,o=null){return new kN(t,e,n,r,s,i,o)}function Wf(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Lu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>si(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>si(r)).join(",")),e.ue=n}return e.ue}function Gf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Nw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iy(t.startAt,e.startAt)&&Iy(t.endAt,e.endAt)}function yh(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function DN(t,e,n,r,s,i,o,l){return new na(t,e,n,r,s,i,o,l)}function Kf(t){return new na(t)}function xy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Dw(t){return t.collectionGroup!==null}function co(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new rt(et.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ou(i,r))}),n.has(et.keyField().canonicalString())||e.ce.push(new ou(et.keyField(),r))}return e.ce}function vn(t){const e=re(t);return e.le||(e.le=jN(e,co(t))),e.le}function jN(t,e){if(t.limitType==="F")return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ou(s.field,i)});const n=t.endAt?new iu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new iu(t.startAt.position,t.startAt.inclusive):null;return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vh(t,e){const n=t.filters.concat([e]);return new na(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _h(t,e,n){return new na(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vu(t,e){return Gf(vn(t),vn(e))&&t.limitType===e.limitType}function jw(t){return`${Wf(vn(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Pw(s)).join(", ")}]`),Lu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>si(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>si(s)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function Mu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of co(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Ey(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,co(r),s)||r.endAt&&!function(o,l,u){const d=Ey(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,co(r),s))}(t,e)}function bN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bw(t){return(e,n)=>{let r=!1;for(const s of co(t)){const i=ON(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ON(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?ri(u,d):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Tw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new Pe(X.comparator);function Gn(){return LN}const Ow=new Pe(X.comparator);function Yi(...t){let e=Ow;for(const n of t)e=e.insert(n.key,n);return e}function Lw(t){let e=Ow;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Kr(){return ho()}function Vw(){return ho()}function ho(){return new mi(t=>t.toString(),(t,e)=>t.isEqual(e))}const VN=new Pe(X.comparator),MN=new rt(X.comparator);function ie(...t){let e=MN;for(const n of t)e=e.add(n);return e}const UN=new rt(ce);function FN(){return UN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function Mw(t){return{integerValue:""+t}}function BN(t,e){return yN(e)?Mw(e):Qf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(){this._=void 0}}function zN(t,e,n){return t instanceof au?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&$f(i)&&(i=Hf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Mo?Fw(t,e):t instanceof Uo?Bw(t,e):function(s,i){const o=Uw(s,i),l=Sy(o)+Sy(s.Pe);return mh(o)&&mh(s.Pe)?Mw(l):Qf(s.serializer,l)}(t,e)}function $N(t,e,n){return t instanceof Mo?Fw(t,e):t instanceof Uo?Bw(t,e):n}function Uw(t,e){return t instanceof lu?function(r){return mh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class au extends Uu{}class Mo extends Uu{constructor(e){super(),this.elements=e}}function Fw(t,e){const n=zw(e);for(const r of t.elements)n.some(s=>In(s,r))||n.push(r);return{arrayValue:{values:n}}}class Uo extends Uu{constructor(e){super(),this.elements=e}}function Bw(t,e){let n=zw(e);for(const r of t.elements)n=n.filter(s=>!In(s,r));return{arrayValue:{values:n}}}class lu extends Uu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Sy(t){return je(t.integerValue||t.doubleValue)}function zw(t){return qf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function HN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Mo&&s instanceof Mo||r instanceof Uo&&s instanceof Uo?ni(r.elements,s.elements,In):r instanceof lu&&s instanceof lu?In(r.Pe,s.Pe):r instanceof au&&s instanceof au}(t.transform,e.transform)}class qN{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function El(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fu{}function $w(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qw(t.key,_n.none()):new ra(t.key,t.data,_n.none());{const n=t.data,r=Ct.empty();let s=new rt(et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Or(t.key,r,new Mt(s.toArray()),_n.none())}}function WN(t,e,n){t instanceof ra?function(s,i,o){const l=s.value.clone(),u=Ry(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Or?function(s,i,o){if(!El(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Ry(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Hw(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fo(t,e,n,r){return t instanceof ra?function(i,o,l,u){if(!El(i.precondition,o))return l;const d=i.value.clone(),f=Cy(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Or?function(i,o,l,u){if(!El(i.precondition,o))return l;const d=Cy(i.fieldTransforms,u,o),f=o.data;return f.setAll(Hw(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return El(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function GN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Uw(r.transform,s||null);i!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,i))}return n||null}function Ay(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ni(r,s,(i,o)=>HN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ra extends Fu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Or extends Fu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Hw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ry(t,e,n){const r=new Map;fe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,$N(o,l,n[s]))}return r}function Cy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,zN(i,o,e))}return r}class qw extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KN extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&WN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Vw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=$w(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&ni(this.mutations,e.mutations,(n,r)=>Ay(n,r))&&ni(this.baseMutations,e.baseMutations,(n,r)=>Ay(n,r))}}class Yf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length);let s=function(){return VN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Yf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ae;function JN(t){switch(t){default:return ee();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function Ww(t){if(t===void 0)return Wn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Oe.OK:return V.OK;case Oe.CANCELLED:return V.CANCELLED;case Oe.UNKNOWN:return V.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return V.INTERNAL;case Oe.UNAVAILABLE:return V.UNAVAILABLE;case Oe.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Oe.NOT_FOUND:return V.NOT_FOUND;case Oe.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Oe.ABORTED:return V.ABORTED;case Oe.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Oe.DATA_LOSS:return V.DATA_LOSS;default:return ee()}}(ae=Oe||(Oe={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=new Jr([4294967295,4294967295],0);function Ny(t){const e=ZN().encode(t),n=new mw;return n.update(e),new Uint8Array(n.digest())}function Py(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Jr([n,r],0),new Jr([s,i],0)]}class Xf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xi(`Invalid padding: ${n}`);if(r<0)throw new Xi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Jr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Jr.fromNumber(r)));return s.compare(eP)===1&&(s=new Jr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ny(e),[r,s]=Py(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Ny(e),[r,s]=Py(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bu(ne.min(),s,new Pe(ce),Gn(),ie())}}class sa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sa(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Gw{constructor(e,n){this.targetId=e,this.me=n}}class Kw{constructor(e,n,r=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ky{constructor(){this.fe=0,this.ge=jy(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee()}}),new sa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=jy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gn(),this.qe=Dy(),this.Qe=new Pe(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(yh(i))if(r===0){const o=new X(i.path);this.Ue(n,o,mt.newNoDocument(o,ne.min()))}else fe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ls(r).toUint8Array()}catch(u){if(u instanceof xw)return ti("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Xf(o,s,i)}catch(u){return ti(u instanceof Xi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&yh(l.target)){const u=new X(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,mt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ie();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Bu(e,n,this.Qe,this.ke,r);return this.ke=Gn(),this.qe=Dy(),this.Qe=new Pe(ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ky,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ky),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Dy(){return new Pe(X.comparator)}function jy(){return new Pe(X.comparator)}const nP={asc:"ASCENDING",desc:"DESCENDING"},rP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sP={and:"AND",or:"OR"};class iP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wh(t,e){return t.useProto3Json||Lu(e)?e:{value:e}}function uu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oP(t,e){return uu(t,e.toTimestamp())}function wn(t){return fe(!!t),ne.fromTimestamp(function(n){const r=Rr(n);return new Re(r.seconds,r.nanos)}(t))}function Jf(t,e){return Eh(t,e).canonicalString()}function Eh(t,e){const n=function(s){return new Ee(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Yw(t){const e=Ee.fromString(t);return fe(tE(e)),e}function Ih(t,e){return Jf(t.databaseId,e.path)}function od(t,e){const n=Yw(e);if(n.get(1)!==t.databaseId.projectId)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(Jw(n))}function Xw(t,e){return Jf(t.databaseId,e)}function aP(t){const e=Yw(t);return e.length===4?Ee.emptyPath():Jw(e)}function Th(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Jw(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function by(t,e,n){return{name:Ih(t,e),fields:n.value.mapValue.fields}}function lP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(fe(f===void 0||typeof f=="string"),it.fromBase64String(f||"")):(fe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),it.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?V.UNKNOWN:Ww(d.code);return new G(f,d.message||"")}(o);n=new Kw(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=od(t,r.document.name),i=wn(r.document.updateTime),o=r.document.createTime?wn(r.document.createTime):ne.min(),l=new Ct({mapValue:{fields:r.document.fields}}),u=mt.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Il(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=od(t,r.document),i=r.readTime?wn(r.readTime):ne.min(),o=mt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Il([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=od(t,r.document),i=r.removedTargetIds||[];n=new Il([],i,s,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new XN(s,i),l=r.targetId;n=new Gw(l,o)}}return n}function uP(t,e){let n;if(e instanceof ra)n={update:by(t,e.key,e.value)};else if(e instanceof qw)n={delete:Ih(t,e.key)};else if(e instanceof Or)n={update:by(t,e.key,e.data),updateMask:vP(e.fieldMask)};else{if(!(e instanceof KN))return ee();n={verify:Ih(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof au)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Mo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Uo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof lu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:oP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function cP(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?wn(s.updateTime):wn(i);return o.isEqual(ne.min())&&(o=wn(i)),new qN(o,s.transformResults||[])}(n,e))):[]}function dP(t,e){return{documents:[Xw(t,e.path)]}}function hP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Xw(t,s);const i=function(d){if(d.length!==0)return eE(cn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Ts(g.field),direction:mP(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=wh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function fP(t){let e=aP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=Zw(m);return g instanceof cn&&Cw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(I){return new ou(xs(I.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Lu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,T=m.values||[];return new iu(T,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,T=m.values||[];return new iu(T,g)}(n.endAt)),DN(e,s,o,i,l,"F",u,d)}function pP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Zw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xs(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xs(n.unaryFilter.field);return Ve.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xs(n.unaryFilter.field);return Ve.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xs(n.unaryFilter.field);return Ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Ve.create(xs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cn.create(n.compositeFilter.filters.map(r=>Zw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function mP(t){return nP[t]}function gP(t){return rP[t]}function yP(t){return sP[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function xs(t){return et.fromServerFormat(t.fieldPath)}function eE(t){return t instanceof Ve?function(n){if(n.op==="=="){if(wy(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(_y(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wy(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(_y(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:gP(n.op),value:n.value}}}(t):t instanceof cn?function(n){const r=n.getFilters().map(s=>eE(s));return r.length===1?r[0]:{compositeFilter:{op:yP(n.op),filters:r}}}(t):ee()}function vP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n,r,s,i=ne.min(),o=ne.min(),l=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.ct=e}}function wP(t){const e=fP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_h(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.un=new IP}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Ar.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class IP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rt(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rt(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ii(0)}static kn(){return new ii(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.changes=new mi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fo(r.mutation,s,Mt.empty(),Re.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=Kr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Yi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Kr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Gn();const o=ho(),l=function(){return ho()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Or)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),fo(f.mutation,d,f.mutation.getFieldMask(),Re.now())):o.set(d.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new xP(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ho();let s=new Pe((o,l)=>o-l),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Mt.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(s.get(l.batchId)||ie()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=Vw();f.forEach(g=>{if(!i.has(g)){const T=$w(n.get(g),r.get(g));T!==null&&m.set(g,T),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Kr());let l=-1,u=i;return o.next(d=>U.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ie())).next(f=>({batchId:l,changes:Lw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=Yi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Yi();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,u=>{const d=function(m,g){return new na(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,mt.newInvalidDocument(f)))});let l=Yi();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&fo(f.mutation,d,Mt.empty(),Re.now()),Mu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:wP(s.bundledQuery),readTime:wn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.overlays=new Pe(X.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Kr();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Kr(),i=n.length+1,o=new X(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Pe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Kr(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Kr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new YN(n,r));let i=this.Ir.get(n);i===void 0&&(i=ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this.Tr=new rt(We.Er),this.dr=new rt(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Ee([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Ee([])),r=new We(n,e),s=new We(n,e+1);let i=ie();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new rt(We.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new QN(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new We(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(ce);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new We(new X(i),0);let l=new rt(ce);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new We(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.Mr=e,this.docs=function(){return new Pe(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Gn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Gn();const o=n.path,l=new X(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||fN(hN(f),r)<=0||(s.has(f.key)||Mu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kP(this)}getSize(e){return U.resolve(this.size)}}class kP extends TP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.persistence=e,this.Nr=new mi(n=>Wf(n),Gf),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Zf,this.targetCount=0,this.kr=ii.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ii(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new zf(0),this.Kr=!1,this.Kr=!0,this.$r=new CP,this.referenceDelegate=e(this),this.Ur=new DP(this),this.indexManager=new EP,this.remoteDocumentCache=function(s){return new PP(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new _P(n),this.Gr=new AP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new NP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new bP(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class bP extends mN{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.Jr=new Zf,this.Yr=null}static Zr(e){return new ep(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=X.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new tp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return VS()?8:gN(yt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new OP;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Hi()<=oe.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Hi()<=oe.DEBUG&&K("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Hi()<=oe.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):U.resolve())}Yi(e,n){if(xy(n))return U.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_h(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ie(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,_h(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return xy(n)||s.isEqual(ne.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Hi()<=oe.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Is(n)),this.rs(e,o,n,dN(s,-1)).next(l=>l))})}ts(e,n){let r=new rt(bw(e));return n.forEach((s,i)=>{Mu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Hi()<=oe.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Is(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ar.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Pe(ce),this._s=new mi(i=>Wf(i),Gf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function MP(t,e,n,r){return new VP(t,e,n,r)}async function nE(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ie();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function UP(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const m=d.batch,g=m.keys();let T=U.resolve();return g.forEach(I=>{T=T.next(()=>f.getEntry(u,I)).next(N=>{const A=d.docVersions.get(I);fe(A!==null),N.version.compareTo(A)<0&&(m.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function rE(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function FP(t,e){const n=re(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,m)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(it.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),s=s.insert(m,T),function(N,A,E){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,T,f)&&l.push(n.Ur.updateTargetData(i,T))});let u=Gn(),d=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(BP(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(ne.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function BP(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Gn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function zP(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $P(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new cr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function xh(t,e,n){const r=re(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ta(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Oy(t,e,n){const r=re(t);let s=ne.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=re(u),g=m._s.get(f);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,o,vn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:ie())).next(l=>(HP(r,bN(e),l),{documents:l,Ts:i})))}function HP(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Ly{constructor(){this.activeTargetIds=FN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qP{constructor(){this.so=new Ly,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ly,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el=null;function ad(){return el===null?el=function(){return 268435456+Math.round(2147483648*Math.random())}():el++,"0x"+el.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class QP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=ad(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(K("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw ti("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=GP[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ad();return new Promise((o,l)=>{const u=new gw;u.setWithCredentials(!0),u.listenOnce(yw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _l.NO_ERROR:const f=u.getResponseJson();K(dt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case _l.TIMEOUT:K(dt,`RPC '${e}' ${i} timed out`),l(new G(V.DEADLINE_EXCEEDED,"Request time out"));break;case _l.HTTP_ERROR:const m=u.getStatus();if(K(dt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const T=g==null?void 0:g.error;if(T&&T.status&&T.message){const I=function(A){const E=A.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(E)>=0?E:V.UNKNOWN}(T.status);l(new G(I,T.message))}else l(new G(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(V.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{K(dt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);K(dt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=ad(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ww(),l=_w(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");K(dt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);let g=!1,T=!1;const I=new KP({Io:A=>{T?K(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(K(dt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),K(dt,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},To:()=>m.close()}),N=(A,E,_)=>{A.listen(E,R=>{try{_(R)}catch(b){setTimeout(()=>{throw b},0)}})};return N(m,Qi.EventType.OPEN,()=>{T||(K(dt,`RPC '${e}' stream ${s} transport opened.`),I.yo())}),N(m,Qi.EventType.CLOSE,()=>{T||(T=!0,K(dt,`RPC '${e}' stream ${s} transport closed`),I.So())}),N(m,Qi.EventType.ERROR,A=>{T||(T=!0,ti(dt,`RPC '${e}' stream ${s} transport errored:`,A),I.So(new G(V.UNAVAILABLE,"The operation could not be completed")))}),N(m,Qi.EventType.MESSAGE,A=>{var E;if(!T){const _=A.data[0];fe(!!_);const R=_,b=R.error||((E=R[0])===null||E===void 0?void 0:E.error);if(b){K(dt,`RPC '${e}' stream ${s} received error:`,b);const L=b.status;let M=function(S){const C=Oe[S];if(C!==void 0)return Ww(C)}(L),x=b.message;M===void 0&&(M=V.INTERNAL,x="Unknown error status: "+L+" with message "+b.message),T=!0,I.So(new G(M,x)),m.close()}else K(dt,`RPC '${e}' stream ${s} received:`,_),I.bo(_)}}),N(l,vw.STAT_EVENT,A=>{A.stat===fh.PROXY?K(dt,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===fh.NOPROXY&&K(dt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){return new iP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Wn(n.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YP extends iE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=lP(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?wn(o.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Th(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=yh(u)?{documents:dP(i,u)}:{query:hP(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Qw(i,o.resumeToken);const d=wh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){l.readTime=uu(i,o.snapshotVersion.toTimestamp());const d=wh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=pP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Th(this.serializer),n.removeTarget=e,this.a_(n)}}class XP extends iE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=cP(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Th(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>uP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Eh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Eh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ZP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ps(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=re(u);d.L_.add(4),await ia(d),d.q_.set("Unknown"),d.L_.delete(4),await $u(d)}(this))})}),this.q_=new ZP(r,s)}}async function $u(t){if(ps(t))for(const e of t.B_)await e(!0)}async function ia(t){for(const e of t.B_)await e(!1)}function oE(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ip(n)?sp(n):gi(n).r_()&&rp(n,e))}function np(t,e){const n=re(t),r=gi(n);n.N_.delete(e),r.r_()&&aE(n,e),n.N_.size===0&&(r.r_()?r.o_():ps(n)&&n.q_.set("Unknown"))}function rp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gi(t).A_(e)}function aE(t,e){t.Q_.xe(e),gi(t).R_(e)}function sp(t){t.Q_=new tP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),gi(t).start(),t.q_.v_()}function ip(t){return ps(t)&&!gi(t).n_()&&t.N_.size>0}function ps(t){return re(t).L_.size===0}function lE(t){t.Q_=void 0}async function tk(t){t.q_.set("Online")}async function nk(t){t.N_.forEach((e,n)=>{rp(t,e)})}async function rk(t,e){lE(t),ip(t)?(t.q_.M_(e),sp(t)):t.q_.set("Unknown")}async function sk(t,e,n){if(t.q_.set("Online"),e instanceof Kw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cu(t,r)}else if(e instanceof Il?t.Q_.Ke(e):e instanceof Gw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await rE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(it.EMPTY_BYTE_STRING,f.snapshotVersion)),aE(i,u);const m=new cr(f.target,u,d,f.sequenceNumber);rp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await cu(t,r)}}async function cu(t,e,n){if(!ta(e))throw e;t.L_.add(1),await ia(t),t.q_.set("Offline"),n||(n=()=>rE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await $u(t)})}function uE(t,e){return e().catch(n=>cu(t,n,e))}async function Hu(t){const e=re(t),n=Cr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ik(e);)try{const s=await zP(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,ok(e,s)}catch(s){await cu(e,s)}cE(e)&&dE(e)}function ik(t){return ps(t)&&t.O_.length<10}function ok(t,e){t.O_.push(e);const n=Cr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function cE(t){return ps(t)&&!Cr(t).n_()&&t.O_.length>0}function dE(t){Cr(t).start()}async function ak(t){Cr(t).p_()}async function lk(t){const e=Cr(t);for(const n of t.O_)e.m_(n.mutations)}async function uk(t,e,n){const r=t.O_.shift(),s=Yf.from(r,e,n);await uE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Hu(t)}async function ck(t,e){e&&Cr(t).V_&&await async function(r,s){if(function(o){return JN(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();Cr(r).s_(),await uE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Hu(r)}}(t,e),cE(t)&&dE(t)}async function My(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=ps(n);n.L_.add(3),await ia(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await $u(n)}async function dk(t,e){const n=re(t);e?(n.L_.delete(2),await $u(n)):e||(n.L_.add(2),await ia(n),n.q_.set("Unknown"))}function gi(t){return t.K_||(t.K_=function(n,r,s){const i=re(n);return i.w_(),new YP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:tk.bind(null,t),Ro:nk.bind(null,t),mo:rk.bind(null,t),d_:sk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ip(t)?sp(t):t.q_.set("Unknown")):(await t.K_.stop(),lE(t))})),t.K_}function Cr(t){return t.U_||(t.U_=function(n,r,s){const i=re(n);return i.w_(),new XP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ak.bind(null,t),mo:ck.bind(null,t),f_:lk.bind(null,t),g_:uk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Hu(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new op(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ap(t,e){if(Wn("AsyncQueue",`${e}: ${t}`),ta(t))return new G(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Yi(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new Ws(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.W_=new Pe(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class oi{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new oi(e,n,Ws.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class fk{constructor(){this.queries=Fy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=Fy(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new G(V.ABORTED,"Firestore shutting down"))}}function Fy(){return new mi(t=>jw(t),Vu)}async function hE(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new hk,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=ap(o,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&lp(n)}async function fE(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pk(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&lp(n)}function mk(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function lp(t){t.Y_.forEach(e=>{e.next()})}var Sh,By;(By=Sh||(Sh={})).ea="default",By.Cache="cache";class pE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.key=e}}class gE{constructor(e){this.key=e}}class gk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=bw(e),this.Ra=new Ws(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Uy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),T=Mu(this.query,m)?m:null,I=!!g&&this.mutatedKeys.has(g.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let A=!1;g&&T?g.data.isEqual(T.data)?I!==N&&(r.track({type:3,doc:T}),A=!0):this.ga(g,T)||(r.track({type:2,doc:T}),A=!0,(u&&this.Aa(T,u)>0||d&&this.Aa(T,d)<0)&&(l=!0)):!g&&T?(r.track({type:0,doc:T}),A=!0):g&&!T&&(r.track({type:1,doc:g}),A=!0,(u||d)&&(l=!0)),A&&(T?(o=o.add(T),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(T,I){const N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return N(T)-N(I)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new oi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Uy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new gE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new mE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return oi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class yk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vk{constructor(e){this.key=e,this.va=!1}}class _k{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new mi(l=>jw(l),Vu),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe(X.comparator),this.Na=new Map,this.La=new Zf,this.Ba={},this.ka=new Map,this.qa=ii.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function wk(t,e,n=!0){const r=IE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await yE(r,e,n,!0),s}async function Ek(t,e){const n=IE(t);await yE(n,e,!0,!1)}async function yE(t,e,n,r){const s=await $P(t.localStore,vn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Ik(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&oE(t.remoteStore,s),l}async function Ik(t,e,n,r,s){t.Ka=(m,g,T)=>async function(N,A,E,_){let R=A.view.ma(E);R.ns&&(R=await Oy(N.localStore,A.query,!1).then(({documents:x})=>A.view.ma(x,R)));const b=_&&_.targetChanges.get(A.targetId),L=_&&_.targetMismatches.get(A.targetId)!=null,M=A.view.applyChanges(R,N.isPrimaryClient,b,L);return $y(N,A.targetId,M.wa),M.snapshot}(t,m,g,T);const i=await Oy(t.localStore,e,!0),o=new gk(e,i.Ts),l=o.ma(i.documents),u=sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);$y(t,n,d.wa);const f=new yk(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function Tk(t,e,n){const r=re(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Vu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await xh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&np(r.remoteStore,s.targetId),Ah(r,s.targetId)}).catch(ea)):(Ah(r,s.targetId),await xh(r.localStore,s.targetId,!0))}async function xk(t,e){const n=re(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),np(n.remoteStore,r.targetId))}async function Sk(t,e,n){const r=Dk(t);try{const s=await function(o,l){const u=re(o),d=Re.now(),f=l.reduce((T,I)=>T.add(I.key),ie());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let I=Gn(),N=ie();return u.cs.getEntries(T,f).next(A=>{I=A,I.forEach((E,_)=>{_.isValidDocument()||(N=N.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,I)).next(A=>{m=A;const E=[];for(const _ of l){const R=GN(_,m.get(_.key).overlayedDocument);R!=null&&E.push(new Or(_.key,R,Sw(R.value.mapValue),_n.exists(!0)))}return u.mutationQueue.addMutationBatch(T,d,E,l)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(T,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:Lw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Pe(ce)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await oa(r,s.changes),await Hu(r.remoteStore)}catch(s){const i=ap(s,"Failed to persist write");n.reject(i)}}async function vE(t,e){const n=re(t);try{const r=await FP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?fe(o.va):s.removedDocuments.size>0&&(fe(o.va),o.va=!1))}),await oa(n,r,e)}catch(r){await ea(r)}}function zy(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=re(o);u.onlineState=l;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(l)&&(d=!0)}),d&&lp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ak(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Pe(X.comparator);o=o.insert(i,mt.newNoDocument(i,ne.min()));const l=ie().add(i),u=new Bu(ne.min(),new Map,new Pe(ce),o,l);await vE(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),up(r)}else await xh(r.localStore,e,!1).then(()=>Ah(r,e,n)).catch(ea)}async function Rk(t,e){const n=re(t),r=e.batch.batchId;try{const s=await UP(n.localStore,e);wE(n,r,null),_E(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oa(n,s)}catch(s){await ea(s)}}async function Ck(t,e,n){const r=re(t);try{const s=await function(o,l){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(fe(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);wE(r,e,n),_E(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await oa(r,s)}catch(s){await ea(s)}}function _E(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function wE(t,e,n){const r=re(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Ah(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||EE(t,r)})}function EE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(np(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),up(t))}function $y(t,e,n){for(const r of n)r instanceof mE?(t.La.addReference(r.key,e),Nk(t,r)):r instanceof gE?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||EE(t,r.key)):ee()}function Nk(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),up(t))}function up(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new vk(n)),t.Oa=t.Oa.insert(n,r),oE(t.remoteStore,new cr(vn(Kf(n.path)),r,"TargetPurposeLimboResolution",zf.oe))}}async function oa(t,e,n){const r=re(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=tp.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=re(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.$i,T=>f.persistence.referenceDelegate.addReference(m,g.targetId,T)).next(()=>U.forEach(g.Ui,T=>f.persistence.referenceDelegate.removeReference(m,g.targetId,T)))))}catch(m){if(!ta(m))throw m;K("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const T=f.os.get(g),I=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(I);f.os=f.os.insert(g,N)}}}(r.localStore,i))}async function Pk(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await nE(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new G(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oa(n,r.hs)}}function kk(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let s=ie();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function IE(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ak.bind(null,e),e.Ca.d_=pk.bind(null,e.eventManager),e.Ca.$a=mk.bind(null,e.eventManager),e}function Dk(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ck.bind(null,e),e}class du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return MP(this.persistence,new LP,e.initialUser,this.serializer)}Ga(e){return new jP(ep.Zr,this.serializer)}Wa(e){return new qP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}du.provider={build:()=>new du};class Rh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pk.bind(null,this.syncEngine),await dk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fk}()}createDatastore(e){const n=zu(e.databaseInfo.databaseId),r=function(i){return new QP(i)}(e.databaseInfo);return function(i,o,l,u){return new JP(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new ek(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>zy(this.syncEngine,n,0),function(){return Vy.D()?new Vy:new WP}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const m=new _k(s,i,o,l,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);K("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ia(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Rh.provider={build:()=>new Rh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ft.UNAUTHENTICATED,this.clientId=Iw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ap(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ud(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await nE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bk(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>My(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>My(e.remoteStore,s)),t._onlineComponents=e}async function bk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await ud(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ti("Error using user provided cache. Falling back to memory cache: "+n),await ud(t,new du)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await ud(t,new du);return t._offlineComponents}async function xE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Hy(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Hy(t,new Rh))),t._onlineComponents}function Ok(t){return xE(t).then(e=>e.syncEngine)}async function SE(t){const e=await xE(t),n=e.eventManager;return n.onListen=wk.bind(null,e.syncEngine),n.onUnlisten=Tk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ek.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xk.bind(null,e.syncEngine),n}function Lk(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new TE({next:g=>{f.Za(),o.enqueueAndForget(()=>fE(i,m));const T=g.docs.has(l);!T&&g.fromCache?d.reject(new G(V.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&u&&u.source==="server"?d.reject(new G(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new pE(Kf(l.path),f,{includeMetadataChanges:!0,_a:!0});return hE(i,m)}(await SE(t),t.asyncQueue,e,n,r)),r.promise}function Vk(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new TE({next:g=>{f.Za(),o.enqueueAndForget(()=>fE(i,m)),g.fromCache&&u.source==="server"?d.reject(new G(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new pE(l,f,{includeMetadataChanges:!0,_a:!0});return hE(i,m)}(await SE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t,e,n){if(!n)throw new G(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Mk(t,e,n,r){if(e===!0&&r===!0)throw new G(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wy(t){if(!X.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gy(t){if(X.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qu(t);throw new G(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ky({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ky(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nN;switch(r.type){case"firstParty":return new oN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=qy.get(n);r&&(K("ComponentProvider","Removing Datastore"),qy.delete(n),r.terminate())}(this),Promise.resolve()}}function Uk(t,e,n,r={}){var s;const i=(t=Kn(t,Wu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ft.MOCK_USER;else{l=D0(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new G(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ft(d)}t._authCredentials=new rN(new Ew(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class Ir extends yi{constructor(e,n,r){super(e,n,Kf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new X(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function Wt(t,e,...n){if(t=Qe(t),RE("collection","path",e),t instanceof Wu){const r=Ee.fromString(e,...n);return Gy(r),new Ir(t,null,r)}{if(!(t instanceof xt||t instanceof Ir))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Gy(r),new Ir(t.firestore,null,r)}}function $e(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=Iw.newId()),RE("doc","path",e),t instanceof Wu){const r=Ee.fromString(e,...n);return Wy(r),new xt(t,null,new X(r))}{if(!(t instanceof xt||t instanceof Ir))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Wy(r),new xt(t.firestore,t instanceof Ir?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sE(this,"async_queue_retry"),this.Vu=()=>{const r=ld();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ld();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ld();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Un;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ta(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Wn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=op.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class aa extends Wu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Qy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qy(e),this._firestoreClient=void 0,await e}}}function Fk(t,e){const n=typeof t=="object"?t:Nf(),r=typeof t=="string"?t:"(default)",s=Du(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=N0("firestore");i&&Uk(s,...i)}return s}function cp(t){if(t._terminated)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Bk(t),t._firestoreClient}function Bk(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new _N(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,AE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new jk(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ai(it.fromBase64String(e))}catch(n){throw new G(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ai(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=/^__.*__$/;class $k{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,n,this.fieldTransforms):new ra(e,this.data,n,this.fieldTransforms)}}class CE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Or(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class pp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new pp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(NE(this.Cu)&&zk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Hk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zu(e)}Qu(e,n,r,s=!1){return new pp({Cu:e,methodName:n,qu:r,path:et.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mp(t){const e=t._freezeSettings(),n=zu(t._databaseId);return new Hk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qk(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);gp("Data must be an object, but it was:",o,r);const l=PE(r,o);let u,d;if(i.merge)u=new Mt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Ch(e,m,n);if(!o.contains(g))throw new G(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);DE(f,g)||f.push(g)}u=new Mt(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new $k(new Ct(l),u,d)}class Ku extends dp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ku}}function Wk(t,e,n,r){const s=t.Qu(1,e,n);gp("Data must be an object, but it was:",s,r);const i=[],o=Ct.empty();fs(r,(u,d)=>{const f=yp(e,u,n);d=Qe(d);const m=s.Nu(f);if(d instanceof Ku)i.push(f);else{const g=la(d,m);g!=null&&(i.push(f),o.set(f,g))}});const l=new Mt(i);return new CE(o,l,s.fieldTransforms)}function Gk(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[Ch(e,r,n)],u=[s];if(i.length%2!=0)throw new G(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Ch(e,i[g])),u.push(i[g+1]);const d=[],f=Ct.empty();for(let g=l.length-1;g>=0;--g)if(!DE(d,l[g])){const T=l[g];let I=u[g];I=Qe(I);const N=o.Nu(T);if(I instanceof Ku)d.push(T);else{const A=la(I,N);A!=null&&(d.push(T),f.set(T,A))}}const m=new Mt(d);return new CE(f,m,o.fieldTransforms)}function Kk(t,e,n,r=!1){return la(n,t.Qu(r?4:3,e))}function la(t,e){if(kE(t=Qe(t)))return gp("Unsupported field value:",e,t),PE(t,e);if(t instanceof dp)return function(r,s){if(!NE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=la(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Re.fromDate(r);return{timestampValue:uu(s.serializer,i)}}if(r instanceof Re){const i=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uu(s.serializer,i)}}if(r instanceof hp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ai)return{bytesValue:Qw(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Jf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof fp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Qf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${qu(r)}`)}(t,e)}function PE(t,e){const n={};return Tw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(t,(r,s)=>{const i=la(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function kE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof hp||t instanceof ai||t instanceof xt||t instanceof dp||t instanceof fp)}function gp(t,e,n){if(!kE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=qu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ch(t,e,n){if((e=Qe(e))instanceof Gu)return e._internalPath;if(typeof e=="string")return yp(t,e);throw hu("Field path arguments must be of type string or ",t,!1,void 0,n)}const Qk=new RegExp("[~\\*/\\[\\]]");function yp(t,e,n){if(e.search(Qk)>=0)throw hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gu(...e.split("."))._internalPath}catch{throw hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new G(V.INVALID_ARGUMENT,l+t+u)}function DE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Yk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Yk extends jE{data(){return super.data()}}function vp(t,e){return typeof e=="string"?yp(t,e):e instanceof Gu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _p{}class Jk extends _p{}function Kt(t,e,...n){let r=[];e instanceof _p&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof wp).length,l=i.filter(u=>u instanceof Qu).length;if(o>1||o>0&&l>0)throw new G(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Qu extends Jk{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qu(e,n,r)}_apply(e){const n=this._parse(e);return bE(e._query,n),new yi(e.firestore,e.converter,vh(e._query,n))}_parse(e){const n=mp(e.firestore);return function(i,o,l,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Xy(m,f);const T=[];for(const I of m)T.push(Yy(u,i,I));g={arrayValue:{values:T}}}else g=Yy(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Xy(m,f),g=Kk(l,o,m,f==="in"||f==="not-in");return Ve.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Et(t,e,n){const r=e,s=vp("where",t);return Qu._create(s,r,n)}class wp extends _p{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)bE(o,u),o=vh(o,u)}(e._query,n),new yi(e.firestore,e.converter,vh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Yy(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new G(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dw(e)&&n.indexOf("/")!==-1)throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!X.isDocumentKey(r))throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vy(t,new X(r))}if(n instanceof xt)return vy(t,n._key);throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qu(n)}.`)}function Xy(t,e){if(!Array.isArray(t)||t.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bE(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Zk{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>je(o.doubleValue));return new fp(i)}convertGeoPoint(e){return new hp(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oo(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);fe(tE(r));const s=new Lo(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||Wn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OE extends jE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Tl extends OE{data(e={}){return super.data(e)}}class t1{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ji(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tl(this._firestore,this._userDataWriter,r.key,r,new Ji(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Tl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ji(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Tl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ji(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:n1(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function n1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t){t=Kn(t,xt);const e=Kn(t.firestore,aa);return Lk(cp(e),t._key).then(n=>r1(e,t,n))}class LE extends Zk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ai(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function tt(t){t=Kn(t,yi);const e=Kn(t.firestore,aa),n=cp(e),r=new LE(e);return Xk(t._query),Vk(n,t._query).then(s=>new t1(e,r,t,s))}function ms(t,e,n){t=Kn(t,xt);const r=Kn(t.firestore,aa),s=e1(t.converter,e);return VE(r,[qk(mp(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,_n.none())])}function _i(t,e,n,...r){t=Kn(t,xt);const s=Kn(t.firestore,aa),i=mp(s);let o;return o=typeof(e=Qe(e))=="string"||e instanceof Gu?Gk(i,"updateDoc",t._key,e,n,r):Wk(i,"updateDoc",t._key,e),VE(s,[o.toMutation(t._key,_n.exists(!0))])}function VE(t,e){return function(r,s){const i=new Un;return r.asyncQueue.enqueueAndForget(async()=>Sk(await Ok(r),s,i)),i.promise}(cp(t),e)}function r1(t,e,n){const r=n.docs.get(e._key),s=new LE(t);return new OE(t,s,e._key,r,new Ji(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){pi=s})(hs),is(new Sr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new aa(new sN(r.getProvider("auth-internal")),new lN(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),gn(fy,"4.7.3",e),gn(fy,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="firebasestorage.googleapis.com",s1="storageBucket",i1=2*60*1e3,o1=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends xn{constructor(e,n,r=0){super(cd(e),`Firebase Storage: ${n} (${cd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tn||(Tn={}));function cd(t){return"storage/"+t}function a1(){const t="An unknown error occurred, please check the error payload for server response.";return new Sn(Tn.UNKNOWN,t)}function l1(){return new Sn(Tn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function u1(){return new Sn(Tn.CANCELED,"User canceled the upload/download.")}function c1(t){return new Sn(Tn.INVALID_URL,"Invalid URL '"+t+"'.")}function d1(t){return new Sn(Tn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Jy(t){return new Sn(Tn.INVALID_ARGUMENT,t)}function UE(){return new Sn(Tn.APP_DELETED,"The Firebase app was deleted.")}function h1(t){return new Sn(Tn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=sn.makeFromUrl(e,n)}catch{return new sn(e,"")}if(r.path==="")return r;throw d1(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(b){b.path_=decodeURIComponent(b.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",T=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),I={bucket:1,path:3},N=n===ME?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",E=new RegExp(`^https?://${N}/${s}/${A}`,"i"),R=[{regex:l,indices:u,postModify:i},{regex:T,indices:I,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let b=0;b<R.length;b++){const L=R[b],M=L.regex.exec(e);if(M){const x=M[L.indices.bucket];let w=M[L.indices.path];w||(w=""),r=new sn(x,w),L.postModify(r);break}}if(r==null)throw c1(e);return r}}class f1{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function f(...A){d||(d=!0,e.apply(null,A))}function m(A){s=setTimeout(()=>{s=null,t(T,u())},A)}function g(){i&&clearTimeout(i)}function T(A,...E){if(d){g();return}if(A){g(),f.call(null,A,...E);return}if(u()||o){g(),f.call(null,A,...E);return}r<64&&(r*=2);let R;l===1?(l=2,R=0):R=(r+Math.random())*1e3,m(R)}let I=!1;function N(A){I||(I=!0,g(),!d&&(s!==null?(A||(l=2),clearTimeout(s),m(0)):A||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,N(!0)},n),N}function m1(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){return t!==void 0}function Zy(t,e,n,r){if(r<e)throw Jy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jy(`Invalid value for '${t}'. Expected ${n} or less.`)}function y1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var fu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fu||(fu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n,r,s,i,o,l,u,d,f,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,I)=>{this.resolve_=T,this.reject_=I,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new tl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===fu.NO_ERROR,u=i.getStatus();if(!l||v1(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===fu.ABORT;r(!1,new tl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new tl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());g1(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=a1();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?UE():u1();o(u)}else{const u=l1();o(u)}};this.canceled_?n(!1,new tl(!1,null,!0)):this.backoffId_=p1(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&m1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function w1(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function E1(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function I1(t,e){e&&(t["X-Firebase-GMPID"]=e)}function T1(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function x1(t,e,n,r,s,i,o=!0){const l=y1(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return I1(d,e),w1(d,n),E1(d,i),T1(d,r),new _1(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function A1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this._service=e,n instanceof sn?this._location=n:this._location=sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new pu(e,n)}get root(){const e=new sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return A1(this._location.path)}get storage(){return this._service}get parent(){const e=S1(this._location.path);if(e===null)return null;const n=new sn(this._location.bucket,e);return new pu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw h1(e)}}function ev(t,e){const n=e==null?void 0:e[s1];return n==null?null:sn.makeFromBucketSpec(n,t)}function R1(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:D0(s,t.app.options.projectId))}class C1{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=ME,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i1,this._maxUploadRetryTime=o1,this._requests=new Set,s!=null?this._bucket=sn.makeFromBucketSpec(s,this._host):this._bucket=ev(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sn.makeFromBucketSpec(this._url,e):this._bucket=ev(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new f1(UE());{const o=x1(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const tv="@firebase/storage",nv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="storage";function N1(t=Nf(),e){t=Qe(t);const r=Du(t,FE).getImmediate({identifier:e}),s=N0("storage");return s&&P1(r,...s),r}function P1(t,e,n,r={}){R1(t,e,n,r)}function k1(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new C1(n,r,s,e,hs)}function D1(){is(new Sr(FE,k1,"PUBLIC").setMultipleInstances(!0)),gn(tv,nv,""),gn(tv,nv,"esm2017")}D1();const j1={apiKey:"AIzaSyCp8nBFXAqFw4uVRCnT1zOTNgj1YI7ceYM",authDomain:"mediapp-3d0db.firebaseapp.com",projectId:"mediapp-3d0db",storageBucket:"mediapp-3d0db.firebasestorage.app",messagingSenderId:"622195451578",appId:"1:622195451578:web:b855761adcc6e98b31c483"},Ep=O0(j1),Yu=eN(Ep),It=Fk(Ep);N1(Ep);var Se=(t=>(t.ADMIN="admin",t.DOCTOR="doctor",t.PATIENT="patient",t))(Se||{}),wi=(t=>(t.PENDING="pending",t.ACTIVE="active",t.SUSPENDED="suspended",t))(wi||{}),Ip=(t=>(t.MALE="male",t.FEMALE="female",t.OTHER="other",t))(Ip||{}),Tp=(t=>(t.A_POSITIVE="A+",t.A_NEGATIVE="A-",t.B_POSITIVE="B+",t.B_NEGATIVE="B-",t.AB_POSITIVE="AB+",t.AB_NEGATIVE="AB-",t.O_POSITIVE="O+",t.O_NEGATIVE="O-",t))(Tp||{}),xp=(t=>(t.SINGLE="single",t.MARRIED="married",t.DIVORCED="divorced",t.WIDOWED="widowed",t))(xp||{}),xl=(t=>(t.CONSULTATION="consultation",t.FOLLOW_UP="follow-up",t.CHECKUP="checkup",t.EMERGENCY="emergency",t))(xl||{}),Be=(t=>(t.SCHEDULED="scheduled",t.CONFIRMED="confirmed",t.COMPLETED="completed",t.CANCELLED="cancelled",t.NO_SHOW="no-show",t))(Be||{}),Sl=(t=>(t.INITIAL="initial",t.FOLLOW_UP="follow-up",t.EMERGENCY="emergency",t.TELEMEDICINE="telemedicine",t))(Sl||{}),BE=(t=>(t.NORMAL="normal",t.HIGH="high",t.LOW="low",t.CRITICAL="critical",t))(BE||{}),zE=(t=>(t.APPOINTMENT="appointment",t.ENCOUNTER="encounter",t.TEST_RESULT="test_result",t.MEDICATION="medication",t.SYMPTOM="symptom",t))(zE||{});const we={USERS:"users",PATIENTS:"patients",DOCTORS:"doctors",APPOINTMENTS:"appointments",ENCOUNTERS:"encounters",TEST_RESULTS:"testResults",TIMELINES:"timelines"},Nr={PATIENT:"PAT",DOCTOR:"DOC",APPOINTMENT:"APT",ENCOUNTER:"ENC",TEST_RESULT:"TST",TIMELINE:"TLN"},b1={APPOINTMENT_DURATION:30},$E={APPOINTMENT:"#FF9800",ENCOUNTER:"#9C27B0",TEST_RESULT:"#2196F3",MEDICATION:"#4CAF50",SYMPTOM:"#F44336"};class O1{constructor(){ws(this,"collectionRef",Wt(It,we.USERS))}async create(e,n){const r=$e(this.collectionRef,e),s=Object.fromEntries(Object.entries(n).filter(([i,o])=>o!==void 0));await ms(r,s)}async findById(e){const n=$e(this.collectionRef,e),r=await vi(n);return r.exists()?r.data():null}async update(e,n){const r=$e(this.collectionRef,e),s=Object.fromEntries(Object.entries(n).filter(([i,o])=>o!==void 0));await _i(r,s)}async findByEmail(e){const n=Kt(this.collectionRef,Et("email","==",e)),r=await tt(n);return r.empty?null:r.docs[0].data()}async findPendingUsers(){const e=Kt(this.collectionRef,Et("status","==",wi.PENDING));return(await tt(e)).docs.map(r=>r.data())}}const Xu=new O1,HE=async(t,e)=>{await Xu.create(t,e)},Sp=async t=>await Xu.findById(t),Ap=async(t,e)=>{await Xu.update(t,e)},L1=async()=>await Xu.findPendingUsers(),Ju=new kn;Ju.setCustomParameters({prompt:"select_account"});Ju.addScope("email");Ju.addScope("profile");const Rp=async t=>{let e=await Sp(t.uid);if(!e){const n={userId:t.uid,email:t.email||"",displayName:t.displayName||"",photoURL:t.photoURL||"",role:Se.PATIENT,status:wi.PENDING,isApproved:!1,createdAt:new Date,updatedAt:new Date};await HE(t.uid,n),e=n}return e},V1=async()=>{try{const t=await uC(Yu,Ju);return await Rp(t.user),t}catch(t){throw(t==null?void 0:t.code)==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):(t==null?void 0:t.code)==="auth/popup-blocked"?new Error("Popup was blocked by browser. Please allow popups and try again."):(console.error("Google sign-in error:",t),t)}},M1=async()=>{try{await $R(Yu)}catch(t){throw console.error("Sign-out error:",t),t}},rv=async()=>{const t=Yu.currentUser;if(!t)return null;try{let e=await Sp(t.uid);return e||(e=await Rp(t)),e}catch(e){return console.error("Error getting current user:",e),{userId:t.uid,email:t.email||"",displayName:t.displayName||"",photoURL:t.photoURL||"",role:Se.PATIENT,status:wi.PENDING,isApproved:!1,createdAt:new Date,updatedAt:new Date}}},U1=t=>zR(Yu,async e=>{if(e)try{const n=await Rp(e);t(n)}catch(n){console.error("Error in onAuthStateChanged:",n),t(null)}else t(null)}),qE=D.createContext(void 0),F1=({children:t})=>{const[e,n]=D.useState(null),[r,s]=D.useState(!0);D.useEffect(()=>{const l=U1(async u=>{if(u){const d=await rv();n(d)}else n(null);s(!1)});return()=>l()},[]);const i=async()=>{s(!0);try{await V1();const l=await rv();n(l)}catch(l){throw console.error("Sign in failed:",l),l}finally{s(!1)}},o=async()=>{s(!0);try{await M1(),n(null)}catch(l){throw console.error("Sign out failed:",l),l}finally{s(!1)}};return c.jsx(qE.Provider,{value:{user:e,loading:r,signIn:i,signOut:o},children:t})},ua=()=>{const t=D.useContext(qE);if(!t)throw new Error("useAuthContext must be used within AuthProvider");return t};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fo(){return Fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fo.apply(this,arguments)}var dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dr||(dr={}));const sv="popstate";function B1(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Nh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:WE(s)}return $1(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function z1(){return Math.random().toString(36).substr(2,8)}function iv(t,e){return{usr:t.state,key:t.key,idx:e}}function Nh(t,e,n,r){return n===void 0&&(n=null),Fo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ei(e):e,{state:n,key:e&&e.key||r||z1()})}function WE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ei(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function $1(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=dr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Fo({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=dr.Pop;let A=f(),E=A==null?null:A-d;d=A,u&&u({action:l,location:N.location,delta:E})}function g(A,E){l=dr.Push;let _=Nh(N.location,A,E);d=f()+1;let R=iv(_,d),b=N.createHref(_);try{o.pushState(R,"",b)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(b)}i&&u&&u({action:l,location:N.location,delta:1})}function T(A,E){l=dr.Replace;let _=Nh(N.location,A,E);d=f();let R=iv(_,d),b=N.createHref(_);o.replaceState(R,"",b),i&&u&&u({action:l,location:N.location,delta:0})}function I(A){let E=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof A=="string"?A:WE(A);return _=_.replace(/ $/,"%20"),Me(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let N={get action(){return l},get location(){return t(s,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(sv,m),u=A,()=>{s.removeEventListener(sv,m),u=null}},createHref(A){return e(s,A)},createURL:I,encodeLocation(A){let E=I(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:T,go(A){return o.go(A)}};return N}var ov;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ov||(ov={}));function H1(t,e,n){return n===void 0&&(n="/"),q1(t,e,n)}function q1(t,e,n,r){let s=typeof e=="string"?Ei(e):e,i=QE(s.pathname||"/",n);if(i==null)return null;let o=GE(t);W1(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=sD(i);l=tD(o[u],d)}return l}function GE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Me(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Zr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Me(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),GE(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Z1(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of KE(i.path))s(i,o,u)}),e}function KE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=KE(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function W1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const G1=/^:[\w-]+$/,K1=3,Q1=2,Y1=1,X1=10,J1=-2,av=t=>t==="*";function Z1(t,e){let n=t.split("/"),r=n.length;return n.some(av)&&(r+=J1),e&&(r+=Q1),n.filter(s=>!av(s)).reduce((s,i)=>s+(G1.test(i)?K1:i===""?Y1:X1),r)}function eD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function tD(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=nD({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Zr([i,m.pathname]),pathnameBase:uD(Zr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Zr([i,m.pathnameBase]))}return o}function nD(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rD(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:T}=f;if(g==="*"){let N=l[m]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const I=l[m];return T&&!I?d[g]=void 0:d[g]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function rD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Cp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function sD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function QE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const iD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oD=t=>iD.test(t);function aD(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ei(t):t,i;if(n)if(oD(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Cp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=lv(n.substring(1),"/"):i=lv(n,e)}else i=e;return{pathname:i,search:cD(r),hash:dD(s)}}function lv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lD(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function YE(t,e){let n=lD(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function XE(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ei(t):(s=Fo({},t),Me(!s.pathname||!s.pathname.includes("?"),dd("?","pathname","search",s)),Me(!s.pathname||!s.pathname.includes("#"),dd("#","pathname","hash",s)),Me(!s.search||!s.search.includes("#"),dd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=aD(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Zr=t=>t.join("/").replace(/\/\/+/g,"/"),uD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const JE=["post","put","patch","delete"];new Set(JE);const fD=["get",...JE];new Set(fD);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bo(){return Bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bo.apply(this,arguments)}const Np=D.createContext(null),pD=D.createContext(null),ca=D.createContext(null),Zu=D.createContext(null),Lr=D.createContext({outlet:null,matches:[],isDataRoute:!1}),ZE=D.createContext(null);function da(){return D.useContext(Zu)!=null}function ec(){return da()||Me(!1),D.useContext(Zu).location}function eI(t){D.useContext(ca).static||D.useLayoutEffect(t)}function Ue(){let{isDataRoute:t}=D.useContext(Lr);return t?CD():mD()}function mD(){da()||Me(!1);let t=D.useContext(Np),{basename:e,future:n,navigator:r}=D.useContext(ca),{matches:s}=D.useContext(Lr),{pathname:i}=ec(),o=JSON.stringify(YE(s,n.v7_relativeSplatPath)),l=D.useRef(!1);return eI(()=>{l.current=!0}),D.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=XE(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Zr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,i,t])}function gD(){let{matches:t}=D.useContext(Lr),e=t[t.length-1];return e?e.params:{}}function yD(t,e){return vD(t,e)}function vD(t,e,n,r){da()||Me(!1);let{navigator:s}=D.useContext(ca),{matches:i}=D.useContext(Lr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=ec(),f;if(e){var m;let A=typeof e=="string"?Ei(e):e;u==="/"||(m=A.pathname)!=null&&m.startsWith(u)||Me(!1),f=A}else f=d;let g=f.pathname||"/",T=g;if(u!=="/"){let A=u.replace(/^\//,"").split("/");T="/"+g.replace(/^\//,"").split("/").slice(A.length).join("/")}let I=H1(t,{pathname:T}),N=TD(I&&I.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:Zr([u,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:Zr([u,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&N?D.createElement(Zu.Provider,{value:{location:Bo({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:dr.Pop}},N):N}function _D(){let t=RD(),e=hD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const wD=D.createElement(_D,null);class ED extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Lr.Provider,{value:this.props.routeContext},D.createElement(ZE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ID(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(Np);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Lr.Provider,{value:e},r)}function TD(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Me(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:T}=n,I=m.route.loader&&g[m.route.id]===void 0&&(!T||T[m.route.id]===void 0);if(m.route.lazy||I){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let T,I=!1,N=null,A=null;n&&(T=l&&m.route.id?l[m.route.id]:void 0,N=m.route.errorElement||wD,u&&(d<0&&g===0?(ND("route-fallback"),I=!0,A=null):d===g&&(I=!0,A=m.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),_=()=>{let R;return T?R=N:I?R=A:m.route.Component?R=D.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=f,D.createElement(ID,{match:m,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:R})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?D.createElement(ED,{location:n.location,revalidation:n.revalidation,component:N,error:T,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var tI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(tI||{}),nI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(nI||{});function xD(t){let e=D.useContext(Np);return e||Me(!1),e}function SD(t){let e=D.useContext(pD);return e||Me(!1),e}function AD(t){let e=D.useContext(Lr);return e||Me(!1),e}function rI(t){let e=AD(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function RD(){var t;let e=D.useContext(ZE),n=SD(),r=rI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function CD(){let{router:t}=xD(tI.UseNavigateStable),e=rI(nI.UseNavigateStable),n=D.useRef(!1);return eI(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Bo({fromRouteId:e},i)))},[t,e])}const uv={};function ND(t,e,n){uv[t]||(uv[t]=!0)}function PD(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function zo(t){let{to:e,replace:n,state:r,relative:s}=t;da()||Me(!1);let{future:i,static:o}=D.useContext(ca),{matches:l}=D.useContext(Lr),{pathname:u}=ec(),d=Ue(),f=XE(e,YE(l,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return D.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function xe(t){Me(!1)}function kD(t){let{basename:e="/",children:n=null,location:r,navigationType:s=dr.Pop,navigator:i,static:o=!1,future:l}=t;da()&&Me(!1);let u=e.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:u,navigator:i,static:o,future:Bo({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=Ei(r));let{pathname:f="/",search:m="",hash:g="",state:T=null,key:I="default"}=r,N=D.useMemo(()=>{let A=QE(f,u);return A==null?null:{location:{pathname:A,search:m,hash:g,state:T,key:I},navigationType:s}},[u,f,m,g,T,I,s]);return N==null?null:D.createElement(ca.Provider,{value:d},D.createElement(Zu.Provider,{children:n,value:N}))}function DD(t){let{children:e,location:n}=t;return yD(Ph(e),n)}new Promise(()=>{});function Ph(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,Ph(r.props.children,i));return}r.type!==xe&&Me(!1),!r.props.index||!r.props.children||Me(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ph(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function jD(t,e){let n=kh(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const bD="6";try{window.__reactRouterVersion=bD}catch{}const OD="startTransition",cv=dT[OD];function LD(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=B1({window:s,v5Compat:!0}));let o=i.current,[l,u]=D.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=D.useCallback(m=>{d&&cv?cv(()=>u(m)):u(m)},[u,d]);return D.useLayoutEffect(()=>o.listen(f),[o,f]),D.useEffect(()=>PD(r),[r]),D.createElement(kD,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var dv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dv||(dv={}));var hv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hv||(hv={}));function sI(t){let e=D.useRef(kh(t)),n=D.useRef(!1),r=ec(),s=D.useMemo(()=>jD(r.search,n.current?null:e.current),[r.search]),i=Ue(),o=D.useCallback((l,u)=>{const d=kh(typeof l=="function"?l(s):l);n.current=!0,i("?"+d,u)},[i,s]);return[s,o]}function jt(){return ua()}const He=({size:t=24,message:e})=>c.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[c.jsxs("svg",{className:"animate-spin text-blue-600",width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),e&&c.jsx("span",{className:"mt-2 text-gray-700",children:e})]}),H=({children:t,onClick:e,variant:n="primary",disabled:r=!1,type:s="button",className:i=""})=>{const o="px-4 py-2 rounded font-semibold focus:outline-none transition-colors",l={primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700"};return c.jsx("button",{type:s,onClick:e,disabled:r,className:`${o} ${l[n]} ${r?"opacity-50 cursor-not-allowed":""} ${i}`,children:t})},Q=({children:t,title:e,className:n=""})=>c.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow ${n}`,children:[e&&c.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:c.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:e})}),c.jsx("div",{className:e?"p-6":"",children:t})]}),VD=()=>{const{signIn:t,user:e,loading:n}=jt(),[r,s]=D.useState(null),i=Ue(),o=async()=>{s(null);try{await t(),(e==null?void 0:e.role)===Se.ADMIN?i("/admin/dashboard"):(e==null?void 0:e.role)===Se.DOCTOR?i("/doctor/dashboard"):(e==null?void 0:e.role)===Se.PATIENT?i("/patient/dashboard"):i("/")}catch(l){s(l.message||"Login failed. Try again.")}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs(Q,{className:"w-full max-w-sm p-6 space-y-6 shadow-lg",children:[c.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 dark:text-gray-100",children:"Welcome Back"}),c.jsx("p",{className:"text-center text-gray-500 dark:text-gray-300",children:"Sign in to continue"}),n?c.jsx("div",{className:"flex justify-center",children:c.jsx(He,{size:48,message:"Signing in..."})}):c.jsx(H,{onClick:o,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Sign in with Google"}),r&&c.jsx("p",{className:"text-red-500 text-center",children:r})]})})};class MD{async create(e,n,r){const s=$e(It,we.USERS,e,we.PATIENTS,n);await ms(s,r)}async findById(e,n){const r=$e(It,we.USERS,n,we.PATIENTS,e),s=await vi(r);return s.exists()?s.data():null}async update(e,n,r){const s=$e(It,we.USERS,n,we.PATIENTS,e);await _i(s,r)}async findByDoctor(e){const n=Wt(It,we.USERS),r=[],s=await tt(n);for(const i of s.docs){const o=Wt(i.ref,we.PATIENTS),l=Kt(o,Et("assignedDoctorId","==",e));(await tt(l)).forEach(d=>r.push(d.data()))}return r}async findAll(){const e=Wt(It,we.USERS),n=[],r=await tt(e);for(const s of r.docs){const i=Wt(s.ref,we.PATIENTS);(await tt(i)).forEach(l=>n.push(l.data()))}return n}async existsByUserId(e){const n=Wt(It,we.USERS,e,we.PATIENTS);return!(await tt(n)).empty}}const ha=new MD,UD=async(t,e,n)=>{await ha.create(t,e,n)},FD=async(t,e)=>await ha.findById(t,e),iI=async(t,e,n)=>{await ha.update(t,e,n)},BD=async t=>await ha.findByDoctor(t),zD=async t=>await ha.existsByUserId(t);function Pr(t){const e=Date.now(),n=Math.floor(Math.random()*900+100);return`${t}${e}${n}`}const $D=async(t,e)=>{const n=Pr(Nr.PATIENT),r={...e,patientId:n,userId:t,isActive:!0,createdAt:new Date,updatedAt:new Date};return await UD(t,n,r),r},HD=async(t,e)=>{const n=await FD(t,e||"");return!n||e&&n.userId!==e?null:n},qD=async(t,e)=>{await iI(t,userId||"",{...e,updatedAt:new Date})},WD=async t=>await BD(t),GD=async(t,e,n)=>{await iI(t,n||"",{assignedDoctorId:e,updatedAt:new Date})},KD=async t=>await zD(t),kr={createPatient:$D,getPatient:HD,updatePatient:qD,getPatientsByDoctor:WD,assignDoctor:GD,patientExists:KD},$=({label:t,type:e="text",value:n,onChange:r,error:s,placeholder:i,required:o=!1,options:l})=>c.jsxs("div",{className:"flex flex-col mb-4",children:[t&&c.jsxs("label",{className:"mb-1 font-medium",children:[t," ",o&&c.jsx("span",{className:"text-red-500",children:"*"})]}),e==="select"&&l?c.jsxs("select",{value:n,onChange:u=>r(u.target.value),className:`border rounded px-3 py-2 focus:outline-none focus:ring ${s?"border-red-500":"border-gray-300"}`,children:[c.jsx("option",{value:"",children:"Select..."}),l.map(u=>c.jsx("option",{value:u,children:u},u))]}):c.jsx("input",{type:e,value:n,placeholder:i,onChange:u=>r(u.target.value),className:`border rounded px-3 py-2 focus:outline-none focus:ring ${s?"border-red-500":"border-gray-300"}`}),s&&c.jsx("span",{className:"text-red-500 text-sm mt-1",children:s})]}),QD=({userId:t,onSuccess:e})=>{var N,A,E,_,R,b,L,M,x,w,S,C,k,P,v,te,me,bt,qe,B,Y,J,pe,de;const[n,r]=D.useState(0),[s,i]=D.useState(!1),[o,l]=D.useState(null),[u,d]=D.useState({}),f=(q,Ye,Jt)=>{d($t=>({...$t,[q]:{...$t[q]||{},[Ye]:Jt}}))},m=()=>r(q=>q+1),g=()=>r(q=>q-1),T=async()=>{i(!0),l(null);try{await kr.createPatient(t,u),e==null||e()}catch(q){l(q.message||"Failed to register patient")}finally{i(!1)}},I=[c.jsxs("div",{children:[c.jsx($,{label:"First Name",value:((N=u.personalInfo)==null?void 0:N.firstName)||"",onChange:q=>f("personalInfo","firstName",q),required:!0}),c.jsx($,{label:"Last Name",value:((A=u.personalInfo)==null?void 0:A.lastName)||"",onChange:q=>f("personalInfo","lastName",q),required:!0}),c.jsx($,{label:"Date of Birth",type:"date",value:(E=u.personalInfo)!=null&&E.dateOfBirth?new Date(u.personalInfo.dateOfBirth).toISOString().split("T")[0]:"",onChange:q=>f("personalInfo","dateOfBirth",q?new Date(q):void 0),required:!0}),c.jsx($,{label:"Gender",type:"select",value:((_=u.personalInfo)==null?void 0:_.gender)||"",onChange:q=>f("personalInfo","gender",q),options:Object.values(Ip),required:!0}),c.jsx($,{label:"Blood Type",type:"select",value:((R=u.personalInfo)==null?void 0:R.bloodType)||"",onChange:q=>f("personalInfo","bloodType",q),options:Object.values(Tp)}),c.jsx($,{label:"Marital Status",type:"select",value:((b=u.personalInfo)==null?void 0:b.maritalStatus)||"",onChange:q=>f("personalInfo","maritalStatus",q),options:Object.values(xp)})]},"personal"),c.jsxs("div",{children:[c.jsx($,{label:"Primary Phone",value:((L=u.contactInfo)==null?void 0:L.primaryPhone)||"",onChange:q=>f("contactInfo","primaryPhone",q),required:!0}),c.jsx($,{label:"Secondary Phone",value:((M=u.contactInfo)==null?void 0:M.secondaryPhone)||"",onChange:q=>f("contactInfo","secondaryPhone",q)}),c.jsx($,{label:"Email",value:((x=u.contactInfo)==null?void 0:x.email)||"",onChange:q=>f("contactInfo","email",q)}),c.jsx($,{label:"Address",value:((w=u.contactInfo)==null?void 0:w.address)||"",onChange:q=>f("contactInfo","address",q)})]},"contact"),c.jsxs("div",{children:[c.jsx($,{label:"Name",value:((S=u.emergencyContact)==null?void 0:S.name)||"",onChange:q=>f("emergencyContact","name",q)}),c.jsx($,{label:"Phone",value:((C=u.emergencyContact)==null?void 0:C.phone)||"",onChange:q=>f("emergencyContact","phone",q)}),c.jsx($,{label:"Relation",value:((k=u.emergencyContact)==null?void 0:k.relationship)||"",onChange:q=>f("emergencyContact","relationship",q)})]},"emergency"),c.jsxs("div",{children:[c.jsx($,{label:"Allergies",value:((v=(P=u.medicalInfo)==null?void 0:P.allergies)==null?void 0:v.join(", "))||"",onChange:q=>f("medicalInfo","allergies",q.split(",").map(Ye=>Ye.trim()))}),c.jsx($,{label:"Current Medications",value:((me=(te=u.medicalInfo)==null?void 0:te.currentMedications)==null?void 0:me.join(", "))||"",onChange:q=>f("medicalInfo","currentMedications",q.split(",").map(Ye=>Ye.trim()))}),c.jsx($,{label:"Medical History",value:((qe=(bt=u.medicalInfo)==null?void 0:bt.medicalHistory)==null?void 0:qe.join(", "))||"",onChange:q=>f("medicalInfo","medicalHistory",q.split(",").map(Ye=>Ye.trim()))})]},"medical"),c.jsxs("div",{children:[c.jsx($,{label:"Insurance Info",value:((B=u.insuranceInfo)==null?void 0:B.provider)||"",onChange:q=>f("insuranceInfo","provider",q)}),c.jsx($,{label:"Pharmacy Info",value:((Y=u.pharmacyInfo)==null?void 0:Y.pharmacyName)||"",onChange:q=>f("pharmacyInfo","pharmacyName",q)})]},"insurance"),c.jsxs("div",{children:[c.jsx($,{label:"Guardian Name",value:((J=u.guardianInfo)==null?void 0:J.name)||"",onChange:q=>f("guardianInfo","name",q)}),c.jsx($,{label:"Guardian Phone",value:((pe=u.guardianInfo)==null?void 0:pe.phone)||"",onChange:q=>f("guardianInfo","phone",q)}),c.jsx($,{label:"Guardian Relation",value:((de=u.guardianInfo)==null?void 0:de.relationship)||"",onChange:q=>f("guardianInfo","relationship",q)})]},"guardian")];return c.jsxs("form",{className:"space-y-4",children:[I[n],o&&c.jsx("p",{className:"text-red-500",children:o}),c.jsxs("div",{className:"flex space-x-2",children:[n>0&&c.jsx(H,{onClick:g,children:"Previous"}),n<I.length-1?c.jsx(H,{onClick:m,children:"Next"}):c.jsx(H,{onClick:T,disabled:s,children:s?"Submitting...":"Submit"})]})]})},YD=()=>{const{user:t}=ua(),[e,n]=D.useState(!1);return t?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs(Q,{className:"w-full max-w-lg p-6 shadow-lg",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Patient Registration"}),e&&c.jsx("div",{className:"text-green-600 text-center mb-4",children:"Registration successful! Your account is pending approval."}),!e&&c.jsx(QD,{userId:t.userId,onSuccess:()=>n(!0)}),e&&c.jsx("div",{className:"flex justify-center mt-4",children:c.jsx(H,{onClick:()=>n(!1),children:"Register Another Patient"})})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs(Q,{className:"w-full max-w-lg p-6 shadow-lg",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Patient Registration"}),c.jsx("p",{className:"text-red-500 text-center",children:"Please sign in to register as a patient."})]})})},XD=()=>{const{user:t}=ua(),e=Ue(),[n,r]=D.useState(0),[s,i]=D.useState(!1),[o,l]=D.useState(!0),[u,d]=D.useState(null),[f,m]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t)try{const te=await kr.patientExists(t.userId);m(te)}catch(te){console.error("Error checking patient existence:",te)}finally{l(!1)}})()},[t]);const[g,T]=D.useState({firstName:"",lastName:"",middleName:"",dateOfBirth:"",gender:"",bloodType:"",maritalStatus:"",occupation:"",nationality:""}),[I,N]=D.useState({primaryPhone:"",secondaryPhone:"",email:(t==null?void 0:t.email)||"",address:{street:"",city:"",state:"",zipCode:"",country:""}}),[A,E]=D.useState({name:"",relationship:"",phone:"",email:""}),[_,R]=D.useState({pastMedicalHistory:"",pastSurgicalHistory:"",allergies:"",familyHistory:"",currentMedications:"",otherRelevantHistory:""});if(!t)return c.jsx(zo,{to:"/login",replace:!0});if(o)return c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading..."})});if(f)return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs(Q,{className:"w-full max-w-lg p-6 shadow-lg text-center",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100",children:"Registration Complete"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Your registration has been submitted successfully."}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Your account is pending admin approval. Please wait for approval before accessing the system."}),c.jsx(H,{onClick:()=>e("/login"),children:"Back to Login"})]})});const b=(v,te)=>{T(me=>({...me,[v]:te}))},L=(v,te)=>{if(v.includes(".")){const[me,bt]=v.split(".");N(qe=>({...qe,[me]:{...qe[me],[bt]:te}}))}else N(me=>({...me,[v]:te}))},M=(v,te)=>{E(me=>({...me,[v]:te}))},x=(v,te)=>{R(me=>({...me,[v]:te}))},w=()=>g.firstName.trim()?g.lastName.trim()?g.dateOfBirth?g.gender?I.primaryPhone.trim()?(d(null),!0):(d("Primary phone is required"),!1):(d("Gender is required"),!1):(d("Date of birth is required"),!1):(d("Last name is required"),!1):(d("First name is required"),!1),S=()=>{n===0&&!w()||(r(v=>v+1),d(null))},C=()=>{r(v=>v-1),d(null)},k=async()=>{i(!0),d(null);try{const v={personalInfo:{firstName:g.firstName.trim(),lastName:g.lastName.trim(),middleName:g.middleName.trim()||void 0,dateOfBirth:new Date(g.dateOfBirth),gender:g.gender,bloodType:g.bloodType?g.bloodType:void 0,maritalStatus:g.maritalStatus?g.maritalStatus:void 0,occupation:g.occupation.trim()||void 0,nationality:g.nationality.trim()||void 0},contactInfo:{primaryPhone:I.primaryPhone.trim(),secondaryPhone:I.secondaryPhone.trim()||void 0,email:I.email.trim()||void 0,address:I.address.street.trim()?{street:I.address.street.trim(),city:I.address.city.trim(),state:I.address.state.trim(),zipCode:I.address.zipCode.trim(),country:I.address.country.trim()}:void 0},emergencyContact:A.name.trim()||A.phone.trim()?{name:A.name.trim(),relationship:A.relationship.trim(),phone:A.phone.trim()}:void 0,medicalInfo:{allergies:_.allergies.trim()?_.allergies.split(",").map(te=>te.trim()).filter(Boolean).map(te=>({name:te,severity:"mild"})):[],currentMedications:_.currentMedications.trim()?_.currentMedications.split(",").map(te=>te.trim()).filter(Boolean):[],medicalHistory:_.pastMedicalHistory.trim()?_.pastMedicalHistory.split(",").map(te=>te.trim()).filter(Boolean):[],surgicalHistory:_.pastSurgicalHistory.trim()?_.pastSurgicalHistory.split(",").map(te=>te.trim()).filter(Boolean):[],familyHistory:_.familyHistory.trim()?_.familyHistory.split(",").map(te=>te.trim()).filter(Boolean):[],socialHistory:{}},isActive:!0,createdBy:t.userId};await kr.createPatient(t.userId,v),alert("Registration submitted successfully! Your account is pending admin approval."),e("/login")}catch(v){d(v.message||"Failed to submit registration. Please try again.")}finally{i(!1)}},P=[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Personal Information"}),c.jsx($,{label:"First Name",value:g.firstName,onChange:v=>b("firstName",v),required:!0}),c.jsx($,{label:"Last Name",value:g.lastName,onChange:v=>b("lastName",v),required:!0}),c.jsx($,{label:"Middle Name (Optional)",value:g.middleName,onChange:v=>b("middleName",v)}),c.jsx($,{label:"Date of Birth",type:"date",value:g.dateOfBirth,onChange:v=>b("dateOfBirth",v),required:!0}),c.jsx($,{label:"Gender",type:"select",value:g.gender,onChange:v=>b("gender",v),options:Object.values(Ip),required:!0}),c.jsx($,{label:"Blood Type (Optional)",type:"select",value:g.bloodType,onChange:v=>b("bloodType",v),options:Object.values(Tp)}),c.jsx($,{label:"Marital Status (Optional)",type:"select",value:g.maritalStatus,onChange:v=>b("maritalStatus",v),options:Object.values(xp)}),c.jsx($,{label:"Occupation (Optional)",value:g.occupation,onChange:v=>b("occupation",v)}),c.jsx($,{label:"Nationality (Optional)",value:g.nationality,onChange:v=>b("nationality",v)})]},"personal"),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Information"}),c.jsx($,{label:"Primary Phone",value:I.primaryPhone,onChange:v=>L("primaryPhone",v),required:!0}),c.jsx($,{label:"Secondary Phone (Optional)",value:I.secondaryPhone,onChange:v=>L("secondaryPhone",v)}),c.jsx($,{label:"Email",type:"email",value:I.email,onChange:v=>L("email",v)}),c.jsx($,{label:"Street Address (Optional)",value:I.address.street,onChange:v=>L("address.street",v)}),c.jsx($,{label:"City (Optional)",value:I.address.city,onChange:v=>L("address.city",v)}),c.jsx($,{label:"State (Optional)",value:I.address.state,onChange:v=>L("address.state",v)}),c.jsx($,{label:"Zip Code (Optional)",value:I.address.zipCode,onChange:v=>L("address.zipCode",v)}),c.jsx($,{label:"Country (Optional)",value:I.address.country,onChange:v=>L("address.country",v)}),c.jsx("h3",{className:"text-lg font-semibold mt-6 mb-2",children:"Emergency Contact (Optional)"}),c.jsx($,{label:"Name",value:A.name,onChange:v=>M("name",v)}),c.jsx($,{label:"Relationship",value:A.relationship,onChange:v=>M("relationship",v)}),c.jsx($,{label:"Phone",value:A.phone,onChange:v=>M("phone",v)})]},"contact"),c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Medical Information"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"All fields below are optional. Please provide any relevant medical information."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block mb-2 font-medium",children:["Past Medical History",c.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"List any past or current medical conditions (e.g., Diabetes, Hypertension, Asthma). Separate multiple conditions with commas."})]}),c.jsx("textarea",{value:_.pastMedicalHistory,onChange:v=>x("pastMedicalHistory",v.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring border-gray-300 min-h-[100px]",placeholder:"e.g., Diabetes Type 2, Hypertension"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block mb-2 font-medium",children:["Past Surgical History",c.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"List any past surgeries or procedures you have undergone. Include the date if known. Separate multiple entries with commas."})]}),c.jsx("textarea",{value:_.pastSurgicalHistory,onChange:v=>x("pastSurgicalHistory",v.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring border-gray-300 min-h-[100px]",placeholder:"e.g., Appendectomy (2010), Knee Surgery (2015)"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block mb-2 font-medium",children:["Allergies",c.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"List any known allergies (medications, food, environmental, etc.). Include the severity if known. Separate multiple allergies with commas."})]}),c.jsx("textarea",{value:_.allergies,onChange:v=>x("allergies",v.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring border-gray-300 min-h-[100px]",placeholder:"e.g., Penicillin (severe), Peanuts (moderate)"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block mb-2 font-medium",children:["Family History",c.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"List any medical conditions that run in your family (e.g., Heart disease, Diabetes, Cancer). Include the relation if known. Separate multiple entries with commas."})]}),c.jsx("textarea",{value:_.familyHistory,onChange:v=>x("familyHistory",v.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring border-gray-300 min-h-[100px]",placeholder:"e.g., Heart disease (Father), Diabetes (Mother)"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block mb-2 font-medium",children:["Current Medications",c.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"List all medications you are currently taking, including dosage if known. Separate multiple medications with commas."})]}),c.jsx("textarea",{value:_.currentMedications,onChange:v=>x("currentMedications",v.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring border-gray-300 min-h-[100px]",placeholder:"e.g., Metformin 500mg twice daily, Lisinopril 10mg once daily"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block mb-2 font-medium",children:["Any Other Relevant History",c.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"Include any other relevant medical information, lifestyle factors, or health concerns that may be important for your care."})]}),c.jsx("textarea",{value:_.otherRelevantHistory,onChange:v=>x("otherRelevantHistory",v.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring border-gray-300 min-h-[100px]",placeholder:"e.g., Smoking history, exercise habits, dietary restrictions"})]})]})]},"medical")];return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs(Q,{className:"w-full max-w-2xl p-6 shadow-lg",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"Patient Registration"}),c.jsx("div",{className:"flex items-center space-x-2 mb-4",children:[0,1,2].map(v=>c.jsxs(Ho.Fragment,{children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n===v?"bg-blue-600 text-white":n>v?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:v+1}),v<2&&c.jsx("div",{className:`flex-1 h-1 ${n>v?"bg-green-500":"bg-gray-300"}`})]},v))}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Step ",n+1," of ",P.length]})]}),u&&c.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900 border border-red-400 text-red-700 dark:text-red-300 rounded",children:u}),c.jsx("div",{className:"mb-6",children:P[n]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(H,{onClick:C,disabled:n===0||s,variant:"secondary",children:"Previous"}),n<P.length-1?c.jsx(H,{onClick:S,disabled:s,children:"Next"}):c.jsx(H,{onClick:k,disabled:s,children:s?c.jsxs("span",{className:"flex items-center",children:[c.jsx(He,{size:20,className:"mr-2"}),"Submitting..."]}):"Submit"})]})]})})};class JD{async create(e,n,r){const s=$e(It,we.USERS,e,we.DOCTORS,n);await ms(s,r)}async findById(e,n){const r=$e(It,we.USERS,n,we.DOCTORS,e),s=await vi(r);return s.exists()?s.data():null}async update(e,n,r){const s=$e(It,we.USERS,n,we.DOCTORS,e);await _i(s,r)}async findAll(){const e=Wt(It,we.USERS),n=[],r=await tt(e);for(const s of r.docs){const i=Wt(s.ref,we.DOCTORS);(await tt(i)).forEach(l=>n.push(l.data()))}return n}}const tc=new JD,ZD=async(t,e,n)=>{await tc.create(t,e,n)},ej=async(t,e)=>await tc.findById(t,e),tj=async(t,e,n)=>{await tc.update(t,e,n)},nj=async()=>await tc.findAll(),rj=async(t,e)=>{const n=Pr(Nr.DOCTOR),r={...e,doctorId:n,userId:t,isActive:!0,createdAt:new Date,updatedAt:new Date};return await ZD(t,n,r),r},sj=async t=>await ej(t,""),ij=async(t,e)=>{await tj(t,"",{...e,updatedAt:new Date})},oj=async()=>await nj(),aj=async(t,e)=>{await doctorRepository.update(t,{availability:e,updatedAt:new Date})},nc={createDoctor:rj,getDoctor:sj,updateDoctor:ij,getDoctors:oj,updateAvailability:aj},lj=({userId:t,onSuccess:e})=>{var f,m,g,T,I,N,A,E,_,R,b,L,M,x,w,S,C,k;const[n,r]=D.useState(!1),[s,i]=D.useState(null),[o,l]=D.useState({professionalInfo:{},contactInfo:{},practiceInfo:{},availability:{workingDays:[],workingHours:{start:"",end:""},timeSlots:[],timeZone:""}}),u=(P,v,te)=>{l(me=>({...me,[P]:{...me[P]||{},[v]:te}}))},d=async()=>{r(!0),i(null);try{await nc.createDoctor(t,o),e==null||e()}catch(P){i(P.message||"Failed to register doctor")}finally{r(!1)}};return c.jsxs("form",{className:"space-y-4",children:[c.jsx("h2",{children:"Professional Info"}),c.jsx($,{label:"First Name",value:((f=o.professionalInfo)==null?void 0:f.firstName)||"",onChange:P=>u("professionalInfo","firstName",P.target.value),required:!0}),c.jsx($,{label:"Last Name",value:((m=o.professionalInfo)==null?void 0:m.lastName)||"",onChange:P=>u("professionalInfo","lastName",P.target.value),required:!0}),c.jsx($,{label:"Title",value:((g=o.professionalInfo)==null?void 0:g.title)||"",onChange:P=>u("professionalInfo","title",P.target.value)}),c.jsx($,{label:"Specialization",value:((T=o.professionalInfo)==null?void 0:T.specialization)||"",onChange:P=>u("professionalInfo","specialization",P.target.value)}),c.jsx($,{label:"Qualifications (comma separated)",value:((N=(I=o.professionalInfo)==null?void 0:I.qualifications)==null?void 0:N.join(", "))||"",onChange:P=>u("professionalInfo","qualifications",P.target.value.split(",").map(v=>v.trim()))}),c.jsx($,{label:"License Number",value:((A=o.professionalInfo)==null?void 0:A.licenseNumber)||"",onChange:P=>u("professionalInfo","licenseNumber",P.target.value)}),c.jsx($,{label:"License Expiry",type:"date",value:((E=o.professionalInfo)==null?void 0:E.licenseExpiry)||"",onChange:P=>u("professionalInfo","licenseExpiry",P.target.value)}),c.jsx("h2",{children:"Practice Info"}),c.jsx($,{label:"Clinic Name",value:((_=o.practiceInfo)==null?void 0:_.clinicName)||"",onChange:P=>u("practiceInfo","clinicName",P.target.value)}),c.jsx($,{label:"Clinic Address",value:((R=o.practiceInfo)==null?void 0:R.clinicAddress)||"",onChange:P=>u("practiceInfo","clinicAddress",P.target.value)}),c.jsx($,{label:"Consultation Fee",type:"number",value:((b=o.practiceInfo)==null?void 0:b.consultationFee)||"",onChange:P=>u("practiceInfo","consultationFee",P.target.value)}),c.jsx($,{label:"Currency",value:((L=o.practiceInfo)==null?void 0:L.currency)||"USD",onChange:P=>u("practiceInfo","currency",P.target.value)}),c.jsx("h2",{children:"Availability"}),c.jsx($,{label:"Working Days (select multiple comma separated)",value:((x=(M=o.availability)==null?void 0:M.workingDays)==null?void 0:x.join(", "))||"",onChange:P=>u("availability","workingDays",P.target.value.split(",").map(v=>v.trim()))}),c.jsx($,{label:"Working Hours",value:((w=o.availability)==null?void 0:w.workingHours)||"",onChange:P=>u("availability","workingHours",P.target.value)}),c.jsx($,{label:"Time Slots (comma separated)",value:((C=(S=o.availability)==null?void 0:S.timeSlots)==null?void 0:C.join(", "))||"",onChange:P=>u("availability","timeSlots",P.target.value.split(",").map(v=>v.trim()))}),c.jsx($,{label:"Time Zone",value:((k=o.availability)==null?void 0:k.timeZone)||"",onChange:P=>u("availability","timeZone",P.target.value)}),s&&c.jsx("p",{className:"text-red-500",children:s}),c.jsx(H,{onClick:d,disabled:n,children:n?"Submitting...":"Submit"})]})},uj=()=>{const{user:t}=ua(),[e,n]=D.useState(!1);return t?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs(Q,{className:"w-full max-w-lg p-6 shadow-lg",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Doctor Registration"}),e&&c.jsx("div",{className:"text-green-600 text-center mb-4",children:"Registration successful! Your account is pending approval."}),!e&&c.jsx(lj,{userId:t.userId,onSuccess:()=>n(!0)}),e&&c.jsx("div",{className:"flex justify-center mt-4",children:c.jsx(H,{onClick:()=>n(!1),children:"Register Another Doctor"})})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs(Q,{className:"w-full max-w-lg p-6 shadow-lg",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Doctor Registration"}),c.jsx("p",{className:"text-red-500 text-center",children:"Please sign in to register as a doctor."})]})})};class cj{constructor(){ws(this,"collectionRef",Wt(It,we.APPOINTMENTS))}async create(e,n){const r=$e(this.collectionRef,e);await ms(r,n)}async findById(e){const n=$e(this.collectionRef,e),r=await vi(n);return r.exists()?r.data():null}async update(e,n){const r=$e(this.collectionRef,e);await _i(r,n)}async findByPatient(e){const n=Kt(this.collectionRef,Et("patientId","==",e));return(await tt(n)).docs.map(s=>s.data())}async findByDoctor(e,n,r){let s=Kt(this.collectionRef,Et("doctorId","==",e));return n&&r&&(s=Kt(this.collectionRef,Et("doctorId","==",e),Et("dateTime",">=",Re.fromDate(n)),Et("dateTime","<=",Re.fromDate(r)))),(await tt(s)).docs.map(o=>o.data())}async findByDateRange(e,n){const r=Kt(this.collectionRef,Et("dateTime",">=",Re.fromDate(e)),Et("dateTime","<=",Re.fromDate(n)));return(await tt(r)).docs.map(i=>i.data())}}const fa=new cj,dj=async(t,e)=>{await fa.create(t,e)},hj=async t=>await fa.findById(t),oI=async(t,e)=>{await fa.update(t,e)},fj=async t=>await fa.findByPatient(t),pj=async(t,e,n)=>await fa.findByDoctor(t,e,n),mj=async t=>{const e=Pr(Nr.APPOINTMENT),n={...t,appointmentId:e,createdAt:new Date,updatedAt:new Date};return await dj(e,n),n},gj=async t=>await hj(t),yj=async(t,e)=>{await oI(t,{...e,updatedAt:new Date})},vj=async(t,e)=>{await oI(t,{status:Be.CANCELLED,cancellationReason:e,cancelledAt:new Date,updatedAt:new Date})},_j=async t=>await fj(t),aI=async(t,e,n)=>await pj(t,e,n),wj=async(t,e,n)=>{const r=await aI(t),s=e.getTime(),i=s+n*60*1e3;for(const o of r){const l=o.dateTime.getTime(),u=o.duration??b1.APPOINTMENT_DURATION,d=l+u*60*1e3;if(s<d&&i>l)return!1}return!0},li={createAppointment:mj,getAppointment:gj,updateAppointment:yj,cancelAppointment:vj,getAppointmentsByPatient:_j,getAppointmentsByDoctor:aI,checkAvailability:wj};class Ej{constructor(){ws(this,"collectionRef",Wt(It,we.TEST_RESULTS))}async create(e,n){const r=$e(this.collectionRef,e);await ms(r,n)}async findById(e){const n=$e(this.collectionRef,e),r=await vi(n);return r.exists()?r.data():null}async update(e,n){const r=$e(this.collectionRef,e);await _i(r,n)}async findByPatient(e){const n=Kt(this.collectionRef,Et("patientId","==",e));return(await tt(n)).docs.map(s=>s.data())}async findByDoctor(e){const n=Kt(this.collectionRef,Et("doctorId","==",e));return(await tt(n)).docs.map(s=>s.data())}}const rc=new Ej,Ij=async(t,e)=>{await rc.create(t,e)},Tj=async t=>await rc.findById(t),xj=async(t,e)=>{await rc.update(t,e)},Sj=async t=>await rc.findByPatient(t),Aj=async(t,e,n)=>{const r=Pr(Nr.TEST_RESULT),s={testResultId:r,patientId:t,doctorId:"",fileInfo:{...e},testInfo:n,extractedData:{isExtracted:!1,extractionDate:void 0,extractionMethod:void 0,rawText:void 0,confirmed:!1,confirmedBy:void 0,confirmedAt:void 0},labValues:[],createdAt:new Date,updatedAt:new Date,uploadedBy:""};return await Ij(r,s),s},Rj=async t=>await Tj(t),Cj=async(t,e,n)=>{const r=await Rj(t);if(!r)throw new Error("TestResult not found");await xj(t,{labValues:n,extractedData:{...r.extractedData,confirmed:!0,confirmedBy:e,confirmedAt:new Date},updatedAt:new Date})},ui=async t=>await Sj(t),Nj=()=>{const{user:t}=jt(),e=Ue(),[n,r]=D.useState([]),[s,i]=D.useState([]),[o,l]=D.useState(!0);return D.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const f=(await li.getAppointmentsByPatient(t.userId)).filter(g=>g.status===Be.SCHEDULED||g.status===Be.CONFIRMED).sort((g,T)=>g.dateTime.getTime()-T.dateTime.getTime()).slice(0,3);r(f);const m=await ui(t.userId);i(m.slice(0,3))}catch(d){console.error("Error loading dashboard data:",d)}finally{l(!1)}})()},[t]),o?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading dashboard..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Patient Dashboard"}),c.jsx(Q,{title:"Upcoming Appointments",children:n.length>0?c.jsxs("div",{className:"space-y-4",children:[n.map(u=>c.jsxs("div",{className:"border-b pb-4 last:border-0",children:[c.jsx("p",{className:"font-semibold",children:new Date(u.dateTime).toLocaleDateString()}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[new Date(u.dateTime).toLocaleTimeString()," - ",u.type]})]},u.appointmentId)),c.jsx(H,{onClick:()=>e("/patient/appointments"),className:"w-full",children:"View All Appointments"})]}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-gray-500 mb-4",children:"No upcoming appointments"}),c.jsx(H,{onClick:()=>e("/patient/schedule-appointment"),children:"Schedule Appointment"})]})}),c.jsx(Q,{title:"Quick Actions",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(H,{onClick:()=>e("/patient/schedule-appointment"),className:"h-20",children:"Schedule Appointment"}),c.jsx(H,{onClick:()=>e("/patient/test-results"),className:"h-20",children:"Upload Test Results"}),c.jsx(H,{onClick:()=>e("/patient/timeline"),className:"h-20",children:"View Timeline"}),c.jsx(H,{onClick:()=>e("/patient/profile"),className:"h-20",children:"View Profile"})]})}),c.jsx(Q,{title:"Recent Activity",children:c.jsxs("div",{className:"space-y-4",children:[s.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Recent Test Results"}),s.map(u=>{var d;return c.jsxs("div",{className:"border-b pb-2",children:[c.jsx("p",{className:"font-medium",children:((d=u.testInfo)==null?void 0:d.testName)||"Test Result"}),c.jsx("p",{className:"text-sm text-gray-500",children:new Date(u.fileInfo.uploadDate).toLocaleDateString()})]},u.testResultId)})]}),s.length===0&&c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})]})})]})})};class po extends Error{constructor(e="Resource not found"){super(e),this.name="NotFoundError",Object.setPrototypeOf(this,po.prototype)}}function lI(t,e){const[n,r]=D.useState(null),[s,i]=D.useState(!0),[o,l]=D.useState(null);return D.useEffect(()=>{if(!t){l(new po("Patient ID is required")),i(!1);return}i(!0),kr.getPatient(t,e).then(d=>{if(!d)throw new po("Patient not found");r(d)}).catch(d=>l(d)).finally(()=>i(!1))},[t,e]),{patient:n,loading:s,error:o,updatePatient:async d=>{if(!t)throw new po("Patient ID is required");i(!0);try{await kr.updatePatient(t,d),r(f=>f?{...f,...d}:null)}catch(f){throw l(f),f}finally{i(!1)}}}}const Pj=()=>{var f,m,g,T,I,N,A,E,_,R,b,L,M;const{user:t}=jt(),e=Ue(),{patient:n,loading:r,updatePatient:s}=lI((t==null?void 0:t.userId)||"",t==null?void 0:t.userId),[i,o]=D.useState(!1),[l,u]=D.useState({});Ho.useEffect(()=>{var x,w,S,C;n&&u({firstName:((x=n.personalInfo)==null?void 0:x.firstName)||"",lastName:((w=n.personalInfo)==null?void 0:w.lastName)||"",email:((S=n.contactInfo)==null?void 0:S.email)||"",primaryPhone:((C=n.contactInfo)==null?void 0:C.primaryPhone)||""})},[n]);const d=async()=>{try{await s({personalInfo:{...n==null?void 0:n.personalInfo,firstName:l.firstName,lastName:l.lastName},contactInfo:{...n==null?void 0:n.contactInfo,email:l.email,primaryPhone:l.primaryPhone}}),o(!1)}catch(x){console.error("Error updating profile:",x)}};return r?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading profile..."})}):n?c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"My Profile"}),!i&&c.jsx(H,{onClick:()=>o(!0),children:"Edit Profile"})]}),c.jsx(Q,{title:"Personal Information",children:i?c.jsxs("div",{className:"space-y-4",children:[c.jsx($,{label:"First Name",value:l.firstName,onChange:x=>u({...l,firstName:x.target.value})}),c.jsx($,{label:"Last Name",value:l.lastName,onChange:x=>u({...l,lastName:x.target.value})}),c.jsx($,{label:"Email",type:"email",value:l.email,onChange:x=>u({...l,email:x.target.value})}),c.jsx($,{label:"Phone",value:l.primaryPhone,onChange:x=>u({...l,primaryPhone:x.target.value})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx(H,{onClick:d,children:"Save Changes"}),c.jsx(H,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"})]})]}):c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Patient ID:"})," ",n.patientId]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Name:"})," ",(f=n.personalInfo)==null?void 0:f.firstName," ",(m=n.personalInfo)==null?void 0:m.lastName]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Date of Birth:"})," ",(g=n.personalInfo)!=null&&g.dateOfBirth?new Date(n.personalInfo.dateOfBirth).toLocaleDateString():"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Gender:"})," ",((T=n.personalInfo)==null?void 0:T.gender)||"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Blood Type:"})," ",((I=n.personalInfo)==null?void 0:I.bloodType)||"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",((N=n.contactInfo)==null?void 0:N.email)||"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Phone:"})," ",((A=n.contactInfo)==null?void 0:A.primaryPhone)||"N/A"]})]})}),c.jsx(Q,{title:"Medical Information",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Allergies:"})," ",((_=(E=n.medicalInfo)==null?void 0:E.allergies)==null?void 0:_.length)||0," recorded"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Current Medications:"})," ",((b=(R=n.medicalInfo)==null?void 0:R.currentMedications)==null?void 0:b.length)||0]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Medical History:"})," ",((M=(L=n.medicalInfo)==null?void 0:L.medicalHistory)==null?void 0:M.length)||0," conditions"]})]})}),c.jsx(H,{onClick:()=>e("/patient/dashboard"),variant:"secondary",children:"Back to Dashboard"})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs(Q,{children:[c.jsx("p",{className:"text-red-500",children:"Patient profile not found"}),c.jsx(H,{onClick:()=>e("/patient/dashboard"),className:"mt-4",children:"Back to Dashboard"})]})})},kj=()=>{const{user:t}=jt(),e=Ue(),[n,r]=D.useState([]),[s,i]=D.useState(!0),[o,l]=D.useState("all");D.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const f=await li.getAppointmentsByPatient(t.userId);r(f.sort((m,g)=>g.dateTime.getTime()-m.dateTime.getTime()))}catch(f){console.error("Error loading appointments:",f)}finally{i(!1)}})()},[t]);const u=o==="all"?n:n.filter(d=>d.status===o);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading appointments..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"My Appointments"}),c.jsx(H,{onClick:()=>e("/patient/schedule-appointment"),children:"Schedule New Appointment"})]}),c.jsx(Q,{children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx(H,{variant:o==="all"?"primary":"secondary",onClick:()=>l("all"),children:"All"}),c.jsx(H,{variant:o===Be.SCHEDULED?"primary":"secondary",onClick:()=>l(Be.SCHEDULED),children:"Scheduled"}),c.jsx(H,{variant:o===Be.COMPLETED?"primary":"secondary",onClick:()=>l(Be.COMPLETED),children:"Completed"}),c.jsx(H,{variant:o===Be.CANCELLED?"primary":"secondary",onClick:()=>l(Be.CANCELLED),children:"Cancelled"})]})}),c.jsx(Q,{title:`Appointments (${u.length})`,children:u.length>0?c.jsx("div",{className:"space-y-4",children:u.map(d=>c.jsx("div",{className:"border rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-lg",children:[new Date(d.dateTime).toLocaleDateString()," at"," ",new Date(d.dateTime).toLocaleTimeString()]}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Type: ",d.type," | Status: ",d.status]}),d.reason&&c.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Reason: ",d.reason]})]}),c.jsx("span",{className:`px-3 py-1 rounded text-sm ${d.status===Be.COMPLETED?"bg-green-100 text-green-800":d.status===Be.CANCELLED?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:d.status})]})},d.appointmentId))}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-gray-500 mb-4",children:"No appointments found"}),c.jsx(H,{onClick:()=>e("/patient/schedule-appointment"),children:"Schedule Your First Appointment"})]})}),c.jsx(H,{onClick:()=>e("/patient/dashboard"),variant:"secondary",children:"Back to Dashboard"})]})})},Dj=({patientId:t,doctorId:e,onSuccess:n})=>{const[r,s]=D.useState({patientId:t,doctorId:e||"",duration:30,type:xl.CONSULTATION,reason:""}),[i,o]=D.useState(""),[l,u]=D.useState(!1),[d,f]=D.useState(null),[m,g]=D.useState(null),T=(A,E)=>{s(_=>({..._,[A]:E}))},I=async()=>{if(!r.doctorId||!i)return;const A=await li.checkAvailability(r.doctorId,new Date(i),r.duration||30);g(A)},N=async()=>{u(!0),f(null);try{await li.createAppointment({...r,dateTime:new Date(i)}),n==null||n()}catch(A){f(A.message||"Failed to create appointment")}finally{u(!1)}};return D.useEffect(()=>{I()},[r.doctorId,i]),c.jsxs("form",{className:"space-y-4",children:[c.jsx($,{label:"Date & Time",type:"datetime-local",value:i,onChange:A=>o(A)}),c.jsx($,{label:"Duration (minutes)",type:"number",value:String(r.duration||30),onChange:A=>T("duration",Number(A))}),c.jsx($,{label:"Type",type:"select",value:r.type||xl.CONSULTATION,onChange:A=>T("type",A),options:Object.values(xl)}),c.jsx($,{label:"Reason",value:r.reason||"",onChange:A=>T("reason",A)}),m!==null&&c.jsx("p",{className:`text-sm ${m?"text-green-500":"text-red-500"}`,children:m?"Doctor is available":"Doctor is not available"}),d&&c.jsx("p",{className:"text-red-500",children:d}),c.jsx(H,{onClick:N,disabled:l||!m,children:l?"Booking...":"Book Appointment"})]})},jj=()=>{const{user:t}=jt(),e=Ue(),[n,r]=D.useState([]),[s,i]=D.useState(""),[o,l]=D.useState(!0);D.useEffect(()=>{(async()=>{try{const f=await nc.getDoctors();r(f.filter(m=>m.isActive)),f.length>0&&i(f[0].doctorId)}catch(f){console.error("Error loading doctors:",f)}finally{l(!1)}})()},[]);const u=()=>{e("/patient/appointments")};return o?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Schedule Appointment"}),c.jsx(H,{variant:"secondary",onClick:()=>e("/patient/appointments"),children:"Back"})]}),c.jsxs(Q,{children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Doctor"}),c.jsx("select",{value:s,onChange:d=>i(d.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:text-white",children:n.map(d=>{var f,m,g,T;return c.jsxs("option",{value:d.doctorId,children:[(f=d.professionalInfo)==null?void 0:f.title," ",(m=d.professionalInfo)==null?void 0:m.firstName," ",(g=d.professionalInfo)==null?void 0:g.lastName," - ",(T=d.professionalInfo)==null?void 0:T.specialization]},d.doctorId)})})]}),s&&c.jsx(Dj,{patientId:(t==null?void 0:t.userId)||"",doctorId:s,onSuccess:u})]})]})})},bj=()=>{const{user:t}=jt(),e=Ue(),[n,r]=D.useState([]),[s,i]=D.useState(!0),[o,l]=D.useState(!1),[u,d]=D.useState(null),[f,m]=D.useState("");D.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const N=await ui(t.userId);r(N.sort((A,E)=>E.fileInfo.uploadDate.getTime()-A.fileInfo.uploadDate.getTime()))}catch(N){console.error("Error loading test results:",N)}finally{i(!1)}})()},[t]);const g=I=>{I.target.files&&I.target.files[0]&&d(I.target.files[0])},T=async()=>{if(!(!u||!(t!=null&&t.userId))){l(!0);try{await Aj(t.userId,u,{testName:f||u.name,testDate:new Date});const I=await ui(t.userId);r(I.sort((N,A)=>A.fileInfo.uploadDate.getTime()-N.fileInfo.uploadDate.getTime())),d(null),m(""),alert("Test result uploaded successfully!")}catch(I){console.error("Error uploading test result:",I),alert("Error uploading test result. Please try again.")}finally{l(!1)}}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading test results..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Test Results"}),c.jsx(H,{variant:"secondary",onClick:()=>e("/patient/dashboard"),children:"Back to Dashboard"})]}),c.jsx(Q,{title:"Upload Test Result",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx($,{label:"Test Name (optional)",value:f,onChange:I=>m(I.target.value),placeholder:"e.g., Complete Blood Count"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select PDF File"}),c.jsx("input",{type:"file",accept:"application/pdf",onChange:g,className:"w-full p-2 border rounded dark:bg-gray-700 dark:text-white"})]}),u&&c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Selected: ",u.name," (",(u.size/1024/1024).toFixed(2)," MB)"]}),c.jsx(H,{onClick:T,disabled:!u||o,children:o?"Uploading...":"Upload Test Result"})]})}),c.jsx(Q,{title:`Test Results (${n.length})`,children:n.length>0?c.jsx("div",{className:"space-y-4",children:n.map(I=>c.jsx("div",{className:"border rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-lg",children:I.testInfo.testName}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Uploaded: ",new Date(I.fileInfo.uploadDate).toLocaleDateString()]}),I.testInfo.testDate&&c.jsxs("p",{className:"text-sm text-gray-500",children:["Test Date: ",new Date(I.testInfo.testDate).toLocaleDateString()]}),I.extractedData.confirmed&&c.jsx("p",{className:"text-sm text-green-600 mt-2",children:" Data confirmed by doctor"})]}),I.fileInfo.googleDriveUrl&&c.jsx("a",{href:I.fileInfo.googleDriveUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View PDF"})]})},I.testResultId))}):c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No test results uploaded yet"})})})]})})};class Oj{constructor(){ws(this,"collectionRef",Wt(It,we.TIMELINES))}async create(e,n,r){const s=$e(this.collectionRef,e);await ms(s,{...r,patientId:n})}async findByPatient(e){return this.collectionRef,null}async update(e,n){}async addEvent(e,n){const r=await this.findByPatient(e);r&&await this.update(e,{events:[...r.events,n],updatedAt:new Date})}async getByPatientId(e){return await this.findByPatient(e)}}const Pp=new Oj,Lj=async(t,e,n)=>{await Pp.create(t,e,n)},Vj=async t=>await Pp.getByPatientId(t),uI=async(t,e)=>{await Pp.update(t,e)},Ii=async t=>await Vj(t),cI=async(t,e)=>{let n=await Ii(t);const r={...e,eventId:Pr(Nr.TIMELINE),color:$E[e.eventType]||"#000000"};n?(n.events.push(r),n.updatedAt=new Date,await uI(t,n)):(n={timelineId:Pr(Nr.TIMELINE),patientId:t,events:[r],createdAt:new Date,updatedAt:new Date},await Lj(n.timelineId,t,n))},Mj=async t=>{const e=await Ii(t);e&&(e.updatedAt=new Date,await uI(t,e))},Uj=async(t,e)=>{const n=await Ii(t);return n?n.events.filter(r=>r.eventType===e):[]},Fj=async(t,e,n)=>{const r=await Ii(t);return r?r.events.filter(s=>s.date>=e&&s.date<=n):[]},Bj=async(t,e)=>{await cI(t,e)},zj={getTimeline:Ii,addEvent:cI,updateTimeline:Mj,getEventsByType:Uj,getEventsByDateRange:Fj,autoUpdateTimeline:Bj},$j=()=>{const{user:t}=jt(),e=Ue(),[n,r]=D.useState(null),[s,i]=D.useState(!0),[o,l]=D.useState("all");D.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const g=await zj.getTimeline(t.userId);r(g)}catch(g){console.error("Error loading timeline:",g)}finally{i(!1)}})()},[t]);const d=[...(n==null?void 0:n.events.filter(m=>o==="all"||m.eventType===o))||[]].sort((m,g)=>g.date.getTime()-m.date.getTime()),f=m=>$E[m]||"#666";return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading timeline..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Medical Timeline"}),c.jsx(H,{variant:"secondary",onClick:()=>e("/patient/dashboard"),children:"Back to Dashboard"})]}),c.jsx(Q,{children:c.jsxs("div",{className:"flex gap-4 flex-wrap",children:[c.jsx(H,{variant:o==="all"?"primary":"secondary",onClick:()=>l("all"),children:"All"}),Object.values(zE).map(m=>c.jsx(H,{variant:o===m?"primary":"secondary",onClick:()=>l(m),children:m.replace("_"," ")},m))]})}),c.jsx(Q,{title:`Timeline Events (${d.length})`,children:d.length>0?c.jsx("div",{className:"space-y-4",children:d.map(m=>c.jsx("div",{className:"border-l-4 pl-4 py-2",style:{borderColor:f(m.eventType)},children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:m.title}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[new Date(m.date).toLocaleDateString()," at"," ",new Date(m.date).toLocaleTimeString()]}),m.description&&c.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:m.description})]}),c.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:f(m.eventType)+"20",color:f(m.eventType)},children:m.eventType.replace("_"," ")})]})},m.eventId))}):c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No timeline events found"})})})]})})},Hj=()=>{const{user:t}=jt(),e=Ue(),[n,r]=D.useState([]),[s,i]=D.useState([]),[o,l]=D.useState({totalPatients:0,todayAppointments:0,pendingFollowUps:0,pendingTestResults:0}),[u,d]=D.useState(!0);return D.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const m=new Date;m.setHours(0,0,0,0);const g=new Date(m);g.setDate(g.getDate()+1);const I=(await li.getAppointmentsByDoctor(t.userId,m,g)).filter(A=>A.status===Be.SCHEDULED||A.status===Be.CONFIRMED);r(I);const N=await kr.getPatientsByDoctor(t.userId);i(N.slice(0,5)),l({totalPatients:N.length,todayAppointments:I.length,pendingFollowUps:0,pendingTestResults:0})}catch(m){console.error("Error loading dashboard data:",m)}finally{d(!1)}})()},[t]),u?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading dashboard..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Doctor Dashboard"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs(Q,{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Patients"}),c.jsx("p",{className:"text-3xl font-bold",children:o.totalPatients})]}),c.jsxs(Q,{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Appointments"}),c.jsx("p",{className:"text-3xl font-bold",children:o.todayAppointments})]}),c.jsxs(Q,{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Follow-ups"}),c.jsx("p",{className:"text-3xl font-bold",children:o.pendingFollowUps})]}),c.jsxs(Q,{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Test Results"}),c.jsx("p",{className:"text-3xl font-bold",children:o.pendingTestResults})]})]}),c.jsx(Q,{title:"Today's Schedule",children:n.length>0?c.jsx("div",{className:"space-y-4",children:n.map(f=>c.jsx("div",{className:"border rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>e(`/doctor/patient-profile/${f.patientId}`),children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold",children:[new Date(f.dateTime).toLocaleTimeString()," - ",f.type]}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Patient ID: ",f.patientId]}),f.reason&&c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Reason: ",f.reason]})]}),c.jsx(H,{onClick:m=>{m.stopPropagation(),e(`/doctor/new-encounter?appointmentId=${f.appointmentId}`)},children:"Start Encounter"})]})},f.appointmentId))}):c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No appointments scheduled for today"})}),c.jsx(Q,{title:"Recent Patients",children:s.length>0?c.jsxs("div",{className:"space-y-2",children:[s.map(f=>{var m,g;return c.jsxs("div",{className:"border rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>e(`/doctor/patient-profile/${f.patientId}`),children:[c.jsxs("p",{className:"font-semibold",children:[(m=f.personalInfo)==null?void 0:m.firstName," ",(g=f.personalInfo)==null?void 0:g.lastName]}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",f.patientId]})]},f.patientId)}),c.jsx(H,{onClick:()=>e("/doctor/patients"),variant:"secondary",className:"w-full mt-4",children:"View All Patients"})]}):c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No patients assigned yet"})}),c.jsx(Q,{title:"Quick Actions",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(H,{onClick:()=>e("/doctor/patients"),className:"h-20",children:"View Patients"}),c.jsx(H,{onClick:()=>e("/doctor/appointments"),className:"h-20",children:"View Appointments"}),c.jsx(H,{onClick:()=>e("/doctor/test-results-review"),className:"h-20",children:"Review Test Results"})]})})]})})},qj=()=>{const{user:t}=jt(),e=Ue(),[n,r]=D.useState([]),[s,i]=D.useState([]),[o,l]=D.useState(""),[u,d]=D.useState(!0);return D.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const m=await kr.getPatientsByDoctor(t.userId);r(m),i(m)}catch(m){console.error("Error loading patients:",m)}finally{d(!1)}})()},[t]),D.useEffect(()=>{if(!o){i(n);return}const f=o.toLowerCase(),m=n.filter(g=>{var T,I,N,A,E,_;return((I=(T=g.personalInfo)==null?void 0:T.firstName)==null?void 0:I.toLowerCase().includes(f))||((A=(N=g.personalInfo)==null?void 0:N.lastName)==null?void 0:A.toLowerCase().includes(f))||g.patientId.toLowerCase().includes(f)||((_=(E=g.contactInfo)==null?void 0:E.email)==null?void 0:_.toLowerCase().includes(f))});i(m)},[o,n]),u?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading patients..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"My Patients"}),c.jsx(H,{variant:"secondary",onClick:()=>e("/doctor/dashboard"),children:"Back to Dashboard"})]}),c.jsx(Q,{children:c.jsx($,{placeholder:"Search by name, ID, or email...",value:o,onChange:f=>l(f.target.value)})}),c.jsx(Q,{title:`Patients (${s.length})`,children:s.length>0?c.jsx("div",{className:"space-y-4",children:s.map(f=>{var m,g,T,I;return c.jsx("div",{className:"border rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>e(`/doctor/patient-profile/${f.patientId}`),children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-lg",children:[(m=f.personalInfo)==null?void 0:m.firstName," ",(g=f.personalInfo)==null?void 0:g.lastName]}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Patient ID: ",f.patientId]}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(T=f.contactInfo)==null?void 0:T.email," | ",(I=f.contactInfo)==null?void 0:I.primaryPhone]})]}),c.jsx(H,{onClick:N=>{N.stopPropagation(),e(`/doctor/patient-profile/${f.patientId}`)},children:"View Profile"})]})},f.patientId)})}):c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:o?"No patients found matching your search":"No patients assigned yet"})})})]})})};class Wj{constructor(){ws(this,"collectionRef",Wt(It,we.ENCOUNTERS))}async create(e,n){const r=$e(this.collectionRef,e);await ms(r,n)}async findById(e){const n=$e(this.collectionRef,e),r=await vi(n);return r.exists()?r.data():null}async update(e,n){const r=$e(this.collectionRef,e);await _i(r,n)}async findByPatient(e){const n=Kt(this.collectionRef,Et("patientId","==",e));return(await tt(n)).docs.map(s=>s.data())}async findByDoctor(e){const n=Kt(this.collectionRef,Et("doctorId","==",e));return(await tt(n)).docs.map(s=>s.data())}async findByAppointment(e){const n=Kt(this.collectionRef,Et("appointmentId","==",e)),r=await tt(n);return r.empty?null:r.docs[0].data()}}const pa=new Wj,dI=async(t,e)=>{await pa.create(t,e)},Gj=async t=>await pa.findById(t),hI=async(t,e)=>{await pa.update(t,e)},Kj=async t=>await pa.findByPatient(t),Qj=async t=>await pa.findByDoctor(t),fI=async t=>{const e=Pr(Nr.ENCOUNTER),n={...t,encounterId:e,isDraft:!1,createdAt:new Date,updatedAt:new Date};return await dI(e,n),n},pI=async t=>{const e=Pr(Nr.ENCOUNTER),n={...t,encounterId:e,isDraft:!0,createdAt:new Date,updatedAt:new Date};return await dI(e,n),n},Yj=async t=>await Gj(t),Xj=async(t,e)=>{await hI(t,{...e,updatedAt:new Date})},Jj=async t=>{await hI(t,{isDraft:!1,updatedAt:new Date})},Zj=async t=>await Kj(t),eb=async t=>await Qj(t),tb={createEncounter:fI,saveDraft:pI,getEncounter:Yj,updateEncounter:Xj,finalizeEncounter:Jj,getEncountersByPatient:Zj,getEncountersByDoctor:eb},nb=()=>{var T,I,N,A,E,_,R,b,L,M,x,w,S,C,k,P,v,te,me,bt,qe;const{patientId:t}=gD(),{user:e}=jt(),n=Ue(),{patient:r,loading:s}=lI(t||"",e==null?void 0:e.userId),[i,o]=D.useState("timeline"),[l,u]=D.useState([]),[d,f]=D.useState([]),[m,g]=D.useState(null);return Ho.useEffect(()=>{if(!t)return;(async()=>{try{const[Y,J,pe]=await Promise.all([tb.getEncountersByPatient(t),ui(t),Ii(t)]);u(Y),f(J),g(pe)}catch(Y){console.error("Error loading patient data:",Y)}})()},[t]),s?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading patient profile..."})}):r?c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:[(T=r.personalInfo)==null?void 0:T.firstName," ",(I=r.personalInfo)==null?void 0:I.lastName]}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Patient ID: ",r.patientId]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(H,{onClick:()=>n(`/doctor/new-encounter?patientId=${t}`),children:"New Encounter"}),c.jsx(H,{variant:"secondary",onClick:()=>n("/doctor/patients"),children:"Back"})]})]}),c.jsxs("div",{className:"flex gap-2 border-b",children:[c.jsx("button",{onClick:()=>o("timeline"),className:`px-4 py-2 font-semibold ${i==="timeline"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 dark:text-gray-400"}`,children:"Timeline"}),c.jsx("button",{onClick:()=>o("summary"),className:`px-4 py-2 font-semibold ${i==="summary"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 dark:text-gray-400"}`,children:"Summary"}),c.jsx("button",{onClick:()=>o("profile"),className:`px-4 py-2 font-semibold ${i==="profile"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 dark:text-gray-400"}`,children:"Profile"})]}),i==="timeline"&&c.jsx(Q,{title:"Timeline",children:m&&m.events.length>0?c.jsx("div",{className:"space-y-4",children:m.events.sort((B,Y)=>Y.date.getTime()-B.date.getTime()).map(B=>c.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[c.jsx("p",{className:"font-semibold",children:B.title}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(B.date).toLocaleDateString()}),B.description&&c.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:B.description})]},B.eventId))}):c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No timeline events"})}),i==="summary"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Q,{title:"Diseases",children:c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[((A=(N=r.medicalInfo)==null?void 0:N.medicalHistory)==null?void 0:A.length)||0," conditions recorded"]})}),c.jsx(Q,{title:"Recent Vitals",children:c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.length>0?"Available in encounters":"No vitals recorded"})}),c.jsx(Q,{title:"Allergies",children:c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[((_=(E=r.medicalInfo)==null?void 0:E.allergies)==null?void 0:_.length)||0," allergies recorded"]})}),c.jsx(Q,{title:"Medications",children:c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[((b=(R=r.medicalInfo)==null?void 0:R.currentMedications)==null?void 0:b.length)||0," current medications"]})}),c.jsx(Q,{title:"Encounters",children:c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l.length," total encounters"]})}),c.jsx(Q,{title:"Test Results",children:c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[d.length," test results uploaded"]})})]}),i==="profile"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx(Q,{title:"Personal Information",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Name:"})," ",(L=r.personalInfo)==null?void 0:L.firstName," ",(M=r.personalInfo)==null?void 0:M.lastName]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Date of Birth:"})," ",(x=r.personalInfo)!=null&&x.dateOfBirth?new Date(r.personalInfo.dateOfBirth).toLocaleDateString():"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Gender:"})," ",((w=r.personalInfo)==null?void 0:w.gender)||"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Blood Type:"})," ",((S=r.personalInfo)==null?void 0:S.bloodType)||"N/A"]})]})}),c.jsx(Q,{title:"Contact Information",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",((C=r.contactInfo)==null?void 0:C.email)||"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Phone:"})," ",((k=r.contactInfo)==null?void 0:k.primaryPhone)||"N/A"]})]})}),c.jsx(Q,{title:"Medical Information",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Allergies:"})," ",((v=(P=r.medicalInfo)==null?void 0:P.allergies)==null?void 0:v.length)||0]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Current Medications:"})," ",((me=(te=r.medicalInfo)==null?void 0:te.currentMedications)==null?void 0:me.length)||0]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Medical History:"})," ",((qe=(bt=r.medicalInfo)==null?void 0:bt.medicalHistory)==null?void 0:qe.length)||0]})]})})]})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs(Q,{children:[c.jsx("p",{className:"text-red-500",children:"Patient not found"}),c.jsx(H,{onClick:()=>n("/doctor/patients"),className:"mt-4",children:"Back to Patients"})]})})},rb=()=>{const{user:t}=jt(),e=Ue(),[n,r]=D.useState([]),[s,i]=D.useState(!0),[o,l]=D.useState("all"),[u,d]=D.useState("all");D.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{let g,T;u==="today"?(g=new Date,g.setHours(0,0,0,0),T=new Date(g),T.setDate(T.getDate()+1)):u==="week"?(g=new Date,g.setHours(0,0,0,0),T=new Date(g),T.setDate(T.getDate()+7)):u==="month"&&(g=new Date,g.setHours(0,0,0,0),T=new Date(g),T.setMonth(T.getMonth()+1));const I=await li.getAppointmentsByDoctor(t.userId,g,T);r(I.sort((N,A)=>N.dateTime.getTime()-A.dateTime.getTime()))}catch(g){console.error("Error loading appointments:",g)}finally{i(!1)}})()},[t,u]);const f=o==="all"?n:n.filter(m=>m.status===o);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading appointments..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"My Appointments"}),c.jsx(H,{variant:"secondary",onClick:()=>e("/doctor/dashboard"),children:"Back to Dashboard"})]}),c.jsx(Q,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date Range"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(H,{variant:u==="today"?"primary":"secondary",onClick:()=>d("today"),children:"Today"}),c.jsx(H,{variant:u==="week"?"primary":"secondary",onClick:()=>d("week"),children:"This Week"}),c.jsx(H,{variant:u==="month"?"primary":"secondary",onClick:()=>d("month"),children:"This Month"}),c.jsx(H,{variant:u==="all"?"primary":"secondary",onClick:()=>d("all"),children:"All"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(H,{variant:o==="all"?"primary":"secondary",onClick:()=>l("all"),children:"All"}),c.jsx(H,{variant:o===Be.SCHEDULED?"primary":"secondary",onClick:()=>l(Be.SCHEDULED),children:"Scheduled"}),c.jsx(H,{variant:o===Be.COMPLETED?"primary":"secondary",onClick:()=>l(Be.COMPLETED),children:"Completed"})]})]})]})}),c.jsx(Q,{title:`Appointments (${f.length})`,children:f.length>0?c.jsx("div",{className:"space-y-4",children:f.map(m=>c.jsx("div",{className:"border rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-lg",children:[new Date(m.dateTime).toLocaleDateString()," at"," ",new Date(m.dateTime).toLocaleTimeString()]}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Patient ID: ",m.patientId," | Type: ",m.type]}),m.reason&&c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Reason: ",m.reason]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(H,{onClick:()=>e(`/doctor/patient-profile/${m.patientId}`),variant:"secondary",children:"View Patient"}),m.status===Be.SCHEDULED&&c.jsx(H,{onClick:()=>e(`/doctor/new-encounter?appointmentId=${m.appointmentId}`),children:"Start Encounter"})]})]})},m.appointmentId))}):c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No appointments found"})})]})})},sb=({patientId:t,doctorId:e,appointmentId:n,onSuccess:r})=>{var T,I,N,A,E;const[s,i]=D.useState({patientId:t,doctorId:e,appointmentId:n,encounterType:Sl.INITIAL,subjective:{chiefComplaint:""},objective:{},assessment:{},plan:{}}),[o,l]=D.useState(!1),[u,d]=D.useState(null),f=(_,R)=>{i(b=>({...b,[_]:R}))},m=(_,R,b)=>{i(L=>({...L,[_]:{...L[_]||{},[R]:b}}))},g=async(_=!1)=>{l(!0),d(null);try{_?await pI(s):await fI(s),r==null||r()}catch(R){d(R.message||"Failed to save encounter")}finally{l(!1)}};return c.jsxs("form",{className:"space-y-4",children:[c.jsx($,{label:"Encounter Type",type:"select",value:s.encounterType||Sl.INITIAL,onChange:_=>f("encounterType",_),options:Object.values(Sl)}),c.jsx("h3",{children:"Subjective"}),c.jsx($,{label:"Chief Complaint",value:((T=s.subjective)==null?void 0:T.chiefComplaint)||"",onChange:_=>m("subjective","chiefComplaint",_)}),c.jsx($,{label:"History of Presenting Complaint",value:((I=s.subjective)==null?void 0:I.historyOfPresentingComplaint)||"",onChange:_=>m("subjective","historyOfPresentingComplaint",_)}),c.jsx("h3",{children:"Objective"}),c.jsx($,{label:"Vital Signs (JSON)",value:JSON.stringify(((N=s.objective)==null?void 0:N.vitalSigns)||{}),onChange:_=>m("objective","vitalSigns",JSON.parse(_))}),c.jsx("h3",{children:"Assessment"}),c.jsx($,{label:"Problems",value:(((A=s.assessment)==null?void 0:A.problems)||[]).join(", "),onChange:_=>m("assessment","problems",_.split(",").map(R=>R.trim()))}),c.jsx("h3",{children:"Plan"}),c.jsx($,{label:"Treatment Plan",value:((E=s.plan)==null?void 0:E.treatmentPlan)||"",onChange:_=>m("plan","treatmentPlan",_)}),u&&c.jsx("p",{className:"text-red-500",children:u}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(H,{onClick:()=>g(!0),disabled:o,children:"Save Draft"}),c.jsx(H,{onClick:()=>g(!1),disabled:o,children:"Finalize"})]})]})},ib=()=>{const t=Ue(),{user:e}=jt(),[n]=sI(),r=n.get("appointmentId"),s=n.get("patientId"),i=()=>{t(s?`/doctor/patient-profile/${s}`:"/doctor/dashboard")};return e!=null&&e.userId?c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"New Clinical Encounter"}),c.jsx(H,{variant:"secondary",onClick:()=>t(-1),children:"Cancel"})]}),c.jsx(Q,{children:c.jsx(sb,{patientId:s||"",doctorId:e.userId,appointmentId:r||void 0,onSuccess:i})})]})}):c.jsx("div",{children:"Loading..."})},ob=()=>{const{user:t}=jt(),e=Ue(),[n,r]=D.useState([]),[s,i]=D.useState(null),[o,l]=D.useState([]),[u,d]=D.useState(!0),[f,m]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const A=(await ui("")).filter(E=>!E.extractedData.confirmed);r(A)}catch(N){console.error("Error loading test results:",N)}finally{d(!1)}})()},[t]);const g=I=>{i(I),l([...I.labValues])},T=async()=>{if(!(!s||!(t!=null&&t.userId))){m(!0);try{await Cj(s.testResultId,t.userId,o),alert("Test result data confirmed successfully!"),i(null);const N=(await ui("")).filter(A=>!A.extractedData.confirmed);r(N)}catch(I){console.error("Error confirming test result:",I),alert("Error confirming test result. Please try again.")}finally{m(!1)}}};return u?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading test results..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Review Test Results"}),c.jsx(H,{variant:"secondary",onClick:()=>e("/doctor/dashboard"),children:"Back to Dashboard"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsx(Q,{title:`Pending Reviews (${n.length})`,children:n.length>0?c.jsx("div",{className:"space-y-2",children:n.map(I=>c.jsxs("div",{className:`border rounded p-3 cursor-pointer ${(s==null?void 0:s.testResultId)===I.testResultId?"bg-blue-50 dark:bg-blue-900 border-blue-500":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,onClick:()=>g(I),children:[c.jsx("p",{className:"font-semibold",children:I.testInfo.testName}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(I.fileInfo.uploadDate).toLocaleDateString()}),c.jsxs("p",{className:"text-xs text-gray-500",children:[I.labValues.length," values extracted"]})]},I.testResultId))}):c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No pending reviews"})}),s&&c.jsx(Q,{title:"Review Extracted Data",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:s.testInfo.testName}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Uploaded: ",new Date(s.fileInfo.uploadDate).toLocaleDateString()]}),s.fileInfo.googleDriveUrl&&c.jsx("a",{href:s.fileInfo.googleDriveUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View PDF"})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("h3",{className:"font-semibold mb-3",children:"Laboratory Values"}),o.length>0?c.jsx("div",{className:"space-y-3",children:o.map((I,N)=>c.jsx("div",{className:"border rounded p-3",children:c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx($,{label:"Test Name",value:I.testName,onChange:A=>{const E=[...o];E[N].testName=A.target.value,l(E)}}),c.jsx($,{label:"Value",value:I.value.toString(),onChange:A=>{const E=[...o];E[N].value=A.target.value,l(E)}}),c.jsx($,{label:"Unit",value:I.unit,onChange:A=>{const E=[...o];E[N].unit=A.target.value,l(E)}}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),c.jsx("select",{value:I.status,onChange:A=>{const E=[...o];E[N].status=A.target.value,l(E)},className:"w-full p-2 border rounded dark:bg-gray-700 dark:text-white",children:Object.values(BE).map(A=>c.jsx("option",{value:A,children:A},A))})]})]})},N))}):c.jsx("p",{className:"text-gray-500",children:"No lab values extracted"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(H,{onClick:T,disabled:f,children:f?"Confirming...":"Confirm Data"}),c.jsx(H,{variant:"secondary",onClick:()=>i(null),children:"Cancel"})]})]})})]})]})})},ab=()=>{const t=Ue(),[e,n]=D.useState({totalPatients:0,totalDoctors:0,totalAppointments:0,pendingApprovals:0}),[r,s]=D.useState([]),[i,o]=D.useState(!0);return D.useEffect(()=>{(async()=>{try{const u=[];s(u.slice(0,5));const d=await kr.getPatientsByDoctor(""),f=await nc.getDoctors();n({totalPatients:d.length,totalDoctors:f.length,totalAppointments:0,pendingApprovals:u.length})}catch(u){console.error("Error loading dashboard data:",u)}finally{o(!1)}})()},[]),i?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading dashboard..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Admin Dashboard"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs(Q,{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Patients"}),c.jsx("p",{className:"text-3xl font-bold",children:e.totalPatients})]}),c.jsxs(Q,{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Doctors"}),c.jsx("p",{className:"text-3xl font-bold",children:e.totalDoctors})]}),c.jsxs(Q,{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Appointments (This Month)"}),c.jsx("p",{className:"text-3xl font-bold",children:e.totalAppointments})]}),c.jsxs(Q,{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Approvals"}),c.jsx("p",{className:"text-3xl font-bold text-orange-600",children:e.pendingApprovals})]})]}),c.jsx(Q,{title:"Pending Approvals",children:r.length>0?c.jsxs("div",{className:"space-y-4",children:[r.map(l=>c.jsx("div",{className:"border rounded p-4",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:l.displayName||l.email}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Role: ",l.role," | Email: ",l.email]}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Registered: ",l.createdAt?new Date(l.createdAt).toLocaleDateString():"N/A"]})]}),c.jsx(H,{onClick:()=>t(`/admin/approvals?userId=${l.userId}`),children:"Review"})]})},l.userId)),c.jsx(H,{onClick:()=>t("/admin/approvals"),variant:"secondary",className:"w-full",children:"View All Pending Approvals"})]}):c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No pending approvals"})}),c.jsx(Q,{title:"Quick Actions",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsx(H,{onClick:()=>t("/admin/approvals"),className:"h-20",children:"User Approvals"}),c.jsx(H,{onClick:()=>t("/admin/patients"),className:"h-20",children:"All Patients"}),c.jsx(H,{onClick:()=>t("/admin/doctors"),className:"h-20",children:"All Doctors"}),c.jsx(H,{onClick:()=>t("/admin/reports"),className:"h-20",variant:"secondary",children:"Reports"})]})})]})})},lb=async t=>(await HE(t.userId,t),t),ub=async t=>await Sp(t),cb=async(t,e)=>{await Ap(t,e)},db=async(t,e)=>{await Ap(t,{isApproved:!0,approvedBy:e,approvedAt:new Date,status:wi.ACTIVE,updatedAt:new Date})},hb=async(t,e)=>{await Ap(t,{isApproved:!1,status:wi.SUSPENDED,updatedAt:new Date})},fb=async()=>await L1(),nl={createUser:lb,getUserById:ub,updateUser:cb,approveUser:db,rejectUser:hb,getPendingUsers:fb},pb=()=>{const t=Ue(),{user:e}=ua(),[n]=sI(),r=n.get("userId"),[s,i]=D.useState([]),[o,l]=D.useState(null),[u,d]=D.useState(""),[f,m]=D.useState(!0),[g,T]=D.useState(!1);D.useEffect(()=>{(async()=>{try{const E=await nl.getPendingUsers();if(i(E),r){const _=E.find(R=>R.userId===r);_&&l(_)}}catch(E){console.error("Error loading pending users:",E),alert("Error loading pending users. Please try again.")}finally{m(!1)}})()},[r]);const I=async A=>{if(!e){alert("You must be logged in to approve users.");return}T(!0);try{await nl.approveUser(A,e.userId),alert("User approved successfully!"),i(s.filter(_=>_.userId!==A)),l(null);const E=await nl.getPendingUsers();i(E)}catch(E){console.error("Error approving user:",E),alert("Error approving user. Please try again.")}finally{T(!1)}},N=async A=>{if(!u.trim()){alert("Please provide a reason for rejection");return}T(!0);try{await nl.rejectUser(A,u),alert("User rejected successfully!"),i(s.filter(E=>E.userId!==A)),l(null),d("")}catch(E){console.error("Error rejecting user:",E),alert("Error rejecting user. Please try again.")}finally{T(!1)}};return f?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading approvals..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"User Approvals"}),c.jsx(H,{variant:"secondary",onClick:()=>t("/admin/dashboard"),children:"Back to Dashboard"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsx(Q,{title:`Pending Approvals (${s.length})`,children:s.length>0?c.jsx("div",{className:"space-y-2",children:s.map(A=>c.jsxs("div",{className:`border rounded p-3 cursor-pointer ${(o==null?void 0:o.userId)===A.userId?"bg-blue-50 dark:bg-blue-900 border-blue-500":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,onClick:()=>l(A),children:[c.jsx("p",{className:"font-semibold",children:A.displayName||A.email}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Role: ",A.role," | ",A.email]}),c.jsx("p",{className:"text-xs text-gray-500",children:A.createdAt?new Date(A.createdAt).toLocaleDateString():"N/A"})]},A.userId))}):c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No pending approvals"})}),o&&c.jsx(Q,{title:"User Details",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:o.displayName||"N/A"}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Email: ",o.email]}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Role: ",o.role]}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Status: ",o.status]}),o.createdAt&&c.jsxs("p",{className:"text-xs text-gray-500",children:["Registered: ",new Date(o.createdAt).toLocaleDateString()]})]}),c.jsxs("div",{className:"border-t pt-4 space-y-4",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx(H,{onClick:()=>I(o.userId),disabled:g,className:"flex-1",children:"Approve"}),c.jsx(H,{variant:"danger",onClick:()=>{confirm("Are you sure you want to reject this user?")},disabled:g,className:"flex-1",children:"Reject"})]}),c.jsxs("div",{children:[c.jsx($,{label:"Rejection Reason (if rejecting)",value:u,onChange:A=>d(A.target.value),placeholder:"Enter reason for rejection..."}),u&&c.jsx(H,{variant:"danger",onClick:()=>N(o.userId),disabled:g,className:"w-full mt-2",children:"Confirm Rejection"})]})]})]})})]})]})})},mb=()=>{const t=Ue(),[e,n]=D.useState([]),[r,s]=D.useState([]),[i,o]=D.useState(""),[l,u]=D.useState(!0);return D.useEffect(()=>{(async()=>{try{const f=[];n(f),s(f)}catch(f){console.error("Error loading patients:",f)}finally{u(!1)}})()},[]),D.useEffect(()=>{if(!i){s(e);return}const d=i.toLowerCase(),f=e.filter(m=>{var g,T,I,N,A,E;return((T=(g=m.personalInfo)==null?void 0:g.firstName)==null?void 0:T.toLowerCase().includes(d))||((N=(I=m.personalInfo)==null?void 0:I.lastName)==null?void 0:N.toLowerCase().includes(d))||m.patientId.toLowerCase().includes(d)||((E=(A=m.contactInfo)==null?void 0:A.email)==null?void 0:E.toLowerCase().includes(d))});s(f)},[i,e]),l?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading patients..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"All Patients"}),c.jsx(H,{variant:"secondary",onClick:()=>t("/admin/dashboard"),children:"Back to Dashboard"})]}),c.jsx(Q,{children:c.jsx($,{placeholder:"Search by name, ID, or email...",value:i,onChange:d=>o(d.target.value)})}),c.jsx(Q,{title:`Patients (${r.length})`,children:r.length>0?c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b",children:[c.jsx("th",{className:"text-left p-2",children:"Patient ID"}),c.jsx("th",{className:"text-left p-2",children:"Name"}),c.jsx("th",{className:"text-left p-2",children:"Email"}),c.jsx("th",{className:"text-left p-2",children:"Phone"}),c.jsx("th",{className:"text-left p-2",children:"Assigned Doctor"}),c.jsx("th",{className:"text-left p-2",children:"Status"}),c.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),c.jsx("tbody",{children:r.map(d=>{var f,m,g,T;return c.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-700",children:[c.jsx("td",{className:"p-2",children:d.patientId}),c.jsxs("td",{className:"p-2",children:[(f=d.personalInfo)==null?void 0:f.firstName," ",(m=d.personalInfo)==null?void 0:m.lastName]}),c.jsx("td",{className:"p-2",children:((g=d.contactInfo)==null?void 0:g.email)||"N/A"}),c.jsx("td",{className:"p-2",children:((T=d.contactInfo)==null?void 0:T.primaryPhone)||"N/A"}),c.jsx("td",{className:"p-2",children:d.assignedDoctorId||"Unassigned"}),c.jsx("td",{className:"p-2",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs ${d.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.isActive?"Active":"Inactive"})}),c.jsx("td",{className:"p-2",children:c.jsx(H,{variant:"secondary",onClick:()=>t(`/admin/patient/${d.patientId}`),children:"View"})})]},d.patientId)})})]})}):c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No patients found"})})]})})},gb=()=>{const t=Ue(),[e,n]=D.useState([]),[r,s]=D.useState([]),[i,o]=D.useState(""),[l,u]=D.useState(!0);return D.useEffect(()=>{(async()=>{try{const f=await nc.getDoctors();n(f),s(f)}catch(f){console.error("Error loading doctors:",f)}finally{u(!1)}})()},[]),D.useEffect(()=>{if(!i){s(e);return}const d=i.toLowerCase(),f=e.filter(m=>{var g,T,I,N,A,E,_,R;return((T=(g=m.professionalInfo)==null?void 0:g.firstName)==null?void 0:T.toLowerCase().includes(d))||((N=(I=m.professionalInfo)==null?void 0:I.lastName)==null?void 0:N.toLowerCase().includes(d))||m.doctorId.toLowerCase().includes(d)||((E=(A=m.professionalInfo)==null?void 0:A.specialization)==null?void 0:E.toLowerCase().includes(d))||((R=(_=m.contactInfo)==null?void 0:_.email)==null?void 0:R.toLowerCase().includes(d))});s(f)},[i,e]),l?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading doctors..."})}):c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"All Doctors"}),c.jsx(H,{variant:"secondary",onClick:()=>t("/admin/dashboard"),children:"Back to Dashboard"})]}),c.jsx(Q,{children:c.jsx($,{placeholder:"Search by name, ID, specialization, or email...",value:i,onChange:d=>o(d.target.value)})}),c.jsx(Q,{title:`Doctors (${r.length})`,children:r.length>0?c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b",children:[c.jsx("th",{className:"text-left p-2",children:"Doctor ID"}),c.jsx("th",{className:"text-left p-2",children:"Name"}),c.jsx("th",{className:"text-left p-2",children:"Specialization"}),c.jsx("th",{className:"text-left p-2",children:"Email"}),c.jsx("th",{className:"text-left p-2",children:"License Number"}),c.jsx("th",{className:"text-left p-2",children:"Patients"}),c.jsx("th",{className:"text-left p-2",children:"Status"}),c.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),c.jsx("tbody",{children:r.map(d=>{var f,m,g,T,I,N,A;return c.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-700",children:[c.jsx("td",{className:"p-2",children:d.doctorId}),c.jsxs("td",{className:"p-2",children:[(f=d.professionalInfo)==null?void 0:f.title," ",(m=d.professionalInfo)==null?void 0:m.firstName," ",(g=d.professionalInfo)==null?void 0:g.lastName]}),c.jsx("td",{className:"p-2",children:((T=d.professionalInfo)==null?void 0:T.specialization)||"N/A"}),c.jsx("td",{className:"p-2",children:((I=d.contactInfo)==null?void 0:I.email)||"N/A"}),c.jsx("td",{className:"p-2",children:((N=d.professionalInfo)==null?void 0:N.licenseNumber)||"N/A"}),c.jsx("td",{className:"p-2",children:((A=d.assignedPatients)==null?void 0:A.length)||0}),c.jsx("td",{className:"p-2",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs ${d.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.isActive?"Active":"Inactive"})}),c.jsx("td",{className:"p-2",children:c.jsx(H,{variant:"secondary",onClick:()=>t(`/admin/doctor/${d.doctorId}`),children:"View"})})]},d.doctorId)})})]})}):c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No doctors found"})})]})})},ht=({children:t,allowedRoles:e})=>{const{user:n,loading:r}=jt();return r?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(He,{size:48,message:"Loading..."})}):n?!n.isApproved&&n.role===Se.PATIENT?c.jsx(zo,{to:"/register/patient/flow",replace:!0}):n.isApproved?e.includes(n.role)?c.jsx(c.Fragment,{children:t}):c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to access this page."})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Account Pending Approval"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your account is pending admin approval. Please wait for approval."})]})}):c.jsx(zo,{to:"/login",replace:!0})},yb=()=>c.jsx(LD,{children:c.jsxs(DD,{children:[c.jsx(xe,{path:"/login",element:c.jsx(VD,{})}),c.jsx(xe,{path:"/register/patient",element:c.jsx(YD,{})}),c.jsx(xe,{path:"/register/patient/flow",element:c.jsx(XD,{})}),c.jsx(xe,{path:"/register/doctor",element:c.jsx(uj,{})}),c.jsx(xe,{path:"/patient/dashboard",element:c.jsx(ht,{allowedRoles:[Se.PATIENT],children:c.jsx(Nj,{})})}),c.jsx(xe,{path:"/patient/profile",element:c.jsx(ht,{allowedRoles:[Se.PATIENT],children:c.jsx(Pj,{})})}),c.jsx(xe,{path:"/patient/appointments",element:c.jsx(ht,{allowedRoles:[Se.PATIENT],children:c.jsx(kj,{})})}),c.jsx(xe,{path:"/patient/schedule-appointment",element:c.jsx(ht,{allowedRoles:[Se.PATIENT],children:c.jsx(jj,{})})}),c.jsx(xe,{path:"/patient/test-results",element:c.jsx(ht,{allowedRoles:[Se.PATIENT],children:c.jsx(bj,{})})}),c.jsx(xe,{path:"/patient/timeline",element:c.jsx(ht,{allowedRoles:[Se.PATIENT],children:c.jsx($j,{})})}),c.jsx(xe,{path:"/doctor/dashboard",element:c.jsx(ht,{allowedRoles:[Se.DOCTOR],children:c.jsx(Hj,{})})}),c.jsx(xe,{path:"/doctor/patients",element:c.jsx(ht,{allowedRoles:[Se.DOCTOR],children:c.jsx(qj,{})})}),c.jsx(xe,{path:"/doctor/patient-profile/:patientId",element:c.jsx(ht,{allowedRoles:[Se.DOCTOR],children:c.jsx(nb,{})})}),c.jsx(xe,{path:"/doctor/appointments",element:c.jsx(ht,{allowedRoles:[Se.DOCTOR],children:c.jsx(rb,{})})}),c.jsx(xe,{path:"/doctor/new-encounter",element:c.jsx(ht,{allowedRoles:[Se.DOCTOR],children:c.jsx(ib,{})})}),c.jsx(xe,{path:"/doctor/test-results-review",element:c.jsx(ht,{allowedRoles:[Se.DOCTOR],children:c.jsx(ob,{})})}),c.jsx(xe,{path:"/admin/dashboard",element:c.jsx(ht,{allowedRoles:[Se.ADMIN],children:c.jsx(ab,{})})}),c.jsx(xe,{path:"/admin/approvals",element:c.jsx(ht,{allowedRoles:[Se.ADMIN],children:c.jsx(pb,{})})}),c.jsx(xe,{path:"/admin/patients",element:c.jsx(ht,{allowedRoles:[Se.ADMIN],children:c.jsx(mb,{})})}),c.jsx(xe,{path:"/admin/doctors",element:c.jsx(ht,{allowedRoles:[Se.ADMIN],children:c.jsx(gb,{})})}),c.jsx(xe,{path:"/",element:c.jsx(zo,{to:"/login",replace:!0})}),c.jsx(xe,{path:"*",element:c.jsx(zo,{to:"/login",replace:!0})})]})}),vb=()=>c.jsx(F1,{children:c.jsx(yb,{})}),_b=console.warn,wb=console.error;console.warn=(...t)=>{var n;const e=((n=t[0])==null?void 0:n.toString())||"";e.includes("Cross-Origin-Opener-Policy")||e.includes("window.close")||_b.apply(console,t)};console.error=(...t)=>{var n;const e=((n=t[0])==null?void 0:n.toString())||"";e.includes("Cross-Origin-Opener-Policy")||e.includes("window.close")||wb.apply(console,t)};hd.createRoot(document.getElementById("root")).render(c.jsx(Ho.StrictMode,{children:c.jsx(vb,{})}));
//# sourceMappingURL=index-DhWcU0bR.js.map
