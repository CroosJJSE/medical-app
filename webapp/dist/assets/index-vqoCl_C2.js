var vI=Object.defineProperty;var _I=(t,e,n)=>e in t?vI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $r=(t,e,n)=>_I(t,typeof e!="symbol"?e+"":e,n);function wI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function xI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rv={exports:{}},Ac={},Pv={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=Symbol.for("react.element"),EI=Symbol.for("react.portal"),II=Symbol.for("react.fragment"),TI=Symbol.for("react.strict_mode"),SI=Symbol.for("react.profiler"),NI=Symbol.for("react.provider"),AI=Symbol.for("react.context"),RI=Symbol.for("react.forward_ref"),PI=Symbol.for("react.suspense"),CI=Symbol.for("react.memo"),kI=Symbol.for("react.lazy"),Mm=Symbol.iterator;function bI(t){return t===null||typeof t!="object"?null:(t=Mm&&t[Mm]||t["@@iterator"],typeof t=="function"?t:null)}var Cv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kv=Object.assign,bv={};function wi(t,e,n){this.props=t,this.context=e,this.refs=bv,this.updater=n||Cv}wi.prototype.isReactComponent={};wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Dv(){}Dv.prototype=wi.prototype;function zh(t,e,n){this.props=t,this.context=e,this.refs=bv,this.updater=n||Cv}var $h=zh.prototype=new Dv;$h.constructor=zh;kv($h,wi.prototype);$h.isPureReactComponent=!0;var Um=Array.isArray,jv=Object.prototype.hasOwnProperty,Hh={current:null},Ov={key:!0,ref:!0,__self:!0,__source:!0};function Lv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jv.call(e,r)&&!Ov.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Yo,type:t,key:i,ref:o,props:s,_owner:Hh.current}}function DI(t,e){return{$$typeof:Yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yo}function jI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fm=/\/+/g;function Mu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jI(""+t.key):e.toString(36)}function hl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yo:case EI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Mu(o,0):r,Um(s)?(n="",t!=null&&(n=t.replace(Fm,"$&/")+"/"),hl(s,e,n,"",function(d){return d})):s!=null&&(qh(s)&&(s=DI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Um(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Mu(i,l);o+=hl(i,e,n,c,s)}else if(c=bI(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Mu(i,l++),o+=hl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $a(t,e,n){if(t==null)return t;var r=[],s=0;return hl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function OI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},fl={transition:null},LI={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:fl,ReactCurrentOwner:Hh};function Vv(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:$a,forEach:function(t,e,n){$a(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $a(t,function(){e++}),e},toArray:function(t){return $a(t,function(e){return e})||[]},only:function(t){if(!qh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=wi;re.Fragment=II;re.Profiler=SI;re.PureComponent=zh;re.StrictMode=TI;re.Suspense=PI;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LI;re.act=Vv;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)jv.call(e,c)&&!Ov.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Yo,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:AI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NI,_context:t},t.Consumer=t};re.createElement=Lv;re.createFactory=function(t){var e=Lv.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:RI,render:t}};re.isValidElement=qh;re.lazy=function(t){return{$$typeof:kI,_payload:{_status:-1,_result:t},_init:OI}};re.memo=function(t,e){return{$$typeof:CI,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=fl.transition;fl.transition={};try{t()}finally{fl.transition=e}};re.unstable_act=Vv;re.useCallback=function(t,e){return Tt.current.useCallback(t,e)};re.useContext=function(t){return Tt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};re.useEffect=function(t,e){return Tt.current.useEffect(t,e)};re.useId=function(){return Tt.current.useId()};re.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return Tt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};re.useRef=function(t){return Tt.current.useRef(t)};re.useState=function(t){return Tt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return Tt.current.useTransition()};re.version="18.3.1";Pv.exports=re;var b=Pv.exports;const Xo=xI(b),VI=wI({__proto__:null,default:Xo},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MI=b,UI=Symbol.for("react.element"),FI=Symbol.for("react.fragment"),BI=Object.prototype.hasOwnProperty,zI=MI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$I={key:!0,ref:!0,__self:!0,__source:!0};function Mv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)BI.call(e,r)&&!$I.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:UI,type:t,key:i,ref:o,props:s,_owner:zI.current}}Ac.Fragment=FI;Ac.jsx=Mv;Ac.jsxs=Mv;Rv.exports=Ac;var u=Rv.exports,Id={},Uv={exports:{}},Bt={},Fv={exports:{}},Bv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,H){var Q=U.length;U.push(H);e:for(;0<Q;){var pe=Q-1>>>1,fe=U[pe];if(0<s(fe,H))U[pe]=H,U[Q]=fe,Q=pe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],Q=U.pop();if(Q!==H){U[0]=Q;e:for(var pe=0,fe=U.length,je=fe>>>1;pe<je;){var Tn=2*(pe+1)-1,Sn=U[Tn],Nn=Tn+1,An=U[Nn];if(0>s(Sn,Q))Nn<fe&&0>s(An,Sn)?(U[pe]=An,U[Nn]=Q,pe=Nn):(U[pe]=Sn,U[Tn]=Q,pe=Tn);else if(Nn<fe&&0>s(An,Q))U[pe]=An,U[Nn]=Q,pe=Nn;else break e}}return H}function s(U,H){var Q=U.sortIndex-H.sortIndex;return Q!==0?Q:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,p=null,g=3,x=!1,w=!1,P=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=U)r(d),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(d)}}function D(U){if(P=!1,S(U),!w)if(n(c)!==null)w=!0,ve(V);else{var H=n(d);H!==null&&z(D,H.startTime-U)}}function V(U,H){w=!1,P&&(P=!1,E(v),v=-1),x=!0;var Q=g;try{for(S(H),p=n(c);p!==null&&(!(p.expirationTime>H)||U&&!k());){var pe=p.callback;if(typeof pe=="function"){p.callback=null,g=p.priorityLevel;var fe=pe(p.expirationTime<=H);H=t.unstable_now(),typeof fe=="function"?p.callback=fe:p===n(c)&&r(c),S(H)}else r(c);p=n(c)}if(p!==null)var je=!0;else{var Tn=n(d);Tn!==null&&z(D,Tn.startTime-H),je=!1}return je}finally{p=null,g=Q,x=!1}}var M=!1,I=null,v=-1,T=5,R=-1;function k(){return!(t.unstable_now()-R<T)}function C(){if(I!==null){var U=t.unstable_now();R=U;var H=!0;try{H=I(!0,U)}finally{H?N():(M=!1,I=null)}}else M=!1}var N;if(typeof _=="function")N=function(){_(C)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,oe=X.port2;X.port1.onmessage=C,N=function(){oe.postMessage(null)}}else N=function(){A(C,0)};function ve(U){I=U,M||(M=!0,N())}function z(U,H){v=A(function(){U(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||x||(w=!0,ve(V))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var Q=g;g=H;try{return U()}finally{g=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=g;g=U;try{return H()}finally{g=Q}},t.unstable_scheduleCallback=function(U,H,Q){var pe=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?pe+Q:pe):Q=pe,U){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Q+fe,U={id:f++,callback:H,priorityLevel:U,startTime:Q,expirationTime:fe,sortIndex:-1},Q>pe?(U.sortIndex=Q,e(d,U),n(c)===null&&U===n(d)&&(P?(E(v),v=-1):P=!0,z(D,Q-pe))):(U.sortIndex=fe,e(c,U),w||x||(w=!0,ve(V))),U},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(U){var H=g;return function(){var Q=g;g=H;try{return U.apply(this,arguments)}finally{g=Q}}}})(Bv);Fv.exports=Bv;var HI=Fv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qI=b,Ft=HI;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zv=new Set,So={};function ms(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(So[t]=e,t=0;t<e.length;t++)zv.add(e[t])}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Td=Object.prototype.hasOwnProperty,WI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bm={},zm={};function GI(t){return Td.call(zm,t)?!0:Td.call(Bm,t)?!1:WI.test(t)?zm[t]=!0:(Bm[t]=!0,!1)}function KI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QI(t,e,n,r){if(e===null||typeof e>"u"||KI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wh=/[\-:]([a-z])/g;function Gh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wh,Gh);nt[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wh,Gh);nt[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wh,Gh);nt[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kh(t,e,n,r){var s=nt.hasOwnProperty(e)?nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QI(e,n,s,r)&&(n=null),r||s===null?GI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qn=qI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ha=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),ks=Symbol.for("react.fragment"),Qh=Symbol.for("react.strict_mode"),Sd=Symbol.for("react.profiler"),$v=Symbol.for("react.provider"),Hv=Symbol.for("react.context"),Yh=Symbol.for("react.forward_ref"),Nd=Symbol.for("react.suspense"),Ad=Symbol.for("react.suspense_list"),Xh=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),qv=Symbol.for("react.offscreen"),$m=Symbol.iterator;function qi(t){return t===null||typeof t!="object"?null:(t=$m&&t[$m]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Uu;function to(t){if(Uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uu=e&&e[1]||""}return`
`+Uu+t}var Fu=!1;function Bu(t,e){if(!t||Fu)return"";Fu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Fu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?to(t):""}function YI(t){switch(t.tag){case 5:return to(t.type);case 16:return to("Lazy");case 13:return to("Suspense");case 19:return to("SuspenseList");case 0:case 2:case 15:return t=Bu(t.type,!1),t;case 11:return t=Bu(t.type.render,!1),t;case 1:return t=Bu(t.type,!0),t;default:return""}}function Rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ks:return"Fragment";case Cs:return"Portal";case Sd:return"Profiler";case Qh:return"StrictMode";case Nd:return"Suspense";case Ad:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hv:return(t.displayName||"Context")+".Consumer";case $v:return(t._context.displayName||"Context")+".Provider";case Yh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xh:return e=t.displayName||null,e!==null?e:Rd(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return Rd(t(e))}catch{}}return null}function XI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(e);case 8:return e===Qh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JI(t){var e=Wv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qa(t){t._valueTracker||(t._valueTracker=JI(t))}function Gv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pd(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kv(t,e){e=e.checked,e!=null&&Kh(t,"checked",e,!1)}function Cd(t,e){Kv(t,e);var n=Nr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kd(t,e.type,n):e.hasOwnProperty("defaultValue")&&kd(t,e.type,Nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function kd(t,e,n){(e!=="number"||Ll(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var no=Array.isArray;function $s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Nr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function bd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(no(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nr(n)}}function Qv(t,e){var n=Nr(e.value),r=Nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wa,Xv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wa=Wa||document.createElement("div"),Wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function No(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var lo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZI=["Webkit","ms","Moz","O"];Object.keys(lo).forEach(function(t){ZI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lo[e]=lo[t]})});function Jv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||lo.hasOwnProperty(t)&&lo[t]?(""+e).trim():e+"px"}function Zv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Jv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var eT=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jd(t,e){if(e){if(eT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Od(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ld=null;function Jh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vd=null,Hs=null,qs=null;function Km(t){if(t=ea(t)){if(typeof Vd!="function")throw Error(B(280));var e=t.stateNode;e&&(e=bc(e),Vd(t.stateNode,t.type,e))}}function e_(t){Hs?qs?qs.push(t):qs=[t]:Hs=t}function t_(){if(Hs){var t=Hs,e=qs;if(qs=Hs=null,Km(t),e)for(t=0;t<e.length;t++)Km(e[t])}}function n_(t,e){return t(e)}function r_(){}var zu=!1;function s_(t,e,n){if(zu)return t(e,n);zu=!0;try{return n_(t,e,n)}finally{zu=!1,(Hs!==null||qs!==null)&&(r_(),t_())}}function Ao(t,e){var n=t.stateNode;if(n===null)return null;var r=bc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Md=!1;if(Fn)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){Md=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{Md=!1}function tT(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var co=!1,Vl=null,Ml=!1,Ud=null,nT={onError:function(t){co=!0,Vl=t}};function rT(t,e,n,r,s,i,o,l,c){co=!1,Vl=null,tT.apply(nT,arguments)}function sT(t,e,n,r,s,i,o,l,c){if(rT.apply(this,arguments),co){if(co){var d=Vl;co=!1,Vl=null}else throw Error(B(198));Ml||(Ml=!0,Ud=d)}}function gs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qm(t){if(gs(t)!==t)throw Error(B(188))}function iT(t){var e=t.alternate;if(!e){if(e=gs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qm(s),t;if(i===r)return Qm(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function o_(t){return t=iT(t),t!==null?a_(t):null}function a_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=a_(t);if(e!==null)return e;t=t.sibling}return null}var l_=Ft.unstable_scheduleCallback,Ym=Ft.unstable_cancelCallback,oT=Ft.unstable_shouldYield,aT=Ft.unstable_requestPaint,Le=Ft.unstable_now,lT=Ft.unstable_getCurrentPriorityLevel,Zh=Ft.unstable_ImmediatePriority,c_=Ft.unstable_UserBlockingPriority,Ul=Ft.unstable_NormalPriority,cT=Ft.unstable_LowPriority,u_=Ft.unstable_IdlePriority,Rc=null,hn=null;function uT(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Rc,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:fT,dT=Math.log,hT=Math.LN2;function fT(t){return t>>>=0,t===0?32:31-(dT(t)/hT|0)|0}var Ga=64,Ka=4194304;function ro(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ro(l):(i&=o,i!==0&&(r=ro(i)))}else o=n&~s,o!==0?r=ro(o):i!==0&&(r=ro(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),s=1<<n,r|=t[n],e&=~s;return r}function pT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-nn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=pT(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d_(){var t=Ga;return Ga<<=1,!(Ga&4194240)&&(Ga=64),t}function $u(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function gT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ef(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function h_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f_,tf,p_,m_,g_,Bd=!1,Qa=[],fr=null,pr=null,mr=null,Ro=new Map,Po=new Map,rr=[],yT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xm(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Ro.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(e.pointerId)}}function Gi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ea(e),e!==null&&tf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vT(t,e,n,r,s){switch(e){case"focusin":return fr=Gi(fr,t,e,n,r,s),!0;case"dragenter":return pr=Gi(pr,t,e,n,r,s),!0;case"mouseover":return mr=Gi(mr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ro.set(i,Gi(Ro.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Po.set(i,Gi(Po.get(i)||null,t,e,n,r,s)),!0}return!1}function y_(t){var e=Gr(t.target);if(e!==null){var n=gs(e);if(n!==null){if(e=n.tag,e===13){if(e=i_(n),e!==null){t.blockedOn=e,g_(t.priority,function(){p_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ld=r,n.target.dispatchEvent(r),Ld=null}else return e=ea(n),e!==null&&tf(e),t.blockedOn=n,!1;e.shift()}return!0}function Jm(t,e,n){pl(t)&&n.delete(e)}function _T(){Bd=!1,fr!==null&&pl(fr)&&(fr=null),pr!==null&&pl(pr)&&(pr=null),mr!==null&&pl(mr)&&(mr=null),Ro.forEach(Jm),Po.forEach(Jm)}function Ki(t,e){t.blockedOn===e&&(t.blockedOn=null,Bd||(Bd=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,_T)))}function Co(t){function e(s){return Ki(s,t)}if(0<Qa.length){Ki(Qa[0],t);for(var n=1;n<Qa.length;n++){var r=Qa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fr!==null&&Ki(fr,t),pr!==null&&Ki(pr,t),mr!==null&&Ki(mr,t),Ro.forEach(e),Po.forEach(e),n=0;n<rr.length;n++)r=rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)y_(n),n.blockedOn===null&&rr.shift()}var Ws=Qn.ReactCurrentBatchConfig,Bl=!0;function wT(t,e,n,r){var s=me,i=Ws.transition;Ws.transition=null;try{me=1,nf(t,e,n,r)}finally{me=s,Ws.transition=i}}function xT(t,e,n,r){var s=me,i=Ws.transition;Ws.transition=null;try{me=4,nf(t,e,n,r)}finally{me=s,Ws.transition=i}}function nf(t,e,n,r){if(Bl){var s=zd(t,e,n,r);if(s===null)Zu(t,e,r,zl,n),Xm(t,r);else if(vT(s,t,e,n,r))r.stopPropagation();else if(Xm(t,r),e&4&&-1<yT.indexOf(t)){for(;s!==null;){var i=ea(s);if(i!==null&&f_(i),i=zd(t,e,n,r),i===null&&Zu(t,e,r,zl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Zu(t,e,r,null,n)}}var zl=null;function zd(t,e,n,r){if(zl=null,t=Jh(r),t=Gr(t),t!==null)if(e=gs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zl=t,null}function v_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lT()){case Zh:return 1;case c_:return 4;case Ul:case cT:return 16;case u_:return 536870912;default:return 16}default:return 16}}var lr=null,rf=null,ml=null;function __(){if(ml)return ml;var t,e=rf,n=e.length,r,s="value"in lr?lr.value:lr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ml=s.slice(t,1<r?1-r:void 0)}function gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ya(){return!0}function Zm(){return!1}function zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ya:Zm,this.isPropagationStopped=Zm,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ya)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ya)},persist:function(){},isPersistent:Ya}),e}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sf=zt(xi),Zo=Pe({},xi,{view:0,detail:0}),ET=zt(Zo),Hu,qu,Qi,Pc=Pe({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:of,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qi&&(Qi&&t.type==="mousemove"?(Hu=t.screenX-Qi.screenX,qu=t.screenY-Qi.screenY):qu=Hu=0,Qi=t),Hu)},movementY:function(t){return"movementY"in t?t.movementY:qu}}),eg=zt(Pc),IT=Pe({},Pc,{dataTransfer:0}),TT=zt(IT),ST=Pe({},Zo,{relatedTarget:0}),Wu=zt(ST),NT=Pe({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),AT=zt(NT),RT=Pe({},xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PT=zt(RT),CT=Pe({},xi,{data:0}),tg=zt(CT),kT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DT[t])?!!e[t]:!1}function of(){return jT}var OT=Pe({},Zo,{key:function(t){if(t.key){var e=kT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:of,charCode:function(t){return t.type==="keypress"?gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LT=zt(OT),VT=Pe({},Pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ng=zt(VT),MT=Pe({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:of}),UT=zt(MT),FT=Pe({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),BT=zt(FT),zT=Pe({},Pc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$T=zt(zT),HT=[9,13,27,32],af=Fn&&"CompositionEvent"in window,uo=null;Fn&&"documentMode"in document&&(uo=document.documentMode);var qT=Fn&&"TextEvent"in window&&!uo,w_=Fn&&(!af||uo&&8<uo&&11>=uo),rg=" ",sg=!1;function x_(t,e){switch(t){case"keyup":return HT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bs=!1;function WT(t,e){switch(t){case"compositionend":return E_(e);case"keypress":return e.which!==32?null:(sg=!0,rg);case"textInput":return t=e.data,t===rg&&sg?null:t;default:return null}}function GT(t,e){if(bs)return t==="compositionend"||!af&&x_(t,e)?(t=__(),ml=rf=lr=null,bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return w_&&e.locale!=="ko"?null:e.data;default:return null}}var KT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KT[t.type]:e==="textarea"}function I_(t,e,n,r){e_(r),e=$l(e,"onChange"),0<e.length&&(n=new sf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ho=null,ko=null;function QT(t){j_(t,0)}function Cc(t){var e=Os(t);if(Gv(e))return t}function YT(t,e){if(t==="change")return e}var T_=!1;if(Fn){var Gu;if(Fn){var Ku="oninput"in document;if(!Ku){var og=document.createElement("div");og.setAttribute("oninput","return;"),Ku=typeof og.oninput=="function"}Gu=Ku}else Gu=!1;T_=Gu&&(!document.documentMode||9<document.documentMode)}function ag(){ho&&(ho.detachEvent("onpropertychange",S_),ko=ho=null)}function S_(t){if(t.propertyName==="value"&&Cc(ko)){var e=[];I_(e,ko,t,Jh(t)),s_(QT,e)}}function XT(t,e,n){t==="focusin"?(ag(),ho=e,ko=n,ho.attachEvent("onpropertychange",S_)):t==="focusout"&&ag()}function JT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cc(ko)}function ZT(t,e){if(t==="click")return Cc(e)}function eS(t,e){if(t==="input"||t==="change")return Cc(e)}function tS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:tS;function bo(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Td.call(e,s)||!on(t[s],e[s]))return!1}return!0}function lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cg(t,e){var n=lg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lg(n)}}function N_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?N_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function A_(){for(var t=window,e=Ll();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ll(t.document)}return e}function lf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nS(t){var e=A_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&N_(n.ownerDocument.documentElement,n)){if(r!==null&&lf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=cg(n,i);var o=cg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rS=Fn&&"documentMode"in document&&11>=document.documentMode,Ds=null,$d=null,fo=null,Hd=!1;function ug(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hd||Ds==null||Ds!==Ll(r)||(r=Ds,"selectionStart"in r&&lf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fo&&bo(fo,r)||(fo=r,r=$l($d,"onSelect"),0<r.length&&(e=new sf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ds)))}function Xa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var js={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionend:Xa("Transition","TransitionEnd")},Qu={},R_={};Fn&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function kc(t){if(Qu[t])return Qu[t];if(!js[t])return t;var e=js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R_)return Qu[t]=e[n];return t}var P_=kc("animationend"),C_=kc("animationiteration"),k_=kc("animationstart"),b_=kc("transitionend"),D_=new Map,dg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(t,e){D_.set(t,e),ms(e,[t])}for(var Yu=0;Yu<dg.length;Yu++){var Xu=dg[Yu],sS=Xu.toLowerCase(),iS=Xu[0].toUpperCase()+Xu.slice(1);Dr(sS,"on"+iS)}Dr(P_,"onAnimationEnd");Dr(C_,"onAnimationIteration");Dr(k_,"onAnimationStart");Dr("dblclick","onDoubleClick");Dr("focusin","onFocus");Dr("focusout","onBlur");Dr(b_,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var so="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oS=new Set("cancel close invalid load scroll toggle".split(" ").concat(so));function hg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sT(r,e,void 0,t),t.currentTarget=null}function j_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;hg(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;hg(s,l,d),i=c}}}if(Ml)throw t=Ud,Ml=!1,Ud=null,t}function Ee(t,e){var n=e[Qd];n===void 0&&(n=e[Qd]=new Set);var r=t+"__bubble";n.has(r)||(O_(e,t,2,!1),n.add(r))}function Ju(t,e,n){var r=0;e&&(r|=4),O_(n,t,r,e)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function Do(t){if(!t[Ja]){t[Ja]=!0,zv.forEach(function(n){n!=="selectionchange"&&(oS.has(n)||Ju(n,!1,t),Ju(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ja]||(e[Ja]=!0,Ju("selectionchange",!1,e))}}function O_(t,e,n,r){switch(v_(e)){case 1:var s=wT;break;case 4:s=xT;break;default:s=nf}n=s.bind(null,e,n,t),s=void 0,!Md||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Zu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Gr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}s_(function(){var d=i,f=Jh(n),p=[];e:{var g=D_.get(t);if(g!==void 0){var x=sf,w=t;switch(t){case"keypress":if(gl(n)===0)break e;case"keydown":case"keyup":x=LT;break;case"focusin":w="focus",x=Wu;break;case"focusout":w="blur",x=Wu;break;case"beforeblur":case"afterblur":x=Wu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=TT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=UT;break;case P_:case C_:case k_:x=AT;break;case b_:x=BT;break;case"scroll":x=ET;break;case"wheel":x=$T;break;case"copy":case"cut":case"paste":x=PT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=ng}var P=(e&4)!==0,A=!P&&t==="scroll",E=P?g!==null?g+"Capture":null:g;P=[];for(var _=d,S;_!==null;){S=_;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,E!==null&&(D=Ao(_,E),D!=null&&P.push(jo(_,D,S)))),A)break;_=_.return}0<P.length&&(g=new x(g,w,null,n,f),p.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==Ld&&(w=n.relatedTarget||n.fromElement)&&(Gr(w)||w[Bn]))break e;if((x||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=d,w=w?Gr(w):null,w!==null&&(A=gs(w),w!==A||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=d),x!==w)){if(P=eg,D="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=ng,D="onPointerLeave",E="onPointerEnter",_="pointer"),A=x==null?g:Os(x),S=w==null?g:Os(w),g=new P(D,_+"leave",x,n,f),g.target=A,g.relatedTarget=S,D=null,Gr(f)===d&&(P=new P(E,_+"enter",w,n,f),P.target=S,P.relatedTarget=A,D=P),A=D,x&&w)t:{for(P=x,E=w,_=0,S=P;S;S=Ns(S))_++;for(S=0,D=E;D;D=Ns(D))S++;for(;0<_-S;)P=Ns(P),_--;for(;0<S-_;)E=Ns(E),S--;for(;_--;){if(P===E||E!==null&&P===E.alternate)break t;P=Ns(P),E=Ns(E)}P=null}else P=null;x!==null&&fg(p,g,x,P,!1),w!==null&&A!==null&&fg(p,A,w,P,!0)}}e:{if(g=d?Os(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var V=YT;else if(ig(g))if(T_)V=eS;else{V=JT;var M=XT}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=ZT);if(V&&(V=V(t,d))){I_(p,V,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&kd(g,"number",g.value)}switch(M=d?Os(d):window,t){case"focusin":(ig(M)||M.contentEditable==="true")&&(Ds=M,$d=d,fo=null);break;case"focusout":fo=$d=Ds=null;break;case"mousedown":Hd=!0;break;case"contextmenu":case"mouseup":case"dragend":Hd=!1,ug(p,n,f);break;case"selectionchange":if(rS)break;case"keydown":case"keyup":ug(p,n,f)}var I;if(af)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else bs?x_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(w_&&n.locale!=="ko"&&(bs||v!=="onCompositionStart"?v==="onCompositionEnd"&&bs&&(I=__()):(lr=f,rf="value"in lr?lr.value:lr.textContent,bs=!0)),M=$l(d,v),0<M.length&&(v=new tg(v,t,null,n,f),p.push({event:v,listeners:M}),I?v.data=I:(I=E_(n),I!==null&&(v.data=I)))),(I=qT?WT(t,n):GT(t,n))&&(d=$l(d,"onBeforeInput"),0<d.length&&(f=new tg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=I))}j_(p,e)})}function jo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $l(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ao(t,n),i!=null&&r.unshift(jo(t,i,s)),i=Ao(t,e),i!=null&&r.push(jo(t,i,s))),t=t.return}return r}function Ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Ao(n,i),c!=null&&o.unshift(jo(n,c,l))):s||(c=Ao(n,i),c!=null&&o.push(jo(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aS=/\r\n?/g,lS=/\u0000|\uFFFD/g;function pg(t){return(typeof t=="string"?t:""+t).replace(aS,`
`).replace(lS,"")}function Za(t,e,n){if(e=pg(e),pg(t)!==e&&n)throw Error(B(425))}function Hl(){}var qd=null,Wd=null;function Gd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,cS=typeof clearTimeout=="function"?clearTimeout:void 0,mg=typeof Promise=="function"?Promise:void 0,uS=typeof queueMicrotask=="function"?queueMicrotask:typeof mg<"u"?function(t){return mg.resolve(null).then(t).catch(dS)}:Kd;function dS(t){setTimeout(function(){throw t})}function ed(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Co(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Co(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ei=Math.random().toString(36).slice(2),un="__reactFiber$"+Ei,Oo="__reactProps$"+Ei,Bn="__reactContainer$"+Ei,Qd="__reactEvents$"+Ei,hS="__reactListeners$"+Ei,fS="__reactHandles$"+Ei;function Gr(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bn]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gg(t);t!==null;){if(n=t[un])return n;t=gg(t)}return e}t=n,n=t.parentNode}return null}function ea(t){return t=t[un]||t[Bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Os(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function bc(t){return t[Oo]||null}var Yd=[],Ls=-1;function jr(t){return{current:t}}function Ie(t){0>Ls||(t.current=Yd[Ls],Yd[Ls]=null,Ls--)}function we(t,e){Ls++,Yd[Ls]=t.current,t.current=e}var Ar={},gt=jr(Ar),Ct=jr(!1),rs=Ar;function ei(t,e){var n=t.type.contextTypes;if(!n)return Ar;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kt(t){return t=t.childContextTypes,t!=null}function ql(){Ie(Ct),Ie(gt)}function yg(t,e,n){if(gt.current!==Ar)throw Error(B(168));we(gt,e),we(Ct,n)}function L_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,XI(t)||"Unknown",s));return Pe({},n,r)}function Wl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ar,rs=gt.current,we(gt,t),we(Ct,Ct.current),!0}function vg(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=L_(t,e,rs),r.__reactInternalMemoizedMergedChildContext=t,Ie(Ct),Ie(gt),we(gt,t)):Ie(Ct),we(Ct,n)}var kn=null,Dc=!1,td=!1;function V_(t){kn===null?kn=[t]:kn.push(t)}function pS(t){Dc=!0,V_(t)}function Or(){if(!td&&kn!==null){td=!0;var t=0,e=me;try{var n=kn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kn=null,Dc=!1}catch(s){throw kn!==null&&(kn=kn.slice(t+1)),l_(Zh,Or),s}finally{me=e,td=!1}}return null}var Vs=[],Ms=0,Gl=null,Kl=0,Ht=[],qt=0,ss=null,Dn=1,jn="";function Hr(t,e){Vs[Ms++]=Kl,Vs[Ms++]=Gl,Gl=t,Kl=e}function M_(t,e,n){Ht[qt++]=Dn,Ht[qt++]=jn,Ht[qt++]=ss,ss=t;var r=Dn;t=jn;var s=32-nn(r)-1;r&=~(1<<s),n+=1;var i=32-nn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Dn=1<<32-nn(e)+s|n<<s|r,jn=i+t}else Dn=1<<i|n<<s|r,jn=t}function cf(t){t.return!==null&&(Hr(t,1),M_(t,1,0))}function uf(t){for(;t===Gl;)Gl=Vs[--Ms],Vs[Ms]=null,Kl=Vs[--Ms],Vs[Ms]=null;for(;t===ss;)ss=Ht[--qt],Ht[qt]=null,jn=Ht[--qt],Ht[qt]=null,Dn=Ht[--qt],Ht[qt]=null}var Mt=null,Ot=null,Te=!1,en=null;function U_(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _g(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Ot=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Ot=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ss!==null?{id:Dn,overflow:jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Ot=null,!0):!1;default:return!1}}function Xd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jd(t){if(Te){var e=Ot;if(e){var n=e;if(!_g(t,e)){if(Xd(t))throw Error(B(418));e=gr(n.nextSibling);var r=Mt;e&&_g(t,e)?U_(r,n):(t.flags=t.flags&-4097|2,Te=!1,Mt=t)}}else{if(Xd(t))throw Error(B(418));t.flags=t.flags&-4097|2,Te=!1,Mt=t}}}function wg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function el(t){if(t!==Mt)return!1;if(!Te)return wg(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gd(t.type,t.memoizedProps)),e&&(e=Ot)){if(Xd(t))throw F_(),Error(B(418));for(;e;)U_(t,e),e=gr(e.nextSibling)}if(wg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ot=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ot=null}}else Ot=Mt?gr(t.stateNode.nextSibling):null;return!0}function F_(){for(var t=Ot;t;)t=gr(t.nextSibling)}function ti(){Ot=Mt=null,Te=!1}function df(t){en===null?en=[t]:en.push(t)}var mS=Qn.ReactCurrentBatchConfig;function Yi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function tl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xg(t){var e=t._init;return e(t._payload)}function B_(t){function e(E,_){if(t){var S=E.deletions;S===null?(E.deletions=[_],E.flags|=16):S.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=wr(E,_),E.index=0,E.sibling=null,E}function i(E,_,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<_?(E.flags|=2,_):S):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,S,D){return _===null||_.tag!==6?(_=ld(S,E.mode,D),_.return=E,_):(_=s(_,S),_.return=E,_)}function c(E,_,S,D){var V=S.type;return V===ks?f(E,_,S.props.children,D,S.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===tr&&xg(V)===_.type)?(D=s(_,S.props),D.ref=Yi(E,_,S),D.return=E,D):(D=Il(S.type,S.key,S.props,null,E.mode,D),D.ref=Yi(E,_,S),D.return=E,D)}function d(E,_,S,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=cd(S,E.mode,D),_.return=E,_):(_=s(_,S.children||[]),_.return=E,_)}function f(E,_,S,D,V){return _===null||_.tag!==7?(_=Zr(S,E.mode,D,V),_.return=E,_):(_=s(_,S),_.return=E,_)}function p(E,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ld(""+_,E.mode,S),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ha:return S=Il(_.type,_.key,_.props,null,E.mode,S),S.ref=Yi(E,null,_),S.return=E,S;case Cs:return _=cd(_,E.mode,S),_.return=E,_;case tr:var D=_._init;return p(E,D(_._payload),S)}if(no(_)||qi(_))return _=Zr(_,E.mode,S,null),_.return=E,_;tl(E,_)}return null}function g(E,_,S,D){var V=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return V!==null?null:l(E,_,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ha:return S.key===V?c(E,_,S,D):null;case Cs:return S.key===V?d(E,_,S,D):null;case tr:return V=S._init,g(E,_,V(S._payload),D)}if(no(S)||qi(S))return V!==null?null:f(E,_,S,D,null);tl(E,S)}return null}function x(E,_,S,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(S)||null,l(_,E,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ha:return E=E.get(D.key===null?S:D.key)||null,c(_,E,D,V);case Cs:return E=E.get(D.key===null?S:D.key)||null,d(_,E,D,V);case tr:var M=D._init;return x(E,_,S,M(D._payload),V)}if(no(D)||qi(D))return E=E.get(S)||null,f(_,E,D,V,null);tl(_,D)}return null}function w(E,_,S,D){for(var V=null,M=null,I=_,v=_=0,T=null;I!==null&&v<S.length;v++){I.index>v?(T=I,I=null):T=I.sibling;var R=g(E,I,S[v],D);if(R===null){I===null&&(I=T);break}t&&I&&R.alternate===null&&e(E,I),_=i(R,_,v),M===null?V=R:M.sibling=R,M=R,I=T}if(v===S.length)return n(E,I),Te&&Hr(E,v),V;if(I===null){for(;v<S.length;v++)I=p(E,S[v],D),I!==null&&(_=i(I,_,v),M===null?V=I:M.sibling=I,M=I);return Te&&Hr(E,v),V}for(I=r(E,I);v<S.length;v++)T=x(I,E,v,S[v],D),T!==null&&(t&&T.alternate!==null&&I.delete(T.key===null?v:T.key),_=i(T,_,v),M===null?V=T:M.sibling=T,M=T);return t&&I.forEach(function(k){return e(E,k)}),Te&&Hr(E,v),V}function P(E,_,S,D){var V=qi(S);if(typeof V!="function")throw Error(B(150));if(S=V.call(S),S==null)throw Error(B(151));for(var M=V=null,I=_,v=_=0,T=null,R=S.next();I!==null&&!R.done;v++,R=S.next()){I.index>v?(T=I,I=null):T=I.sibling;var k=g(E,I,R.value,D);if(k===null){I===null&&(I=T);break}t&&I&&k.alternate===null&&e(E,I),_=i(k,_,v),M===null?V=k:M.sibling=k,M=k,I=T}if(R.done)return n(E,I),Te&&Hr(E,v),V;if(I===null){for(;!R.done;v++,R=S.next())R=p(E,R.value,D),R!==null&&(_=i(R,_,v),M===null?V=R:M.sibling=R,M=R);return Te&&Hr(E,v),V}for(I=r(E,I);!R.done;v++,R=S.next())R=x(I,E,v,R.value,D),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?v:R.key),_=i(R,_,v),M===null?V=R:M.sibling=R,M=R);return t&&I.forEach(function(C){return e(E,C)}),Te&&Hr(E,v),V}function A(E,_,S,D){if(typeof S=="object"&&S!==null&&S.type===ks&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ha:e:{for(var V=S.key,M=_;M!==null;){if(M.key===V){if(V=S.type,V===ks){if(M.tag===7){n(E,M.sibling),_=s(M,S.props.children),_.return=E,E=_;break e}}else if(M.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===tr&&xg(V)===M.type){n(E,M.sibling),_=s(M,S.props),_.ref=Yi(E,M,S),_.return=E,E=_;break e}n(E,M);break}else e(E,M);M=M.sibling}S.type===ks?(_=Zr(S.props.children,E.mode,D,S.key),_.return=E,E=_):(D=Il(S.type,S.key,S.props,null,E.mode,D),D.ref=Yi(E,_,S),D.return=E,E=D)}return o(E);case Cs:e:{for(M=S.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(E,_.sibling),_=s(_,S.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=cd(S,E.mode,D),_.return=E,E=_}return o(E);case tr:return M=S._init,A(E,_,M(S._payload),D)}if(no(S))return w(E,_,S,D);if(qi(S))return P(E,_,S,D);tl(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,S),_.return=E,E=_):(n(E,_),_=ld(S,E.mode,D),_.return=E,E=_),o(E)):n(E,_)}return A}var ni=B_(!0),z_=B_(!1),Ql=jr(null),Yl=null,Us=null,hf=null;function ff(){hf=Us=Yl=null}function pf(t){var e=Ql.current;Ie(Ql),t._currentValue=e}function Zd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gs(t,e){Yl=t,hf=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(hf!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(Yl===null)throw Error(B(308));Us=t,Yl.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var Kr=null;function mf(t){Kr===null?Kr=[t]:Kr.push(t)}function $_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,mf(e)):(n.next=s.next,s.next=n),e.interleaved=n,zn(t,r)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zn(t,n)}return s=r.interleaved,s===null?(e.next=e,mf(r)):(e.next=s.next,s.next=e),r.interleaved=e,zn(t,n)}function yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ef(t,n)}}function Eg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xl(t,e,n,r){var s=t.updateQueue;nr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,f=d=c=null,l=i;do{var g=l.lane,x=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,P=l;switch(g=e,x=n,P.tag){case 1:if(w=P.payload,typeof w=="function"){p=w.call(x,p,g);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=P.payload,g=typeof w=="function"?w.call(x,p,g):w,g==null)break e;p=Pe({},p,g);break e;case 2:nr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=x,c=p):f=f.next=x,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);os|=o,t.lanes=o,t.memoizedState=p}}function Ig(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var ta={},fn=jr(ta),Lo=jr(ta),Vo=jr(ta);function Qr(t){if(t===ta)throw Error(B(174));return t}function yf(t,e){switch(we(Vo,e),we(Lo,t),we(fn,ta),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dd(e,t)}Ie(fn),we(fn,e)}function ri(){Ie(fn),Ie(Lo),Ie(Vo)}function q_(t){Qr(Vo.current);var e=Qr(fn.current),n=Dd(e,t.type);e!==n&&(we(Lo,t),we(fn,n))}function vf(t){Lo.current===t&&(Ie(fn),Ie(Lo))}var Ne=jr(0);function Jl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nd=[];function _f(){for(var t=0;t<nd.length;t++)nd[t]._workInProgressVersionPrimary=null;nd.length=0}var vl=Qn.ReactCurrentDispatcher,rd=Qn.ReactCurrentBatchConfig,is=0,Re=null,$e=null,Ge=null,Zl=!1,po=!1,Mo=0,gS=0;function at(){throw Error(B(321))}function wf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function xf(t,e,n,r,s,i){if(is=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vl.current=t===null||t.memoizedState===null?wS:xS,t=n(r,s),po){i=0;do{if(po=!1,Mo=0,25<=i)throw Error(B(301));i+=1,Ge=$e=null,e.updateQueue=null,vl.current=ES,t=n(r,s)}while(po)}if(vl.current=ec,e=$e!==null&&$e.next!==null,is=0,Ge=$e=Re=null,Zl=!1,e)throw Error(B(300));return t}function Ef(){var t=Mo!==0;return Mo=0,t}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Re.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Qt(){if($e===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ge===null?Re.memoizedState:Ge.next;if(e!==null)Ge=e,$e=t;else{if(t===null)throw Error(B(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ge===null?Re.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Uo(t,e){return typeof e=="function"?e(t):e}function sd(t){var e=Qt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((is&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,Re.lanes|=f,os|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,on(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,os|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function id(t){var e=Qt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function W_(){}function G_(t,e){var n=Re,r=Qt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,Pt=!0),r=r.queue,If(Y_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Fo(9,Q_.bind(null,n,r,s,e),void 0,null),Qe===null)throw Error(B(349));is&30||K_(n,e,s)}return s}function K_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q_(t,e,n,r){e.value=n,e.getSnapshot=r,X_(e)&&J_(t)}function Y_(t,e,n){return n(function(){X_(e)&&J_(t)})}function X_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function J_(t){var e=zn(t,1);e!==null&&rn(e,t,1,-1)}function Tg(t){var e=cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:t},e.queue=t,t=t.dispatch=_S.bind(null,Re,t),[e.memoizedState,t]}function Fo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Z_(){return Qt().memoizedState}function _l(t,e,n,r){var s=cn();Re.flags|=t,s.memoizedState=Fo(1|e,n,void 0,r===void 0?null:r)}function jc(t,e,n,r){var s=Qt();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&wf(r,o.deps)){s.memoizedState=Fo(e,n,i,r);return}}Re.flags|=t,s.memoizedState=Fo(1|e,n,i,r)}function Sg(t,e){return _l(8390656,8,t,e)}function If(t,e){return jc(2048,8,t,e)}function e0(t,e){return jc(4,2,t,e)}function t0(t,e){return jc(4,4,t,e)}function n0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function r0(t,e,n){return n=n!=null?n.concat([t]):null,jc(4,4,n0.bind(null,e,t),n)}function Tf(){}function s0(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function i0(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function o0(t,e,n){return is&21?(on(n,e)||(n=d_(),Re.lanes|=n,os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function yS(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=rd.transition;rd.transition={};try{t(!1),e()}finally{me=n,rd.transition=r}}function a0(){return Qt().memoizedState}function vS(t,e,n){var r=_r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},l0(t))c0(e,n);else if(n=$_(t,e,n,r),n!==null){var s=It();rn(n,t,r,s),u0(n,e,r)}}function _S(t,e,n){var r=_r(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(l0(t))c0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,on(l,o)){var c=e.interleaved;c===null?(s.next=s,mf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=$_(t,e,s,r),n!==null&&(s=It(),rn(n,t,r,s),u0(n,e,r))}}function l0(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function c0(t,e){po=Zl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function u0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ef(t,n)}}var ec={readContext:Kt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},wS={readContext:Kt,useCallback:function(t,e){return cn().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:Sg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_l(4194308,4,n0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _l(4194308,4,t,e)},useInsertionEffect:function(t,e){return _l(4,2,t,e)},useMemo:function(t,e){var n=cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vS.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=cn();return t={current:t},e.memoizedState=t},useState:Tg,useDebugValue:Tf,useDeferredValue:function(t){return cn().memoizedState=t},useTransition:function(){var t=Tg(!1),e=t[0];return t=yS.bind(null,t[1]),cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=cn();if(Te){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Qe===null)throw Error(B(349));is&30||K_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Sg(Y_.bind(null,r,i,t),[t]),r.flags|=2048,Fo(9,Q_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=cn(),e=Qe.identifierPrefix;if(Te){var n=jn,r=Dn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xS={readContext:Kt,useCallback:s0,useContext:Kt,useEffect:If,useImperativeHandle:r0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:i0,useReducer:sd,useRef:Z_,useState:function(){return sd(Uo)},useDebugValue:Tf,useDeferredValue:function(t){var e=Qt();return o0(e,$e.memoizedState,t)},useTransition:function(){var t=sd(Uo)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:G_,useId:a0,unstable_isNewReconciler:!1},ES={readContext:Kt,useCallback:s0,useContext:Kt,useEffect:If,useImperativeHandle:r0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:i0,useReducer:id,useRef:Z_,useState:function(){return id(Uo)},useDebugValue:Tf,useDeferredValue:function(t){var e=Qt();return $e===null?e.memoizedState=t:o0(e,$e.memoizedState,t)},useTransition:function(){var t=id(Uo)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:G_,useId:a0,unstable_isNewReconciler:!1};function Jt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function eh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Oc={isMounted:function(t){return(t=t._reactInternals)?gs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),s=_r(t),i=Un(r,s);i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(rn(e,t,s,r),yl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),s=_r(t),i=Un(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(rn(e,t,s,r),yl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=_r(t),s=Un(n,r);s.tag=2,e!=null&&(s.callback=e),e=yr(t,s,r),e!==null&&(rn(e,t,r,n),yl(e,t,r))}};function Ng(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!bo(n,r)||!bo(s,i):!0}function d0(t,e,n){var r=!1,s=Ar,i=e.contextType;return typeof i=="object"&&i!==null?i=Kt(i):(s=kt(e)?rs:gt.current,r=e.contextTypes,i=(r=r!=null)?ei(t,s):Ar),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ag(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Oc.enqueueReplaceState(e,e.state,null)}function th(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},gf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Kt(i):(i=kt(e)?rs:gt.current,s.context=ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(eh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Oc.enqueueReplaceState(s,s.state,null),Xl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,e){try{var n="",r=e;do n+=YI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function od(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IS=typeof WeakMap=="function"?WeakMap:Map;function h0(t,e,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nc||(nc=!0,hh=r),nh(t,e)},n}function f0(t,e,n){n=Un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){nh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nh(t,e),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=VS.bind(null,t,e,n),e.then(t,t))}function Pg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Un(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var TS=Qn.ReactCurrentOwner,Pt=!1;function wt(t,e,n,r){e.child=t===null?z_(e,null,n,r):ni(e,t.child,n,r)}function kg(t,e,n,r,s){n=n.render;var i=e.ref;return Gs(e,s),r=xf(t,e,n,r,i,s),n=Ef(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Te&&n&&cf(e),e.flags|=1,wt(t,e,r,s),e.child)}function bg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!bf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,p0(t,e,i,r,s)):(t=Il(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:bo,n(o,r)&&t.ref===e.ref)return $n(t,e,s)}return e.flags|=1,t=wr(i,r),t.ref=e.ref,t.return=e,e.child=t}function p0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(bo(i,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,$n(t,e,s)}return rh(t,e,n,r,s)}function m0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Bs,jt),jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(Bs,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(Bs,jt),jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(Bs,jt),jt|=r;return wt(t,e,s,n),e.child}function g0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rh(t,e,n,r,s){var i=kt(n)?rs:gt.current;return i=ei(e,i),Gs(e,s),n=xf(t,e,n,r,i,s),r=Ef(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Te&&r&&cf(e),e.flags|=1,wt(t,e,n,s),e.child)}function Dg(t,e,n,r,s){if(kt(n)){var i=!0;Wl(e)}else i=!1;if(Gs(e,s),e.stateNode===null)wl(t,e),d0(e,n,r),th(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Kt(d):(d=kt(n)?rs:gt.current,d=ei(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Ag(e,o,r,d),nr=!1;var g=e.memoizedState;o.state=g,Xl(e,r,o,s),c=e.memoizedState,l!==r||g!==c||Ct.current||nr?(typeof f=="function"&&(eh(e,n,f,r),c=e.memoizedState),(l=nr||Ng(e,n,l,r,g,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,H_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Jt(e.type,l),o.props=d,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kt(c):(c=kt(n)?rs:gt.current,c=ei(e,c));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==c)&&Ag(e,o,r,c),nr=!1,g=e.memoizedState,o.state=g,Xl(e,r,o,s);var w=e.memoizedState;l!==p||g!==w||Ct.current||nr?(typeof x=="function"&&(eh(e,n,x,r),w=e.memoizedState),(d=nr||Ng(e,n,d,r,g,w,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return sh(t,e,n,r,i,s)}function sh(t,e,n,r,s,i){g0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&vg(e,n,!1),$n(t,e,i);r=e.stateNode,TS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ni(e,t.child,null,i),e.child=ni(e,null,l,i)):wt(t,e,l,i),e.memoizedState=r.state,s&&vg(e,n,!0),e.child}function y0(t){var e=t.stateNode;e.pendingContext?yg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yg(t,e.context,!1),yf(t,e.containerInfo)}function jg(t,e,n,r,s){return ti(),df(s),e.flags|=256,wt(t,e,n,r),e.child}var ih={dehydrated:null,treeContext:null,retryLane:0};function oh(t){return{baseLanes:t,cachePool:null,transitions:null}}function v0(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(Ne,s&1),t===null)return Jd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Mc(o,r,0,null),t=Zr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=oh(n),e.memoizedState=ih,t):Sf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return SS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=wr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=wr(l,i):(i=Zr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?oh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ih,r}return i=t.child,t=i.sibling,r=wr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sf(t,e){return e=Mc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nl(t,e,n,r){return r!==null&&df(r),ni(e,t.child,null,n),t=Sf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=od(Error(B(422))),nl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Mc({mode:"visible",children:r.children},s,0,null),i=Zr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ni(e,t.child,null,o),e.child.memoizedState=oh(o),e.memoizedState=ih,i);if(!(e.mode&1))return nl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=od(i,r,void 0),nl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Pt||l){if(r=Qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zn(t,s),rn(r,t,s,-1))}return kf(),r=od(Error(B(421))),nl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=MS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ot=gr(s.nextSibling),Mt=e,Te=!0,en=null,t!==null&&(Ht[qt++]=Dn,Ht[qt++]=jn,Ht[qt++]=ss,Dn=t.id,jn=t.overflow,ss=e),e=Sf(e,r.children),e.flags|=4096,e)}function Og(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zd(t.return,e,n)}function ad(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Og(t,n,e);else if(t.tag===19)Og(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ad(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ad(e,!0,n,null,i);break;case"together":ad(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NS(t,e,n){switch(e.tag){case 3:y0(e),ti();break;case 5:q_(e);break;case 1:kt(e.type)&&Wl(e);break;case 4:yf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(Ql,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?v0(t,e,n):(we(Ne,Ne.current&1),t=$n(t,e,n),t!==null?t.sibling:null);we(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,m0(t,e,n)}return $n(t,e,n)}var w0,ah,x0,E0;w0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ah=function(){};x0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Qr(fn.current);var i=null;switch(n){case"input":s=Pd(t,s),r=Pd(t,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=bd(t,s),r=bd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hl)}jd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(So.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(So.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ee("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};E0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xi(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AS(t,e,n){var r=e.pendingProps;switch(uf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return kt(e.type)&&ql(),lt(e),null;case 3:return r=e.stateNode,ri(),Ie(Ct),Ie(gt),_f(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(el(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(mh(en),en=null))),ah(t,e),lt(e),null;case 5:vf(e);var s=Qr(Vo.current);if(n=e.type,t!==null&&e.stateNode!=null)x0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return lt(e),null}if(t=Qr(fn.current),el(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[un]=e,r[Oo]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<so.length;s++)Ee(so[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Hm(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":Wm(r,i),Ee("invalid",r)}jd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Za(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Za(r.textContent,l,t),s=["children",""+l]):So.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":qa(r),qm(r,i,!0);break;case"textarea":qa(r),Gm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Hl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[un]=e,t[Oo]=r,w0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Od(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<so.length;s++)Ee(so[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":Hm(t,r),s=Pd(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Wm(t,r),s=bd(t,r),Ee("invalid",t);break;default:s=r}jd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Zv(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Xv(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&No(t,c):typeof c=="number"&&No(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(So.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ee("scroll",t):c!=null&&Kh(t,i,c,o))}switch(n){case"input":qa(t),qm(t,r,!1);break;case"textarea":qa(t),Gm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Nr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$s(t,!!r.multiple,i,!1):r.defaultValue!=null&&$s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)E0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Qr(Vo.current),Qr(fn.current),el(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(i=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:Za(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Za(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return lt(e),null;case 13:if(Ie(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Ot!==null&&e.mode&1&&!(e.flags&128))F_(),ti(),e.flags|=98560,i=!1;else if(i=el(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[un]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else en!==null&&(mh(en),en=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?qe===0&&(qe=3):kf())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return ri(),ah(t,e),t===null&&Do(e.stateNode.containerInfo),lt(e),null;case 10:return pf(e.type._context),lt(e),null;case 17:return kt(e.type)&&ql(),lt(e),null;case 19:if(Ie(Ne),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Xi(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jl(t),o!==null){for(e.flags|=128,Xi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&Le()>ii&&(e.flags|=128,r=!0,Xi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Jl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return lt(e),null}else 2*Le()-i.renderingStartTime>ii&&n!==1073741824&&(e.flags|=128,r=!0,Xi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Le(),e.sibling=null,n=Ne.current,we(Ne,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return Cf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function RS(t,e){switch(uf(e),e.tag){case 1:return kt(e.type)&&ql(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),Ie(Ct),Ie(gt),_f(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vf(e),null;case 13:if(Ie(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ne),null;case 4:return ri(),null;case 10:return pf(e.type._context),null;case 22:case 23:return Cf(),null;case 24:return null;default:return null}}var rl=!1,ft=!1,PS=typeof WeakSet=="function"?WeakSet:Set,W=null;function Fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function lh(t,e,n){try{n()}catch(r){be(t,e,r)}}var Lg=!1;function CS(t,e){if(qd=Bl,t=A_(),lf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var x;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)g=p,p=x;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(c=o),(x=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wd={focusedElem:t,selectionRange:n},Bl=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var P=w.memoizedProps,A=w.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?P:Jt(e.type,P),A);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(D){be(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return w=Lg,Lg=!1,w}function mo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&lh(e,n,i)}s=s.next}while(s!==r)}}function Lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ch(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function I0(t){var e=t.alternate;e!==null&&(t.alternate=null,I0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[Oo],delete e[Qd],delete e[hS],delete e[fS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function T0(t){return t.tag===5||t.tag===3||t.tag===4}function Vg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||T0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hl));else if(r!==4&&(t=t.child,t!==null))for(uh(t,e,n),t=t.sibling;t!==null;)uh(t,e,n),t=t.sibling}function dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dh(t,e,n),t=t.sibling;t!==null;)dh(t,e,n),t=t.sibling}var Xe=null,Zt=!1;function Zn(t,e,n){for(n=n.child;n!==null;)S0(t,e,n),n=n.sibling}function S0(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Rc,n)}catch{}switch(n.tag){case 5:ft||Fs(n,e);case 6:var r=Xe,s=Zt;Xe=null,Zn(t,e,n),Xe=r,Zt=s,Xe!==null&&(Zt?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(Zt?(t=Xe,n=n.stateNode,t.nodeType===8?ed(t.parentNode,n):t.nodeType===1&&ed(t,n),Co(t)):ed(Xe,n.stateNode));break;case 4:r=Xe,s=Zt,Xe=n.stateNode.containerInfo,Zt=!0,Zn(t,e,n),Xe=r,Zt=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&lh(n,e,o),s=s.next}while(s!==r)}Zn(t,e,n);break;case 1:if(!ft&&(Fs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}Zn(t,e,n);break;case 21:Zn(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,Zn(t,e,n),ft=r):Zn(t,e,n);break;default:Zn(t,e,n)}}function Mg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new PS),e.forEach(function(r){var s=US.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,Zt=!1;break e;case 3:Xe=l.stateNode.containerInfo,Zt=!0;break e;case 4:Xe=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(Xe===null)throw Error(B(160));S0(i,o,s),Xe=null,Zt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){be(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)N0(e,t),e=e.sibling}function N0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),ln(t),r&4){try{mo(3,t,t.return),Lc(3,t)}catch(P){be(t,t.return,P)}try{mo(5,t,t.return)}catch(P){be(t,t.return,P)}}break;case 1:Xt(e,t),ln(t),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(Xt(e,t),ln(t),r&512&&n!==null&&Fs(n,n.return),t.flags&32){var s=t.stateNode;try{No(s,"")}catch(P){be(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Kv(s,i),Od(l,o);var d=Od(l,i);for(o=0;o<c.length;o+=2){var f=c[o],p=c[o+1];f==="style"?Zv(s,p):f==="dangerouslySetInnerHTML"?Xv(s,p):f==="children"?No(s,p):Kh(s,f,p,d)}switch(l){case"input":Cd(s,i);break;case"textarea":Qv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?$s(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?$s(s,!!i.multiple,i.defaultValue,!0):$s(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oo]=i}catch(P){be(t,t.return,P)}}break;case 6:if(Xt(e,t),ln(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){be(t,t.return,P)}}break;case 3:if(Xt(e,t),ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Co(e.containerInfo)}catch(P){be(t,t.return,P)}break;case 4:Xt(e,t),ln(t);break;case 13:Xt(e,t),ln(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Rf=Le())),r&4&&Mg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(d=ft)||f,Xt(e,t),ft=d):Xt(e,t),ln(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(p=W=f;W!==null;){switch(g=W,x=g.child,g.tag){case 0:case 11:case 14:case 15:mo(4,g,g.return);break;case 1:Fs(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(P){be(r,n,P)}}break;case 5:Fs(g,g.return);break;case 22:if(g.memoizedState!==null){Fg(p);continue}}x!==null?(x.return=g,W=x):Fg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Jv("display",o))}catch(P){be(t,t.return,P)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(P){be(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Xt(e,t),ln(t),r&4&&Mg(t);break;case 21:break;default:Xt(e,t),ln(t)}}function ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(T0(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(No(s,""),r.flags&=-33);var i=Vg(t);dh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Vg(t);uh(t,l,o);break;default:throw Error(B(161))}}catch(c){be(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kS(t,e,n){W=t,A0(t)}function A0(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||rl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ft;l=rl;var d=ft;if(rl=o,(ft=c)&&!d)for(W=s;W!==null;)o=W,c=o.child,o.tag===22&&o.memoizedState!==null?Bg(s):c!==null?(c.return=o,W=c):Bg(s);for(;i!==null;)W=i,A0(i),i=i.sibling;W=s,rl=l,ft=d}Ug(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Ug(t)}}function Ug(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Lc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ig(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ig(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Co(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ft||e.flags&512&&ch(e)}catch(g){be(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Fg(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Bg(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lc(4,e)}catch(c){be(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){be(e,s,c)}}var i=e.return;try{ch(e)}catch(c){be(e,i,c)}break;case 5:var o=e.return;try{ch(e)}catch(c){be(e,o,c)}}}catch(c){be(e,e.return,c)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var bS=Math.ceil,tc=Qn.ReactCurrentDispatcher,Nf=Qn.ReactCurrentOwner,Gt=Qn.ReactCurrentBatchConfig,ce=0,Qe=null,Ue=null,et=0,jt=0,Bs=jr(0),qe=0,Bo=null,os=0,Vc=0,Af=0,go=null,At=null,Rf=0,ii=1/0,Cn=null,nc=!1,hh=null,vr=null,sl=!1,cr=null,rc=0,yo=0,fh=null,xl=-1,El=0;function It(){return ce&6?Le():xl!==-1?xl:xl=Le()}function _r(t){return t.mode&1?ce&2&&et!==0?et&-et:mS.transition!==null?(El===0&&(El=d_()),El):(t=me,t!==0||(t=window.event,t=t===void 0?16:v_(t.type)),t):1}function rn(t,e,n,r){if(50<yo)throw yo=0,fh=null,Error(B(185));Jo(t,n,r),(!(ce&2)||t!==Qe)&&(t===Qe&&(!(ce&2)&&(Vc|=n),qe===4&&sr(t,et)),bt(t,r),n===1&&ce===0&&!(e.mode&1)&&(ii=Le()+500,Dc&&Or()))}function bt(t,e){var n=t.callbackNode;mT(t,e);var r=Fl(t,t===Qe?et:0);if(r===0)n!==null&&Ym(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ym(n),e===1)t.tag===0?pS(zg.bind(null,t)):V_(zg.bind(null,t)),uS(function(){!(ce&6)&&Or()}),n=null;else{switch(h_(r)){case 1:n=Zh;break;case 4:n=c_;break;case 16:n=Ul;break;case 536870912:n=u_;break;default:n=Ul}n=O0(n,R0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R0(t,e){if(xl=-1,El=0,ce&6)throw Error(B(327));var n=t.callbackNode;if(Ks()&&t.callbackNode!==n)return null;var r=Fl(t,t===Qe?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sc(t,r);else{e=r;var s=ce;ce|=2;var i=C0();(Qe!==t||et!==e)&&(Cn=null,ii=Le()+500,Jr(t,e));do try{OS();break}catch(l){P0(t,l)}while(!0);ff(),tc.current=i,ce=s,Ue!==null?e=0:(Qe=null,et=0,e=qe)}if(e!==0){if(e===2&&(s=Fd(t),s!==0&&(r=s,e=ph(t,s))),e===1)throw n=Bo,Jr(t,0),sr(t,r),bt(t,Le()),n;if(e===6)sr(t,r);else{if(s=t.current.alternate,!(r&30)&&!DS(s)&&(e=sc(t,r),e===2&&(i=Fd(t),i!==0&&(r=i,e=ph(t,i))),e===1))throw n=Bo,Jr(t,0),sr(t,r),bt(t,Le()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:qr(t,At,Cn);break;case 3:if(sr(t,r),(r&130023424)===r&&(e=Rf+500-Le(),10<e)){if(Fl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Kd(qr.bind(null,t,At,Cn),e);break}qr(t,At,Cn);break;case 4:if(sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-nn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bS(r/1960))-r,10<r){t.timeoutHandle=Kd(qr.bind(null,t,At,Cn),r);break}qr(t,At,Cn);break;case 5:qr(t,At,Cn);break;default:throw Error(B(329))}}}return bt(t,Le()),t.callbackNode===n?R0.bind(null,t):null}function ph(t,e){var n=go;return t.current.memoizedState.isDehydrated&&(Jr(t,e).flags|=256),t=sc(t,e),t!==2&&(e=At,At=n,e!==null&&mh(e)),t}function mh(t){At===null?At=t:At.push.apply(At,t)}function DS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~Af,e&=~Vc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function zg(t){if(ce&6)throw Error(B(327));Ks();var e=Fl(t,0);if(!(e&1))return bt(t,Le()),null;var n=sc(t,e);if(t.tag!==0&&n===2){var r=Fd(t);r!==0&&(e=r,n=ph(t,r))}if(n===1)throw n=Bo,Jr(t,0),sr(t,e),bt(t,Le()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qr(t,At,Cn),bt(t,Le()),null}function Pf(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(ii=Le()+500,Dc&&Or())}}function as(t){cr!==null&&cr.tag===0&&!(ce&6)&&Ks();var e=ce;ce|=1;var n=Gt.transition,r=me;try{if(Gt.transition=null,me=1,t)return t()}finally{me=r,Gt.transition=n,ce=e,!(ce&6)&&Or()}}function Cf(){jt=Bs.current,Ie(Bs)}function Jr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cS(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(uf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ql();break;case 3:ri(),Ie(Ct),Ie(gt),_f();break;case 5:vf(r);break;case 4:ri();break;case 13:Ie(Ne);break;case 19:Ie(Ne);break;case 10:pf(r.type._context);break;case 22:case 23:Cf()}n=n.return}if(Qe=t,Ue=t=wr(t.current,null),et=jt=e,qe=0,Bo=null,Af=Vc=os=0,At=go=null,Kr!==null){for(e=0;e<Kr.length;e++)if(n=Kr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Kr=null}return t}function P0(t,e){do{var n=Ue;try{if(ff(),vl.current=ec,Zl){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zl=!1}if(is=0,Ge=$e=Re=null,po=!1,Mo=0,Nf.current=null,n===null||n.return===null){qe=1,Bo=e,Ue=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Pg(o);if(x!==null){x.flags&=-257,Cg(x,o,l,i,e),x.mode&1&&Rg(i,d,e),e=x,c=d;var w=e.updateQueue;if(w===null){var P=new Set;P.add(c),e.updateQueue=P}else w.add(c);break e}else{if(!(e&1)){Rg(i,d,e),kf();break e}c=Error(B(426))}}else if(Te&&l.mode&1){var A=Pg(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Cg(A,o,l,i,e),df(si(c,l));break e}}i=c=si(c,l),qe!==4&&(qe=2),go===null?go=[i]:go.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=h0(i,c,e);Eg(i,E);break e;case 1:l=c;var _=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(vr===null||!vr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=f0(i,l,e);Eg(i,D);break e}}i=i.return}while(i!==null)}b0(n)}catch(V){e=V,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function C0(){var t=tc.current;return tc.current=ec,t===null?ec:t}function kf(){(qe===0||qe===3||qe===2)&&(qe=4),Qe===null||!(os&268435455)&&!(Vc&268435455)||sr(Qe,et)}function sc(t,e){var n=ce;ce|=2;var r=C0();(Qe!==t||et!==e)&&(Cn=null,Jr(t,e));do try{jS();break}catch(s){P0(t,s)}while(!0);if(ff(),ce=n,tc.current=r,Ue!==null)throw Error(B(261));return Qe=null,et=0,qe}function jS(){for(;Ue!==null;)k0(Ue)}function OS(){for(;Ue!==null&&!oT();)k0(Ue)}function k0(t){var e=j0(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?b0(t):Ue=e,Nf.current=null}function b0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RS(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Ue=null;return}}else if(n=AS(n,e,jt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);qe===0&&(qe=5)}function qr(t,e,n){var r=me,s=Gt.transition;try{Gt.transition=null,me=1,LS(t,e,n,r)}finally{Gt.transition=s,me=r}return null}function LS(t,e,n,r){do Ks();while(cr!==null);if(ce&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gT(t,i),t===Qe&&(Ue=Qe=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sl||(sl=!0,O0(Ul,function(){return Ks(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var o=me;me=1;var l=ce;ce|=4,Nf.current=null,CS(t,n),N0(n,t),nS(Wd),Bl=!!qd,Wd=qd=null,t.current=n,kS(n),aT(),ce=l,me=o,Gt.transition=i}else t.current=n;if(sl&&(sl=!1,cr=t,rc=s),i=t.pendingLanes,i===0&&(vr=null),uT(n.stateNode),bt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(nc)throw nc=!1,t=hh,hh=null,t;return rc&1&&t.tag!==0&&Ks(),i=t.pendingLanes,i&1?t===fh?yo++:(yo=0,fh=t):yo=0,Or(),null}function Ks(){if(cr!==null){var t=h_(rc),e=Gt.transition,n=me;try{if(Gt.transition=null,me=16>t?16:t,cr===null)var r=!1;else{if(t=cr,cr=null,rc=0,ce&6)throw Error(B(331));var s=ce;for(ce|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(W=d;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:mo(8,f,i)}var p=f.child;if(p!==null)p.return=f,W=p;else for(;W!==null;){f=W;var g=f.sibling,x=f.return;if(I0(f),f===d){W=null;break}if(g!==null){g.return=x,W=g;break}W=x}}}var w=i.alternate;if(w!==null){var P=w.child;if(P!==null){w.child=null;do{var A=P.sibling;P.sibling=null,P=A}while(P!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:mo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,W=E;break e}W=i.return}}var _=t.current;for(W=_;W!==null;){o=W;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,W=S;else e:for(o=_;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Lc(9,l)}}catch(V){be(l,l.return,V)}if(l===o){W=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,W=D;break e}W=l.return}}if(ce=s,Or(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Rc,t)}catch{}r=!0}return r}finally{me=n,Gt.transition=e}}return!1}function $g(t,e,n){e=si(n,e),e=h0(t,e,1),t=yr(t,e,1),e=It(),t!==null&&(Jo(t,1,e),bt(t,e))}function be(t,e,n){if(t.tag===3)$g(t,t,n);else for(;e!==null;){if(e.tag===3){$g(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){t=si(n,t),t=f0(e,t,1),e=yr(e,t,1),t=It(),e!==null&&(Jo(e,1,t),bt(e,t));break}}e=e.return}}function VS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(et&n)===n&&(qe===4||qe===3&&(et&130023424)===et&&500>Le()-Rf?Jr(t,0):Af|=n),bt(t,e)}function D0(t,e){e===0&&(t.mode&1?(e=Ka,Ka<<=1,!(Ka&130023424)&&(Ka=4194304)):e=1);var n=It();t=zn(t,e),t!==null&&(Jo(t,e,n),bt(t,n))}function MS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),D0(t,n)}function US(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),D0(t,n)}var j0;j0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,NS(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,Te&&e.flags&1048576&&M_(e,Kl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wl(t,e),t=e.pendingProps;var s=ei(e,gt.current);Gs(e,n),s=xf(null,e,r,t,s,n);var i=Ef();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kt(r)?(i=!0,Wl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gf(e),s.updater=Oc,e.stateNode=s,s._reactInternals=e,th(e,r,t,n),e=sh(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&cf(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=BS(r),t=Jt(r,t),s){case 0:e=rh(null,e,r,t,n);break e;case 1:e=Dg(null,e,r,t,n);break e;case 11:e=kg(null,e,r,t,n);break e;case 14:e=bg(null,e,r,Jt(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),rh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),Dg(t,e,r,s,n);case 3:e:{if(y0(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,H_(t,e),Xl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=si(Error(B(423)),e),e=jg(t,e,r,n,s);break e}else if(r!==s){s=si(Error(B(424)),e),e=jg(t,e,r,n,s);break e}else for(Ot=gr(e.stateNode.containerInfo.firstChild),Mt=e,Te=!0,en=null,n=z_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===s){e=$n(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return q_(e),t===null&&Jd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Gd(r,s)?o=null:i!==null&&Gd(r,i)&&(e.flags|=32),g0(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&Jd(e),null;case 13:return v0(t,e,n);case 4:return yf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ni(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),kg(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,we(Ql,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!Ct.current){e=$n(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Un(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Zd(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Zd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Gs(e,n),s=Kt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=Jt(r,e.pendingProps),s=Jt(r.type,s),bg(t,e,r,s,n);case 15:return p0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),wl(t,e),e.tag=1,kt(r)?(t=!0,Wl(e)):t=!1,Gs(e,n),d0(e,r,s),th(e,r,s,n),sh(null,e,r,!0,t,n);case 19:return _0(t,e,n);case 22:return m0(t,e,n)}throw Error(B(156,e.tag))};function O0(t,e){return l_(t,e)}function FS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new FS(t,e,n,r)}function bf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BS(t){if(typeof t=="function")return bf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yh)return 11;if(t===Xh)return 14}return 2}function wr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Il(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")bf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ks:return Zr(n.children,s,i,e);case Qh:o=8,s|=8;break;case Sd:return t=Wt(12,n,e,s|2),t.elementType=Sd,t.lanes=i,t;case Nd:return t=Wt(13,n,e,s),t.elementType=Nd,t.lanes=i,t;case Ad:return t=Wt(19,n,e,s),t.elementType=Ad,t.lanes=i,t;case qv:return Mc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $v:o=10;break e;case Hv:o=9;break e;case Yh:o=11;break e;case Xh:o=14;break e;case tr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Zr(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function Mc(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=qv,t.lanes=n,t.stateNode={isHidden:!1},t}function ld(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function cd(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$u(0),this.expirationTimes=$u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$u(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Df(t,e,n,r,s,i,o,l,c){return t=new zS(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gf(i),t}function $S(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function L0(t){if(!t)return Ar;t=t._reactInternals;e:{if(gs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(kt(n))return L_(t,n,e)}return e}function V0(t,e,n,r,s,i,o,l,c){return t=Df(n,r,!0,t,s,i,o,l,c),t.context=L0(null),n=t.current,r=It(),s=_r(n),i=Un(r,s),i.callback=e??null,yr(n,i,s),t.current.lanes=s,Jo(t,s,r),bt(t,r),t}function Uc(t,e,n,r){var s=e.current,i=It(),o=_r(s);return n=L0(n),e.context===null?e.context=n:e.pendingContext=n,e=Un(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yr(s,e,o),t!==null&&(rn(t,s,o,i),yl(t,s,o)),o}function ic(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jf(t,e){Hg(t,e),(t=t.alternate)&&Hg(t,e)}function HS(){return null}var M0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Of(t){this._internalRoot=t}Fc.prototype.render=Of.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Uc(t,e,null,null)};Fc.prototype.unmount=Of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;as(function(){Uc(null,t,null,null)}),e[Bn]=null}};function Fc(t){this._internalRoot=t}Fc.prototype.unstable_scheduleHydration=function(t){if(t){var e=m_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&y_(t)}};function Lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qg(){}function qS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ic(o);i.call(d)}}var o=V0(e,r,t,0,null,!1,!1,"",qg);return t._reactRootContainer=o,t[Bn]=o.current,Do(t.nodeType===8?t.parentNode:t),as(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=ic(c);l.call(d)}}var c=Df(t,0,!1,null,null,!1,!1,"",qg);return t._reactRootContainer=c,t[Bn]=c.current,Do(t.nodeType===8?t.parentNode:t),as(function(){Uc(e,c,n,r)}),c}function zc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=ic(o);l.call(c)}}Uc(e,o,t,s)}else o=qS(n,e,t,s,r);return ic(o)}f_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ro(e.pendingLanes);n!==0&&(ef(e,n|1),bt(e,Le()),!(ce&6)&&(ii=Le()+500,Or()))}break;case 13:as(function(){var r=zn(t,1);if(r!==null){var s=It();rn(r,t,1,s)}}),jf(t,1)}};tf=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=It();rn(e,t,134217728,n)}jf(t,134217728)}};p_=function(t){if(t.tag===13){var e=_r(t),n=zn(t,e);if(n!==null){var r=It();rn(n,t,e,r)}jf(t,e)}};m_=function(){return me};g_=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Vd=function(t,e,n){switch(e){case"input":if(Cd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=bc(r);if(!s)throw Error(B(90));Gv(r),Cd(r,s)}}}break;case"textarea":Qv(t,n);break;case"select":e=n.value,e!=null&&$s(t,!!n.multiple,e,!1)}};n_=Pf;r_=as;var WS={usingClientEntryPoint:!1,Events:[ea,Os,bc,e_,t_,Pf]},Ji={findFiberByHostInstance:Gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GS={bundleType:Ji.bundleType,version:Ji.version,rendererPackageName:Ji.rendererPackageName,rendererConfig:Ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=o_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ji.findFiberByHostInstance||HS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{Rc=il.inject(GS),hn=il}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WS;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lf(e))throw Error(B(200));return $S(t,e,null,n)};Bt.createRoot=function(t,e){if(!Lf(t))throw Error(B(299));var n=!1,r="",s=M0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Df(t,1,!1,null,null,n,!1,r,s),t[Bn]=e.current,Do(t.nodeType===8?t.parentNode:t),new Of(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=o_(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return as(t)};Bt.hydrate=function(t,e,n){if(!Bc(e))throw Error(B(200));return zc(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Lf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=M0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=V0(e,null,t,1,n??null,s,!1,i,o),t[Bn]=e.current,Do(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Fc(e)};Bt.render=function(t,e,n){if(!Bc(e))throw Error(B(200));return zc(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Bc(t))throw Error(B(40));return t._reactRootContainer?(as(function(){zc(null,null,t,!1,function(){t._reactRootContainer=null,t[Bn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Pf;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bc(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return zc(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function U0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U0)}catch(t){console.error(t)}}U0(),Uv.exports=Bt;var KS=Uv.exports,Wg=KS;Id.createRoot=Wg.createRoot,Id.hydrateRoot=Wg.hydrateRoot;var Gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},QS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},B0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,x=d&63;c||(x=64,o||(g=64)),r.push(n[f],n[p],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(F0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new YS;const g=i<<2|l>>4;if(r.push(g),d!==64){const x=l<<4&240|d>>2;if(r.push(x),p!==64){const w=d<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XS=function(t){const e=F0(t);return B0.encodeByteArray(e,!0)},oc=function(t){return XS(t).replace(/\./g,"")},z0=function(t){try{return B0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=()=>JS().__FIREBASE_DEFAULTS__,eN=()=>{if(typeof process>"u"||typeof Gg>"u")return;const t=Gg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&z0(t[1]);return e&&JSON.parse(e)},$c=()=>{try{return ZS()||eN()||tN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$0=t=>{var e,n;return(n=(e=$c())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},H0=t=>{const e=$0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},q0=()=>{var t;return(t=$c())===null||t===void 0?void 0:t.config},W0=t=>{var e;return(e=$c())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[oc(JSON.stringify(n)),oc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function sN(){var t;const e=(t=$c())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lN(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cN(){return!sN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uN(){try{return typeof indexedDB=="object"}catch{return!1}}function dN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="FirebaseError";class En extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hN,Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,na.prototype.create)}}class na{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?fN(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new En(s,l,r)}}function fN(t,e){return t.replace(pN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const pN=/\{\$([^}]+)}/g;function mN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Kg(i)&&Kg(o)){if(!oi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Kg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gN(t,e){const n=new yN(t,e);return n.subscribe.bind(n)}class yN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ud),s.error===void 0&&(s.error=ud),s.complete===void 0&&(s.complete=ud);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ud(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class Rr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xN(e))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wr){return this.instances.has(e)}getOptions(e=Wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wr){return this.component?this.component.multipleInstances?e:Wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wN(t){return t===Wr?void 0:t}function xN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _N(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const IN={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},TN=ae.INFO,SN={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},NN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=SN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vf{constructor(e){this.name=e,this._logLevel=TN,this._logHandler=NN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const AN=(t,e)=>e.some(n=>t instanceof n);let Qg,Yg;function RN(){return Qg||(Qg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PN(){return Yg||(Yg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K0=new WeakMap,gh=new WeakMap,Q0=new WeakMap,dd=new WeakMap,Mf=new WeakMap;function CN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&K0.set(n,t)}).catch(()=>{}),Mf.set(e,t),e}function kN(t){if(gh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});gh.set(t,e)}let yh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Q0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bN(t){yh=t(yh)}function DN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hd(this),e,...n);return Q0.set(r,e.sort?e.sort():[e]),xr(r)}:PN().includes(t)?function(...e){return t.apply(hd(this),e),xr(K0.get(this))}:function(...e){return xr(t.apply(hd(this),e))}}function jN(t){return typeof t=="function"?DN(t):(t instanceof IDBTransaction&&kN(t),AN(t,RN())?new Proxy(t,yh):t)}function xr(t){if(t instanceof IDBRequest)return CN(t);if(dd.has(t))return dd.get(t);const e=jN(t);return e!==t&&(dd.set(t,e),Mf.set(e,t)),e}const hd=t=>Mf.get(t);function ON(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=xr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(xr(o.result),c.oldVersion,c.newVersion,xr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const LN=["get","getKey","getAll","getAllKeys","count"],VN=["put","add","delete","clear"],fd=new Map;function Xg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fd.get(e))return fd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=VN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||LN.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return fd.set(e,i),i}bN(t=>({...t,get:(e,n,r)=>Xg(e,n)||t.get(e,n,r),has:(e,n)=>!!Xg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vh="@firebase/app",Jg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Vf("@firebase/app"),FN="@firebase/app-compat",BN="@firebase/analytics-compat",zN="@firebase/analytics",$N="@firebase/app-check-compat",HN="@firebase/app-check",qN="@firebase/auth",WN="@firebase/auth-compat",GN="@firebase/database",KN="@firebase/data-connect",QN="@firebase/database-compat",YN="@firebase/functions",XN="@firebase/functions-compat",JN="@firebase/installations",ZN="@firebase/installations-compat",eA="@firebase/messaging",tA="@firebase/messaging-compat",nA="@firebase/performance",rA="@firebase/performance-compat",sA="@firebase/remote-config",iA="@firebase/remote-config-compat",oA="@firebase/storage",aA="@firebase/storage-compat",lA="@firebase/firestore",cA="@firebase/vertexai-preview",uA="@firebase/firestore-compat",dA="firebase",hA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="[DEFAULT]",fA={[vh]:"fire-core",[FN]:"fire-core-compat",[zN]:"fire-analytics",[BN]:"fire-analytics-compat",[HN]:"fire-app-check",[$N]:"fire-app-check-compat",[qN]:"fire-auth",[WN]:"fire-auth-compat",[GN]:"fire-rtdb",[KN]:"fire-data-connect",[QN]:"fire-rtdb-compat",[YN]:"fire-fn",[XN]:"fire-fn-compat",[JN]:"fire-iid",[ZN]:"fire-iid-compat",[eA]:"fire-fcm",[tA]:"fire-fcm-compat",[nA]:"fire-perf",[rA]:"fire-perf-compat",[sA]:"fire-rc",[iA]:"fire-rc-compat",[oA]:"fire-gcs",[aA]:"fire-gcs-compat",[lA]:"fire-fst",[uA]:"fire-fst-compat",[cA]:"fire-vertex","fire-js":"fire-js",[dA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Map,pA=new Map,wh=new Map;function Zg(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ls(t){const e=t.name;if(wh.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;wh.set(e,t);for(const n of ac.values())Zg(n,t);for(const n of pA.values())Zg(n,t);return!0}function Hc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function On(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new na("app","Firebase",mA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=hA;function Y0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_h,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Er.create("bad-app-name",{appName:String(s)});if(n||(n=q0()),!n)throw Er.create("no-options");const i=ac.get(s);if(i){if(oi(n,i.options)&&oi(r,i.config))return i;throw Er.create("duplicate-app",{appName:s})}const o=new EN(s);for(const c of wh.values())o.addComponent(c);const l=new gA(n,r,o);return ac.set(s,l),l}function Uf(t=_h){const e=ac.get(t);if(!e&&t===_h&&q0())return Y0();if(!e)throw Er.create("no-app",{appName:t});return e}function pn(t,e,n){var r;let s=(r=fA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(l.join(" "));return}ls(new Rr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="firebase-heartbeat-database",vA=1,zo="firebase-heartbeat-store";let pd=null;function X0(){return pd||(pd=ON(yA,vA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),pd}async function _A(t){try{const n=(await X0()).transaction(zo),r=await n.objectStore(zo).get(J0(t));return await n.done,r}catch(e){if(e instanceof En)Hn.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hn.warn(n.message)}}}async function ey(t,e){try{const r=(await X0()).transaction(zo,"readwrite");await r.objectStore(zo).put(e,J0(t)),await r.done}catch(n){if(n instanceof En)Hn.warn(n.message);else{const r=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hn.warn(r.message)}}}function J0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=1024,xA=30*24*60*60*1e3;class EA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ty();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=xA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Hn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ty(),{heartbeatsToSend:r,unsentEntries:s}=IA(this._heartbeatsCache.heartbeats),i=oc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hn.warn(n),""}}}function ty(){return new Date().toISOString().substring(0,10)}function IA(t,e=wA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ny(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ny(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uN()?dN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _A(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ey(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ey(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ny(t){return oc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t){ls(new Rr("platform-logger",e=>new MN(e),"PRIVATE")),ls(new Rr("heartbeat",e=>new EA(e),"PRIVATE")),pn(vh,Jg,t),pn(vh,Jg,"esm2017"),pn("fire-js","")}SA("");var NA="firebase",AA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn(NA,AA,"app");function Ff(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Z0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RA=Z0,ew=new na("auth","Firebase",Z0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Vf("@firebase/auth");function PA(t,...e){lc.logLevel<=ae.WARN&&lc.warn(`Auth (${ys}): ${t}`,...e)}function Tl(t,...e){lc.logLevel<=ae.ERROR&&lc.error(`Auth (${ys}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,...e){throw zf(t,...e)}function sn(t,...e){return zf(t,...e)}function Bf(t,e,n){const r=Object.assign(Object.assign({},RA()),{[e]:n});return new na("auth","Firebase",r).create(e,{appName:t.name})}function es(t){return Bf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&vn(t,"argument-error"),Bf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ew.create(t,...e)}function te(t,e,...n){if(!t)throw zf(e,...n)}function Ln(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tl(e),new Error(e)}function qn(t,e){t||Ln(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function kA(){return ry()==="http:"||ry()==="https:"}function ry(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kA()||oN()||"connection"in navigator)?navigator.onLine:!0}function DA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=rN()||aN()}get(){return bA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new sa(3e4,6e4);function Hf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ii(t,e,n,r,s={}){return nw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ra(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return iN()||(d.referrerPolicy="no-referrer"),tw.fetch()(rw(t,t.config.apiHost,n,l),d)})}async function nw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},jA),e);try{const s=new VA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ol(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ol(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ol(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ol(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Bf(t,f,d);vn(t,f)}}catch(s){if(s instanceof En)throw s;vn(t,"network-request-failed",{message:String(s)})}}async function LA(t,e,n,r,s={}){const i=await Ii(t,e,n,r,s);return"mfaPendingCredential"in i&&vn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function rw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?$f(t.config,s):`${t.config.apiScheme}://${s}`}class VA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(sn(this.auth,"network-request-failed")),OA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ol(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=sn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e){return Ii(t,"POST","/v1/accounts:delete",e)}async function sw(t,e){return Ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UA(t,e=!1){const n=ze(t),r=await n.getIdToken(e),s=qf(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:vo(md(s.auth_time)),issuedAtTime:vo(md(s.iat)),expirationTime:vo(md(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function md(t){return Number(t)*1e3}function qf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tl("JWT malformed, contained fewer than 3 sections"),null;try{const s=z0(n);return s?JSON.parse(s):(Tl("Failed to decode base64 JWT payload"),null)}catch(s){return Tl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function sy(t){const e=qf(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof En&&FA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function FA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vo(this.lastLoginAt),this.creationTime=vo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await $o(t,sw(n,{idToken:r}));te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?iw(i.providerUserInfo):[],l=$A(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Eh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function zA(t){const e=ze(t);await cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $A(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function iw(t){return t.map(e=>{var{providerId:n}=e,r=Ff(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(t,e){const n=await nw(t,{},async()=>{const r=ra({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=rw(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",tw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qA(t,e){return Ii(t,"POST","/v2/accounts:revokeToken",Hf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=sy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await HA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Qs;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qs,this.toJSON())}_performRefresh(){return Ln("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Eh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $o(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UA(this,e)}reload(){return zA(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(es(this.auth));const e=await this.getIdToken();return await $o(this,MA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(l=n.tenantId)!==null&&l!==void 0?l:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:D,isAnonymous:V,providerData:M,stsTokenManager:I}=n;te(S&&I,e,"internal-error");const v=Qs.fromJSON(this.name,I);te(typeof S=="string",e,"internal-error"),er(p,e.name),er(g,e.name),te(typeof D=="boolean",e,"internal-error"),te(typeof V=="boolean",e,"internal-error"),er(x,e.name),er(w,e.name),er(P,e.name),er(A,e.name),er(E,e.name),er(_,e.name);const T=new Vn({uid:S,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:V,photoURL:w,phoneNumber:x,tenantId:P,stsTokenManager:v,createdAt:E,lastLoginAt:_});return M&&Array.isArray(M)&&(T.providerData=M.map(R=>Object.assign({},R))),A&&(T._redirectEventId=A),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Qs;s.updateFromServerResponse(n);const i=new Vn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await cc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?iw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Qs;l.updateFromIdToken(r);const c=new Vn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Eh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=new Map;function Mn(t){qn(t instanceof Function,"Expected a class definition");let e=iy.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ow.type="NONE";const oy=ow;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ys{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Sl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Sl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ys(Mn(oy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Mn(oy);const o=Sl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const p=Vn._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ys(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ys(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hw(e))return"Blackberry";if(fw(e))return"Webos";if(lw(e))return"Safari";if((e.includes("chrome/")||cw(e))&&!e.includes("edge/"))return"Chrome";if(dw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aw(t=yt()){return/firefox\//i.test(t)}function lw(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cw(t=yt()){return/crios\//i.test(t)}function uw(t=yt()){return/iemobile/i.test(t)}function dw(t=yt()){return/android/i.test(t)}function hw(t=yt()){return/blackberry/i.test(t)}function fw(t=yt()){return/webos/i.test(t)}function Wf(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WA(t=yt()){var e;return Wf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GA(){return lN()&&document.documentMode===10}function pw(t=yt()){return Wf(t)||dw(t)||fw(t)||hw(t)||/windows phone/i.test(t)||uw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t,e=[]){let n;switch(t){case"Browser":n=ay(yt());break;case"Worker":n=`${ay(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ys}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(t,e={}){return Ii(t,"GET","/v2/passwordPolicy",Hf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=6;class XA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ly(this),this.idTokenSubscription=new ly(this),this.beforeStateQueue=new KA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ew,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ys.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sw(this,{idToken:e}),r=await Vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(On(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(es(this));const n=e?ze(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QA(this),n=new XA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new na("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Ys.create(this,[Mn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qc(t){return ze(t)}class ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=gN(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZA(t){Gf=t}function eR(t){return Gf.loadJS(t)}function tR(){return Gf.gapiScript}function nR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t,e){const n=Hc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(oi(i,e??{}))return s;vn(s,"already-initialized")}return n.initialize({options:e})}function sR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iR(t,e,n){const r=qc(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=gw(e),{host:o,port:l}=oR(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),aR()}function gw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oR(t){const e=gw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:cy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:cy(o)}}}function cy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,n){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return LA(t,"POST","/v1/accounts:signInWithIdp",Hf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="http://localhost";class cs extends yw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ff(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new cs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:lR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ra(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Kf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends ia{constructor(){super("facebook.com")}static credential(e){return cs._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends ia{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return cs._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bn.credential(n,r)}catch{return null}}}bn.GOOGLE_SIGN_IN_METHOD="google.com";bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends ia{constructor(){super("github.com")}static credential(e){return cs._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends ia{constructor(){super("twitter.com")}static credential(e,n){return cs._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Vn._fromIdTokenResponse(e,r,s),o=uy(r);return new ai({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=uy(r);return new ai({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function uy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends En{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,uc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new uc(e,n,r,s)}}function vw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?uc._fromErrorAndOperation(t,i,e,r):i})}async function cR(t,e,n=!1){const r=await $o(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ai._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(t,e,n=!1){const{auth:r}=t;if(On(r.app))return Promise.reject(es(r));const s="reauthenticate";try{const i=await $o(t,vw(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=qf(i.idToken);te(o,r,"internal-error");const{sub:l}=o;return te(t.uid===l,r,"user-mismatch"),ai._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&vn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t,e,n=!1){if(On(t.app))return Promise.reject(es(t));const r="signIn",s=await vw(t,r,e),i=await ai._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function hR(t,e,n,r){return ze(t).onIdTokenChanged(e,n,r)}function fR(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function pR(t,e,n,r){return ze(t).onAuthStateChanged(e,n,r)}function mR(t){return ze(t).signOut()}const dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dc,"1"),this.storage.removeItem(dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=1e3,yR=10;class ww extends _w{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);GA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,yR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ww.type="LOCAL";const vR=ww;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends _w{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xw.type="SESSION";const Ew=xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await _R(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Qf("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return window}function xR(t){mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}async function ER(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TR(){return Iw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="firebaseLocalStorageDb",SR=1,hc="firebaseLocalStorage",Sw="fbase_key";class oa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gc(t,e){return t.transaction([hc],e?"readwrite":"readonly").objectStore(hc)}function NR(){const t=indexedDB.deleteDatabase(Tw);return new oa(t).toPromise()}function Ih(){const t=indexedDB.open(Tw,SR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hc,{keyPath:Sw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hc)?e(r):(r.close(),await NR(),e(await Ih()))})})}async function dy(t,e,n){const r=Gc(t,!0).put({[Sw]:e,value:n});return new oa(r).toPromise()}async function AR(t,e){const n=Gc(t,!1).get(e),r=await new oa(n).toPromise();return r===void 0?null:r.value}function hy(t,e){const n=Gc(t,!0).delete(e);return new oa(n).toPromise()}const RR=800,PR=3;class Nw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ih(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>PR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Iw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wc._getInstance(TR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ER(),!this.activeServiceWorker)return;this.sender=new wR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ih();return await dy(e,dc,"1"),await hy(e,dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Gc(s,!1).getAll();return new oa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Nw.type="LOCAL";const CR=Nw;new sa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t,e){return e?Mn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf extends yw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kR(t){return dR(t.auth,new Yf(t),t.bypassAuthState)}function bR(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),uR(n,new Yf(t),t.bypassAuthState)}async function DR(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),cR(n,new Yf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kR;case"linkViaPopup":case"linkViaRedirect":return DR;case"reauthViaPopup":case"reauthViaRedirect":return bR;default:vn(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new sa(2e3,1e4);async function OR(t,e,n){if(On(t.app))return Promise.reject(sn(t,"operation-not-supported-in-this-environment"));const r=qc(t);CA(t,e,Kf);const s=Aw(r,n);return new Yr(r,"signInViaPopup",e,s).executeNotNull()}class Yr extends Rw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Yr.currentPopupAction&&Yr.currentPopupAction.cancel(),Yr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=Qf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jR.get())};e()}}Yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="pendingRedirect",Nl=new Map;class VR extends Rw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nl.get(this.auth._key());if(!e){try{const r=await MR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nl.set(this.auth._key(),e)}return this.bypassAuthState||Nl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MR(t,e){const n=BR(e),r=FR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function UR(t,e){Nl.set(t._key(),e)}function FR(t){return Mn(t._redirectPersistence)}function BR(t){return Sl(LR,t.config.apiKey,t.name)}async function zR(t,e,n=!1){if(On(t.app))return Promise.reject(es(t));const r=qc(t),s=Aw(r,e),o=await new VR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=10*60*1e3;class HR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Pw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(sn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$R&&this.cachedEventUids.clear(),this.cachedEventUids.has(fy(e))}saveEventToCache(e){this.cachedEventUids.add(fy(e)),this.lastProcessedEventTime=Date.now()}}function fy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Pw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(t,e={}){return Ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KR=/^https?/;async function QR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WR(t);for(const n of e)try{if(YR(n))return}catch{}vn(t,"unauthorized-domain")}function YR(t){const e=xh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!KR.test(n))return!1;if(GR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new sa(3e4,6e4);function py(){const t=mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JR(t){return new Promise((e,n)=>{var r,s,i;function o(){py(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{py(),n(sn(t,"network-request-failed"))},timeout:XR.get()})}if(!((s=(r=mn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=mn().gapi)===null||i===void 0)&&i.load)o();else{const l=nR("iframefcb");return mn()[l]=()=>{gapi.load?o():n(sn(t,"network-request-failed"))},eR(`${tR()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Al=null,e})}let Al=null;function ZR(t){return Al=Al||JR(t),Al}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=new sa(5e3,15e3),tP="__/auth/iframe",nP="emulator/auth/iframe",rP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iP(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$f(e,nP):`https://${t.config.authDomain}/${tP}`,r={apiKey:e.apiKey,appName:t.name,v:ys},s=sP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ra(r).slice(1)}`}async function oP(t){const e=await ZR(t),n=mn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:iP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=sn(t,"network-request-failed"),l=mn().setTimeout(()=>{i(o)},eP.get());function c(){mn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lP=500,cP=600,uP="_blank",dP="http://localhost";class my{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hP(t,e,n,r=lP,s=cP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},aP),{width:r.toString(),height:s.toString(),top:i,left:o}),d=yt().toLowerCase();n&&(l=cw(d)?uP:n),aw(d)&&(e=e||dP,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[x,w])=>`${g}${x}=${w},`,"");if(WA(d)&&l!=="_self")return fP(e||"",l),new my(null);const p=window.open(e||"",l,f);te(p,t,"popup-blocked");try{p.focus()}catch{}return new my(p)}function fP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="__/auth/handler",mP="emulator/auth/handler",gP=encodeURIComponent("fac");async function gy(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ys,eventId:s};if(e instanceof Kf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",mN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof ia){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${gP}=${encodeURIComponent(c)}`:"";return`${yP(t)}?${ra(l).slice(1)}${d}`}function yP({config:t}){return t.emulator?$f(t,mP):`https://${t.authDomain}/${pP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="webStorageSupport";class vP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ew,this._completeRedirectFn=zR,this._overrideRedirectResult=UR}async _openPopup(e,n,r,s){var i;qn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await gy(e,n,r,xh(),s);return hP(e,o,Qf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await gy(e,n,r,xh(),s);return xR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await oP(e),r=new HR(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gd,{type:gd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[gd];o!==void 0&&n(!!o),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pw()||lw()||Wf()}}const _P=vP;var yy="@firebase/auth",vy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EP(t){ls(new Rr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mw(t)},d=new JA(r,s,i,c);return sR(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ls(new Rr("auth-internal",e=>{const n=qc(e.getProvider("auth").getImmediate());return(r=>new wP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pn(yy,vy,xP(t)),pn(yy,vy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=5*60,TP=W0("authIdTokenMaxAge")||IP;let _y=null;const SP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TP)return;const s=n==null?void 0:n.token;_y!==s&&(_y=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function NP(t=Uf()){const e=Hc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rR(t,{popupRedirectResolver:_P,persistence:[CR,vR,Ew]}),r=W0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=SP(i.toString());fR(n,o,()=>o(n.currentUser)),hR(n,l=>o(l))}}const s=$0("auth");return s&&iR(n,`http://${s}`),n}function AP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=sn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",AP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EP("Browser");var wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ts,Cw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function T(){}T.prototype=v.prototype,I.D=v.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(R,k,C){for(var N=Array(arguments.length-2),X=2;X<arguments.length;X++)N[X-2]=arguments[X];return v.prototype[k].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,v,T){T||(T=0);var R=Array(16);if(typeof v=="string")for(var k=0;16>k;++k)R[k]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(k=0;16>k;++k)R[k]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=I.g[0],T=I.g[1],k=I.g[2];var C=I.g[3],N=v+(C^T&(k^C))+R[0]+3614090360&4294967295;v=T+(N<<7&4294967295|N>>>25),N=C+(k^v&(T^k))+R[1]+3905402710&4294967295,C=v+(N<<12&4294967295|N>>>20),N=k+(T^C&(v^T))+R[2]+606105819&4294967295,k=C+(N<<17&4294967295|N>>>15),N=T+(v^k&(C^v))+R[3]+3250441966&4294967295,T=k+(N<<22&4294967295|N>>>10),N=v+(C^T&(k^C))+R[4]+4118548399&4294967295,v=T+(N<<7&4294967295|N>>>25),N=C+(k^v&(T^k))+R[5]+1200080426&4294967295,C=v+(N<<12&4294967295|N>>>20),N=k+(T^C&(v^T))+R[6]+2821735955&4294967295,k=C+(N<<17&4294967295|N>>>15),N=T+(v^k&(C^v))+R[7]+4249261313&4294967295,T=k+(N<<22&4294967295|N>>>10),N=v+(C^T&(k^C))+R[8]+1770035416&4294967295,v=T+(N<<7&4294967295|N>>>25),N=C+(k^v&(T^k))+R[9]+2336552879&4294967295,C=v+(N<<12&4294967295|N>>>20),N=k+(T^C&(v^T))+R[10]+4294925233&4294967295,k=C+(N<<17&4294967295|N>>>15),N=T+(v^k&(C^v))+R[11]+2304563134&4294967295,T=k+(N<<22&4294967295|N>>>10),N=v+(C^T&(k^C))+R[12]+1804603682&4294967295,v=T+(N<<7&4294967295|N>>>25),N=C+(k^v&(T^k))+R[13]+4254626195&4294967295,C=v+(N<<12&4294967295|N>>>20),N=k+(T^C&(v^T))+R[14]+2792965006&4294967295,k=C+(N<<17&4294967295|N>>>15),N=T+(v^k&(C^v))+R[15]+1236535329&4294967295,T=k+(N<<22&4294967295|N>>>10),N=v+(k^C&(T^k))+R[1]+4129170786&4294967295,v=T+(N<<5&4294967295|N>>>27),N=C+(T^k&(v^T))+R[6]+3225465664&4294967295,C=v+(N<<9&4294967295|N>>>23),N=k+(v^T&(C^v))+R[11]+643717713&4294967295,k=C+(N<<14&4294967295|N>>>18),N=T+(C^v&(k^C))+R[0]+3921069994&4294967295,T=k+(N<<20&4294967295|N>>>12),N=v+(k^C&(T^k))+R[5]+3593408605&4294967295,v=T+(N<<5&4294967295|N>>>27),N=C+(T^k&(v^T))+R[10]+38016083&4294967295,C=v+(N<<9&4294967295|N>>>23),N=k+(v^T&(C^v))+R[15]+3634488961&4294967295,k=C+(N<<14&4294967295|N>>>18),N=T+(C^v&(k^C))+R[4]+3889429448&4294967295,T=k+(N<<20&4294967295|N>>>12),N=v+(k^C&(T^k))+R[9]+568446438&4294967295,v=T+(N<<5&4294967295|N>>>27),N=C+(T^k&(v^T))+R[14]+3275163606&4294967295,C=v+(N<<9&4294967295|N>>>23),N=k+(v^T&(C^v))+R[3]+4107603335&4294967295,k=C+(N<<14&4294967295|N>>>18),N=T+(C^v&(k^C))+R[8]+1163531501&4294967295,T=k+(N<<20&4294967295|N>>>12),N=v+(k^C&(T^k))+R[13]+2850285829&4294967295,v=T+(N<<5&4294967295|N>>>27),N=C+(T^k&(v^T))+R[2]+4243563512&4294967295,C=v+(N<<9&4294967295|N>>>23),N=k+(v^T&(C^v))+R[7]+1735328473&4294967295,k=C+(N<<14&4294967295|N>>>18),N=T+(C^v&(k^C))+R[12]+2368359562&4294967295,T=k+(N<<20&4294967295|N>>>12),N=v+(T^k^C)+R[5]+4294588738&4294967295,v=T+(N<<4&4294967295|N>>>28),N=C+(v^T^k)+R[8]+2272392833&4294967295,C=v+(N<<11&4294967295|N>>>21),N=k+(C^v^T)+R[11]+1839030562&4294967295,k=C+(N<<16&4294967295|N>>>16),N=T+(k^C^v)+R[14]+4259657740&4294967295,T=k+(N<<23&4294967295|N>>>9),N=v+(T^k^C)+R[1]+2763975236&4294967295,v=T+(N<<4&4294967295|N>>>28),N=C+(v^T^k)+R[4]+1272893353&4294967295,C=v+(N<<11&4294967295|N>>>21),N=k+(C^v^T)+R[7]+4139469664&4294967295,k=C+(N<<16&4294967295|N>>>16),N=T+(k^C^v)+R[10]+3200236656&4294967295,T=k+(N<<23&4294967295|N>>>9),N=v+(T^k^C)+R[13]+681279174&4294967295,v=T+(N<<4&4294967295|N>>>28),N=C+(v^T^k)+R[0]+3936430074&4294967295,C=v+(N<<11&4294967295|N>>>21),N=k+(C^v^T)+R[3]+3572445317&4294967295,k=C+(N<<16&4294967295|N>>>16),N=T+(k^C^v)+R[6]+76029189&4294967295,T=k+(N<<23&4294967295|N>>>9),N=v+(T^k^C)+R[9]+3654602809&4294967295,v=T+(N<<4&4294967295|N>>>28),N=C+(v^T^k)+R[12]+3873151461&4294967295,C=v+(N<<11&4294967295|N>>>21),N=k+(C^v^T)+R[15]+530742520&4294967295,k=C+(N<<16&4294967295|N>>>16),N=T+(k^C^v)+R[2]+3299628645&4294967295,T=k+(N<<23&4294967295|N>>>9),N=v+(k^(T|~C))+R[0]+4096336452&4294967295,v=T+(N<<6&4294967295|N>>>26),N=C+(T^(v|~k))+R[7]+1126891415&4294967295,C=v+(N<<10&4294967295|N>>>22),N=k+(v^(C|~T))+R[14]+2878612391&4294967295,k=C+(N<<15&4294967295|N>>>17),N=T+(C^(k|~v))+R[5]+4237533241&4294967295,T=k+(N<<21&4294967295|N>>>11),N=v+(k^(T|~C))+R[12]+1700485571&4294967295,v=T+(N<<6&4294967295|N>>>26),N=C+(T^(v|~k))+R[3]+2399980690&4294967295,C=v+(N<<10&4294967295|N>>>22),N=k+(v^(C|~T))+R[10]+4293915773&4294967295,k=C+(N<<15&4294967295|N>>>17),N=T+(C^(k|~v))+R[1]+2240044497&4294967295,T=k+(N<<21&4294967295|N>>>11),N=v+(k^(T|~C))+R[8]+1873313359&4294967295,v=T+(N<<6&4294967295|N>>>26),N=C+(T^(v|~k))+R[15]+4264355552&4294967295,C=v+(N<<10&4294967295|N>>>22),N=k+(v^(C|~T))+R[6]+2734768916&4294967295,k=C+(N<<15&4294967295|N>>>17),N=T+(C^(k|~v))+R[13]+1309151649&4294967295,T=k+(N<<21&4294967295|N>>>11),N=v+(k^(T|~C))+R[4]+4149444226&4294967295,v=T+(N<<6&4294967295|N>>>26),N=C+(T^(v|~k))+R[11]+3174756917&4294967295,C=v+(N<<10&4294967295|N>>>22),N=k+(v^(C|~T))+R[2]+718787259&4294967295,k=C+(N<<15&4294967295|N>>>17),N=T+(C^(k|~v))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+C&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var T=v-this.blockSize,R=this.B,k=this.h,C=0;C<v;){if(k==0)for(;C<=T;)s(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<v;)if(R[k++]=I.charCodeAt(C++),k==this.blockSize){s(this,R),k=0;break}}else for(;C<v;)if(R[k++]=I[C++],k==this.blockSize){s(this,R),k=0;break}}this.h=k,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var T=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=T&255,T/=256;for(this.u(I),I=Array(16),v=T=0;4>v;++v)for(var R=0;32>R;R+=8)I[T++]=this.g[v]>>>R&255;return I};function i(I,v){var T=l;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=v(I)}function o(I,v){this.h=v;for(var T=[],R=!0,k=I.length-1;0<=k;k--){var C=I[k]|0;R&&C==v||(T[k]=C,R=!1)}this.g=T}var l={};function c(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return A(d(-I));for(var v=[],T=1,R=0;I>=T;R++)v[R]=I/T|0,T*=4294967296;return new o(v,0)}function f(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return A(f(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(v,8)),R=p,k=0;k<I.length;k+=8){var C=Math.min(8,I.length-k),N=parseInt(I.substring(k,k+C),v);8>C?(C=d(Math.pow(v,C)),R=R.j(C).add(d(N))):(R=R.j(T),R=R.add(d(N)))}return R}var p=c(0),g=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-A(this).m();for(var I=0,v=1,T=0;T<this.g.length;T++){var R=this.i(T);I+=(0<=R?R:4294967296+R)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(P(this))return"-"+A(this).toString(I);for(var v=d(Math.pow(I,6)),T=this,R="";;){var k=D(T,v).g;T=E(T,k.j(v));var C=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=k,w(T))return C+R;for(;6>C.length;)C="0"+C;R=C+R}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function P(I){return I.h==-1}t.l=function(I){return I=E(this,I),P(I)?-1:w(I)?0:1};function A(I){for(var v=I.g.length,T=[],R=0;R<v;R++)T[R]=~I.g[R];return new o(T,~I.h).add(g)}t.abs=function(){return P(this)?A(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),T=[],R=0,k=0;k<=v;k++){var C=R+(this.i(k)&65535)+(I.i(k)&65535),N=(C>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);R=N>>>16,C&=65535,N&=65535,T[k]=N<<16|C}return new o(T,T[T.length-1]&-2147483648?-1:0)};function E(I,v){return I.add(A(v))}t.j=function(I){if(w(this)||w(I))return p;if(P(this))return P(I)?A(this).j(A(I)):A(A(this).j(I));if(P(I))return A(this.j(A(I)));if(0>this.l(x)&&0>I.l(x))return d(this.m()*I.m());for(var v=this.g.length+I.g.length,T=[],R=0;R<2*v;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var k=0;k<I.g.length;k++){var C=this.i(R)>>>16,N=this.i(R)&65535,X=I.i(k)>>>16,oe=I.i(k)&65535;T[2*R+2*k]+=N*oe,_(T,2*R+2*k),T[2*R+2*k+1]+=C*oe,_(T,2*R+2*k+1),T[2*R+2*k+1]+=N*X,_(T,2*R+2*k+1),T[2*R+2*k+2]+=C*X,_(T,2*R+2*k+2)}for(R=0;R<v;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=v;R<2*v;R++)T[R]=0;return new o(T,0)};function _(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function S(I,v){this.g=I,this.h=v}function D(I,v){if(w(v))throw Error("division by zero");if(w(I))return new S(p,p);if(P(I))return v=D(A(I),v),new S(A(v.g),A(v.h));if(P(v))return v=D(I,A(v)),new S(A(v.g),v.h);if(30<I.g.length){if(P(I)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,R=v;0>=R.l(I);)T=V(T),R=V(R);var k=M(T,1),C=M(R,1);for(R=M(R,2),T=M(T,2);!w(R);){var N=C.add(R);0>=N.l(I)&&(k=k.add(T),C=N),R=M(R,1),T=M(T,1)}return v=E(I,k.j(v)),new S(k,v)}for(k=p;0<=I.l(v);){for(T=Math.max(1,Math.floor(I.m()/v.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),C=d(T),N=C.j(v);P(N)||0<N.l(I);)T-=R,C=d(T),N=C.j(v);w(C)&&(C=g),k=k.add(C),I=E(I,N)}return new S(k,I)}t.A=function(I){return D(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),T=[],R=0;R<v;R++)T[R]=this.i(R)&I.i(R);return new o(T,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),T=[],R=0;R<v;R++)T[R]=this.i(R)|I.i(R);return new o(T,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),T=[],R=0;R<v;R++)T[R]=this.i(R)^I.i(R);return new o(T,this.h^I.h)};function V(I){for(var v=I.g.length+1,T=[],R=0;R<v;R++)T[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(T,I.h)}function M(I,v){var T=v>>5;v%=32;for(var R=I.g.length-T,k=[],C=0;C<R;C++)k[C]=0<v?I.i(C+T)>>>v|I.i(C+T+1)<<32-v:I.i(C+T);return new o(k,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Cw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ts=o}).apply(typeof wy<"u"?wy:typeof self<"u"?self:typeof window<"u"?window:{});var al=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kw,io,bw,Rl,Th,Dw,jw,Ow;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof al=="object"&&al];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var j=a[y];if(!(j in m))break e;m=m[j]}a=a[a.length-1],y=m[a],h=h(y),h!=y&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,y=!1,j={next:function(){if(!y&&m<a.length){var O=m++;return{value:h(O,a[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,y),a.apply(h,j)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function x(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function w(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(y,j,O){for(var $=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)$[ge-2]=arguments[ge];return h.prototype[j].apply(y,$)}}function P(a){const h=a.length;if(0<h){const m=Array(h);for(let y=0;y<h;y++)m[y]=a[y];return m}return[]}function A(a,h){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const j=a.length||0,O=y.length||0;a.length=j+O;for(let $=0;$<O;$++)a[j+$]=y[$]}else a.push(y)}}class E{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var V=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(a,h,m){for(const y in a)h.call(m,a[y],y,a)}function I(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function v(a){const h={};for(const m in a)h[m]=a[m];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(a,h){let m,y;for(let j=1;j<arguments.length;j++){y=arguments[j];for(m in y)a[m]=y[m];for(let O=0;O<T.length;O++)m=T[O],Object.prototype.hasOwnProperty.call(y,m)&&(a[m]=y[m])}}function k(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function C(a){l.setTimeout(()=>{throw a},0)}function N(){var a=H;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class X{constructor(){this.h=this.g=null}add(h,m){const y=oe.get();y.set(h,m),this.h?this.h.next=y:this.g=y,this.h=y}}var oe=new E(()=>new ve,a=>a.reset());class ve{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let z,U=!1,H=new X,Q=()=>{const a=l.Promise.resolve(void 0);z=()=>{a.then(pe)}};var pe=()=>{for(var a;a=N();){try{a.h.call(a.g)}catch(m){C(m)}var h=oe;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}U=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var Tn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function Sn(a,h){if(je.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(V){e:{try{D(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Nn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Sn.aa.h.call(this)}}w(Sn,je);var Nn={2:"touch",3:"pen",4:"mouse"};Sn.prototype.h=function(){Sn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var An="closure_listenable_"+(1e6*Math.random()|0),BE=0;function zE(a,h,m,y,j){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!y,this.ha=j,this.key=++BE,this.da=this.fa=!1}function Sa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Na(a){this.src=a,this.g={},this.h=0}Na.prototype.add=function(a,h,m,y,j){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var $=gu(a,h,y,j);return-1<$?(h=a[$],m||(h.fa=!1)):(h=new zE(h,this.src,O,!!y,j),h.fa=m,a.push(h)),h};function mu(a,h){var m=h.type;if(m in a.g){var y=a.g[m],j=Array.prototype.indexOf.call(y,h,void 0),O;(O=0<=j)&&Array.prototype.splice.call(y,j,1),O&&(Sa(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function gu(a,h,m,y){for(var j=0;j<a.length;++j){var O=a[j];if(!O.da&&O.listener==h&&O.capture==!!m&&O.ha==y)return j}return-1}var yu="closure_lm_"+(1e6*Math.random()|0),vu={};function Up(a,h,m,y,j){if(Array.isArray(h)){for(var O=0;O<h.length;O++)Up(a,h[O],m,y,j);return null}return m=zp(m),a&&a[An]?a.K(h,m,d(y)?!!y.capture:!1,j):$E(a,h,m,!1,y,j)}function $E(a,h,m,y,j,O){if(!h)throw Error("Invalid event type");var $=d(j)?!!j.capture:!!j,ge=wu(a);if(ge||(a[yu]=ge=new Na(a)),m=ge.add(h,m,y,$,O),m.proxy)return m;if(y=HE(),m.proxy=y,y.src=a,y.listener=m,a.addEventListener)Tn||(j=$),j===void 0&&(j=!1),a.addEventListener(h.toString(),y,j);else if(a.attachEvent)a.attachEvent(Bp(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function HE(){function a(m){return h.call(a.src,a.listener,m)}const h=qE;return a}function Fp(a,h,m,y,j){if(Array.isArray(h))for(var O=0;O<h.length;O++)Fp(a,h[O],m,y,j);else y=d(y)?!!y.capture:!!y,m=zp(m),a&&a[An]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],m=gu(O,m,y,j),-1<m&&(Sa(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=wu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=gu(h,m,y,j)),(m=-1<a?h[a]:null)&&_u(m))}function _u(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[An])mu(h.i,a);else{var m=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(m,y,a.capture):h.detachEvent?h.detachEvent(Bp(m),y):h.addListener&&h.removeListener&&h.removeListener(y),(m=wu(h))?(mu(m,a),m.h==0&&(m.src=null,h[yu]=null)):Sa(a)}}}function Bp(a){return a in vu?vu[a]:vu[a]="on"+a}function qE(a,h){if(a.da)a=!0;else{h=new Sn(h,this);var m=a.listener,y=a.ha||a.src;a.fa&&_u(a),a=m.call(y,h)}return a}function wu(a){return a=a[yu],a instanceof Na?a:null}var xu="__closure_events_fn_"+(1e9*Math.random()>>>0);function zp(a){return typeof a=="function"?a:(a[xu]||(a[xu]=function(h){return a.handleEvent(h)}),a[xu])}function st(){fe.call(this),this.i=new Na(this),this.M=this,this.F=null}w(st,fe),st.prototype[An]=!0,st.prototype.removeEventListener=function(a,h,m,y){Fp(this,a,h,m,y)};function vt(a,h){var m,y=a.F;if(y)for(m=[];y;y=y.F)m.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new je(h,a);else if(h instanceof je)h.target=h.target||a;else{var j=h;h=new je(y,a),R(h,j)}if(j=!0,m)for(var O=m.length-1;0<=O;O--){var $=h.g=m[O];j=Aa($,y,!0,h)&&j}if($=h.g=a,j=Aa($,y,!0,h)&&j,j=Aa($,y,!1,h)&&j,m)for(O=0;O<m.length;O++)$=h.g=m[O],j=Aa($,y,!1,h)&&j}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],y=0;y<m.length;y++)Sa(m[y]);delete a.g[h],a.h--}}this.F=null},st.prototype.K=function(a,h,m,y){return this.i.add(String(a),h,!1,m,y)},st.prototype.L=function(a,h,m,y){return this.i.add(String(a),h,!0,m,y)};function Aa(a,h,m,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,O=0;O<h.length;++O){var $=h[O];if($&&!$.da&&$.capture==m){var ge=$.listener,Ye=$.ha||$.src;$.fa&&mu(a.i,$),j=ge.call(Ye,y)!==!1&&j}}return j&&!y.defaultPrevented}function $p(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Hp(a){a.g=$p(()=>{a.g=null,a.i&&(a.i=!1,Hp(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class WE extends fe{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Hp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bi(a){fe.call(this),this.h=a,this.g={}}w(bi,fe);var qp=[];function Wp(a){M(a.g,function(h,m){this.g.hasOwnProperty(m)&&_u(h)},a),a.g={}}bi.prototype.N=function(){bi.aa.N.call(this),Wp(this)},bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eu=l.JSON.stringify,GE=l.JSON.parse,KE=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Iu(){}Iu.prototype.h=null;function Gp(a){return a.h||(a.h=a.i())}function Kp(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tu(){je.call(this,"d")}w(Tu,je);function Su(){je.call(this,"c")}w(Su,je);var Ur={},Qp=null;function Ra(){return Qp=Qp||new st}Ur.La="serverreachability";function Yp(a){je.call(this,Ur.La,a)}w(Yp,je);function ji(a){const h=Ra();vt(h,new Yp(h))}Ur.STAT_EVENT="statevent";function Xp(a,h){je.call(this,Ur.STAT_EVENT,a),this.stat=h}w(Xp,je);function _t(a){const h=Ra();vt(h,new Xp(h,a))}Ur.Ma="timingevent";function Jp(a,h){je.call(this,Ur.Ma,a),this.size=h}w(Jp,je);function Oi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Li(){this.g=!0}Li.prototype.xa=function(){this.g=!1};function QE(a,h,m,y,j,O){a.info(function(){if(a.g)if(O)for(var $="",ge=O.split("&"),Ye=0;Ye<ge.length;Ye++){var de=ge[Ye].split("=");if(1<de.length){var it=de[0];de=de[1];var ot=it.split("_");$=2<=ot.length&&ot[1]=="type"?$+(it+"="+de+"&"):$+(it+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+y+") [attempt "+j+"]: "+h+`
`+m+`
`+$})}function YE(a,h,m,y,j,O,$){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+j+"]: "+h+`
`+m+`
`+O+" "+$})}function Es(a,h,m,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+JE(a,m)+(y?" "+y:"")})}function XE(a,h){a.info(function(){return"TIMEOUT: "+h})}Li.prototype.info=function(){};function JE(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var y=m[a];if(!(2>y.length)){var j=y[1];if(Array.isArray(j)&&!(1>j.length)){var O=j[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<j.length;$++)j[$]=""}}}}return Eu(m)}catch{return h}}var Pa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nu;function Ca(){}w(Ca,Iu),Ca.prototype.g=function(){return new XMLHttpRequest},Ca.prototype.i=function(){return{}},Nu=new Ca;function Yn(a,h,m,y){this.j=a,this.i=h,this.l=m,this.R=y||1,this.U=new bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new em}function em(){this.i=null,this.g="",this.h=!1}var tm={},Au={};function Ru(a,h,m){a.L=1,a.v=ja(Rn(h)),a.m=m,a.P=!0,nm(a,null)}function nm(a,h){a.F=Date.now(),ka(a),a.A=Rn(a.v);var m=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),gm(m.i,"t",y),a.C=0,m=a.j.J,a.h=new em,a.g=jm(a.j,m?h:null,!a.m),0<a.O&&(a.M=new WE(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,y=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(qp[0]=j.toString()),j=qp);for(var O=0;O<j.length;O++){var $=Up(m,j[O],y||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),ji(),QE(a.i,a.u,a.A,a.l,a.R,a.m)}Yn.prototype.ca=function(a){a=a.target;const h=this.M;h&&Pn(a)==3?h.j():this.Y(a)},Yn.prototype.Y=function(a){try{if(a==this.g)e:{const ot=Pn(this.g);var h=this.g.Ba();const Ss=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Im(this.g)))){this.J||ot!=4||h==7||(h==8||0>=Ss?ji(3):ji(2)),Pu(this);var m=this.g.Z();this.X=m;t:if(rm(this)){var y=Im(this.g);a="";var j=y.length,O=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fr(this),Vi(this);var $="";break t}this.h.i=new l.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(O&&h==j-1)});y.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=m==200,YE(this.i,this.u,this.A,this.l,this.R,ot,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,Ye=this.g;if((ge=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ge)){var de=ge;break t}}de=null}if(m=de)Es(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cu(this,m);else{this.o=!1,this.s=3,_t(12),Fr(this),Vi(this);break e}}if(this.P){m=!0;let Yt;for(;!this.J&&this.C<$.length;)if(Yt=ZE(this,$),Yt==Au){ot==4&&(this.s=4,_t(14),m=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==tm){this.s=4,_t(15),Es(this.i,this.l,$,"[Invalid Chunk]"),m=!1;break}else Es(this.i,this.l,Yt,null),Cu(this,Yt);if(rm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||$.length!=0||this.h.h||(this.s=1,_t(16),m=!1),this.o=this.o&&m,!m)Es(this.i,this.l,$,"[Invalid Chunked Response]"),Fr(this),Vi(this);else if(0<$.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Lu(it),it.M=!0,_t(11))}}else Es(this.i,this.l,$,null),Cu(this,$);ot==4&&Fr(this),this.o&&!this.J&&(ot==4?Cm(this.j,this):(this.o=!1,ka(this)))}else gI(this.g),m==400&&0<$.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Fr(this),Vi(this)}}}catch{}finally{}};function rm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ZE(a,h){var m=a.C,y=h.indexOf(`
`,m);return y==-1?Au:(m=Number(h.substring(m,y)),isNaN(m)?tm:(y+=1,y+m>h.length?Au:(h=h.slice(y,y+m),a.C=y+m,h)))}Yn.prototype.cancel=function(){this.J=!0,Fr(this)};function ka(a){a.S=Date.now()+a.I,sm(a,a.I)}function sm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Oi(g(a.ba,a),h)}function Pu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Yn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(XE(this.i,this.A),this.L!=2&&(ji(),_t(17)),Fr(this),this.s=2,Vi(this)):sm(this,this.S-a)};function Vi(a){a.j.G==0||a.J||Cm(a.j,a)}function Fr(a){Pu(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Wp(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Cu(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||ku(m.h,a))){if(!a.K&&ku(m.h,a)&&m.G==3){try{var y=m.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var j=y;if(j[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)Fa(m),Ma(m);else break e;Ou(m),_t(18)}}else m.za=j[1],0<m.za-m.T&&37500>j[2]&&m.F&&m.v==0&&!m.C&&(m.C=Oi(g(m.Za,m),6e3));if(1>=am(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else zr(m,11)}else if((a.K||m.g==a)&&Fa(m),!_(h))for(j=m.Da.g.parse(h),h=0;h<j.length;h++){let de=j[h];if(m.T=de[0],de=de[1],m.G==2)if(de[0]=="c"){m.K=de[1],m.ia=de[2];const it=de[3];it!=null&&(m.la=it,m.j.info("VER="+m.la));const ot=de[4];ot!=null&&(m.Aa=ot,m.j.info("SVER="+m.Aa));const Ss=de[5];Ss!=null&&typeof Ss=="number"&&0<Ss&&(y=1.5*Ss,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Yt=a.g;if(Yt){const za=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(za){var O=y.h;O.g||za.indexOf("spdy")==-1&&za.indexOf("quic")==-1&&za.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(bu(O,O.h),O.h=null))}if(y.D){const Vu=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Vu&&(y.ya=Vu,xe(y.I,y.D,Vu))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var $=a;if(y.qa=Dm(y,y.J?y.ia:null,y.W),$.K){lm(y.h,$);var ge=$,Ye=y.L;Ye&&(ge.I=Ye),ge.B&&(Pu(ge),ka(ge)),y.g=$}else Rm(y);0<m.i.length&&Ua(m)}else de[0]!="stop"&&de[0]!="close"||zr(m,7);else m.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?zr(m,7):ju(m):de[0]!="noop"&&m.l&&m.l.ta(de),m.v=0)}}ji(4)}catch{}}var eI=class{constructor(a,h){this.g=a,this.map=h}};function im(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function om(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function am(a){return a.h?1:a.g?a.g.size:0}function ku(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function bu(a,h){a.g?a.g.add(h):a.h=h}function lm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}im.prototype.cancel=function(){if(this.i=cm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function cm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return P(a.i)}function tI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],m=a.length,y=0;y<m;y++)h.push(a[y]);return h}h=[],m=0;for(y in a)h[m++]=a[y];return h}function nI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const y in a)h[m++]=y;return h}}}function um(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=nI(a),y=tI(a),j=y.length,O=0;O<j;O++)h.call(void 0,y[O],m&&m[O],a)}var dm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rI(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var y=a[m].indexOf("="),j=null;if(0<=y){var O=a[m].substring(0,y);j=a[m].substring(y+1)}else O=a[m];h(O,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Br(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Br){this.h=a.h,ba(this,a.j),this.o=a.o,this.g=a.g,Da(this,a.s),this.l=a.l;var h=a.i,m=new Fi;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),hm(this,m),this.m=a.m}else a&&(h=String(a).match(dm))?(this.h=!1,ba(this,h[1]||"",!0),this.o=Mi(h[2]||""),this.g=Mi(h[3]||"",!0),Da(this,h[4]),this.l=Mi(h[5]||"",!0),hm(this,h[6]||"",!0),this.m=Mi(h[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}Br.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Ui(h,fm,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Ui(h,fm,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Ui(m,m.charAt(0)=="/"?oI:iI,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Ui(m,lI)),a.join("")};function Rn(a){return new Br(a)}function ba(a,h,m){a.j=m?Mi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Da(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function hm(a,h,m){h instanceof Fi?(a.i=h,cI(a.i,a.h)):(m||(h=Ui(h,aI)),a.i=new Fi(h,a.h))}function xe(a,h,m){a.i.set(h,m)}function ja(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Mi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ui(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,sI),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function sI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var fm=/[#\/\?@]/g,iI=/[#\?:]/g,oI=/[#\?]/g,aI=/[#\?@]/g,lI=/#/g;function Fi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Xn(a){a.g||(a.g=new Map,a.h=0,a.i&&rI(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Fi.prototype,t.add=function(a,h){Xn(this),this.i=null,a=Is(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function pm(a,h){Xn(a),h=Is(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function mm(a,h){return Xn(a),h=Is(a,h),a.g.has(h)}t.forEach=function(a,h){Xn(this),this.g.forEach(function(m,y){m.forEach(function(j){a.call(h,j,y,this)},this)},this)},t.na=function(){Xn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let y=0;y<h.length;y++){const j=a[y];for(let O=0;O<j.length;O++)m.push(h[y])}return m},t.V=function(a){Xn(this);let h=[];if(typeof a=="string")mm(this,a)&&(h=h.concat(this.g.get(Is(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return Xn(this),this.i=null,a=Is(this,a),mm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function gm(a,h,m){pm(a,h),0<m.length&&(a.i=null,a.g.set(Is(a,h),P(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var y=h[m];const O=encodeURIComponent(String(y)),$=this.V(y);for(y=0;y<$.length;y++){var j=O;$[y]!==""&&(j+="="+encodeURIComponent(String($[y]))),a.push(j)}}return this.i=a.join("&")};function Is(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function cI(a,h){h&&!a.j&&(Xn(a),a.i=null,a.g.forEach(function(m,y){var j=y.toLowerCase();y!=j&&(pm(this,y),gm(this,j,m))},a)),a.j=h}function uI(a,h){const m=new Li;if(l.Image){const y=new Image;y.onload=x(Jn,m,"TestLoadImage: loaded",!0,h,y),y.onerror=x(Jn,m,"TestLoadImage: error",!1,h,y),y.onabort=x(Jn,m,"TestLoadImage: abort",!1,h,y),y.ontimeout=x(Jn,m,"TestLoadImage: timeout",!1,h,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function dI(a,h){const m=new Li,y=new AbortController,j=setTimeout(()=>{y.abort(),Jn(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(O=>{clearTimeout(j),O.ok?Jn(m,"TestPingServer: ok",!0,h):Jn(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),Jn(m,"TestPingServer: error",!1,h)})}function Jn(a,h,m,y,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),y(m)}catch{}}function hI(){this.g=new KE}function fI(a,h,m){const y=m||"";try{um(a,function(j,O){let $=j;d(j)&&($=Eu(j)),h.push(y+O+"="+encodeURIComponent($))})}catch(j){throw h.push(y+"type="+encodeURIComponent("_badmap")),j}}function Oa(a){this.l=a.Ub||null,this.j=a.eb||!1}w(Oa,Iu),Oa.prototype.g=function(){return new La(this.l,this.j)},Oa.prototype.i=function(a){return function(){return a}}({});function La(a,h){st.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(La,st),t=La.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,zi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ym(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ym(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Bi(this):zi(this),this.readyState==3&&ym(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Bi(this))},t.Qa=function(a){this.g&&(this.response=a,Bi(this))},t.ga=function(){this.g&&Bi(this)};function Bi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,zi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function zi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(La.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function vm(a){let h="";return M(a,function(m,y){h+=y,h+=":",h+=m,h+=`\r
`}),h}function Du(a,h,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=vm(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):xe(a,h,m))}function ke(a){st.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ke,st);var pI=/^https?$/i,mI=["POST","PUT"];t=ke.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nu.g(),this.v=this.o?Gp(this.o):Gp(Nu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){_m(this,O);return}if(a=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var j in y)m.set(j,y[j]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())m.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(mI,h,void 0))||y||j||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of m)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Em(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){_m(this,O)}};function _m(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,wm(a),Va(a)}function wm(a){a.A||(a.A=!0,vt(a,"complete"),vt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,vt(this,"complete"),vt(this,"abort"),Va(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Va(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xm(this):this.bb())},t.bb=function(){xm(this)};function xm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Pn(a)!=4||a.Z()!=2)){if(a.u&&Pn(a)==4)$p(a.Ea,0,a);else if(vt(a,"readystatechange"),Pn(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var y;if(y=$===0){var j=String(a.D).match(dm)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),y=!pI.test(j?j.toLowerCase():"")}m=y}if(m)vt(a,"complete"),vt(a,"success");else{a.m=6;try{var O=2<Pn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",wm(a)}}finally{Va(a)}}}}function Va(a,h){if(a.g){Em(a);const m=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||vt(a,"ready");try{m.onreadystatechange=y}catch{}}}function Em(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Pn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),GE(h)}};function Im(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function gI(a){const h={};a=(a.g&&2<=Pn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var m=k(a[y]);const j=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=h[j]||[];h[j]=O,O.push(m)}I(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $i(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function Tm(a){this.Aa=0,this.i=[],this.j=new Li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$i("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$i("baseRetryDelayMs",5e3,a),this.cb=$i("retryDelaySeedMs",1e4,a),this.Wa=$i("forwardChannelMaxRetries",2,a),this.wa=$i("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new im(a&&a.concurrentRequestLimit),this.Da=new hI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tm.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,y){_t(0),this.W=a,this.H=h||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=Dm(this,null,this.W),Ua(this)};function ju(a){if(Sm(a),a.G==3){var h=a.U++,m=Rn(a.I);if(xe(m,"SID",a.K),xe(m,"RID",h),xe(m,"TYPE","terminate"),Hi(a,m),h=new Yn(a,a.j,h),h.L=2,h.v=ja(Rn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=jm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ka(h)}bm(a)}function Ma(a){a.g&&(Lu(a),a.g.cancel(),a.g=null)}function Sm(a){Ma(a),a.u&&(l.clearTimeout(a.u),a.u=null),Fa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ua(a){if(!om(a.h)&&!a.s){a.s=!0;var h=a.Ga;z||Q(),U||(z(),U=!0),H.add(h,a),a.B=0}}function yI(a,h){return am(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Oi(g(a.Ga,a,h),km(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new Yn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=v(O),R(O,this.S)):O=this.S),this.m!==null||this.O||(j.H=O,O=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Am(this,j,h),m=Rn(this.I),xe(m,"RID",a),xe(m,"CVER",22),this.D&&xe(m,"X-HTTP-Session-Id",this.D),Hi(this,m),O&&(this.O?h="headers="+encodeURIComponent(String(vm(O)))+"&"+h:this.m&&Du(m,this.m,O)),bu(this.h,j),this.Ua&&xe(m,"TYPE","init"),this.P?(xe(m,"$req",h),xe(m,"SID","null"),j.T=!0,Ru(j,m,null)):Ru(j,m,h),this.G=2}}else this.G==3&&(a?Nm(this,a):this.i.length==0||om(this.h)||Nm(this))};function Nm(a,h){var m;h?m=h.l:m=a.U++;const y=Rn(a.I);xe(y,"SID",a.K),xe(y,"RID",m),xe(y,"AID",a.T),Hi(a,y),a.m&&a.o&&Du(y,a.m,a.o),m=new Yn(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Am(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),bu(a.h,m),Ru(m,y,h)}function Hi(a,h){a.H&&M(a.H,function(m,y){xe(h,y,m)}),a.l&&um({},function(m,y){xe(h,y,m)})}function Am(a,h,m){m=Math.min(a.i.length,m);var y=a.l?g(a.l.Na,a.l,a):null;e:{var j=a.i;let O=-1;for(;;){const $=["count="+m];O==-1?0<m?(O=j[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let ge=!0;for(let Ye=0;Ye<m;Ye++){let de=j[Ye].g;const it=j[Ye].map;if(de-=O,0>de)O=Math.max(0,j[Ye].g-100),ge=!1;else try{fI(it,$,"req"+de+"_")}catch{y&&y(it)}}if(ge){y=$.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,y}function Rm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;z||Q(),U||(z(),U=!0),H.add(h,a),a.v=0}}function Ou(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Oi(g(a.Fa,a),km(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Pm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Oi(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),Ma(this),Pm(this))};function Lu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Pm(a){a.g=new Yn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Rn(a.qa);xe(h,"RID","rpc"),xe(h,"SID",a.K),xe(h,"AID",a.T),xe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(h,"TO",a.ja),xe(h,"TYPE","xmlhttp"),Hi(a,h),a.m&&a.o&&Du(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=ja(Rn(h)),m.m=null,m.P=!0,nm(m,a)}t.Za=function(){this.C!=null&&(this.C=null,Ma(this),Ou(this),_t(19))};function Fa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Cm(a,h){var m=null;if(a.g==h){Fa(a),Lu(a),a.g=null;var y=2}else if(ku(a.h,h))m=h.D,lm(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var j=a.B;y=Ra(),vt(y,new Jp(y,m)),Ua(a)}else Rm(a);else if(j=h.s,j==3||j==0&&0<h.X||!(y==1&&yI(a,h)||y==2&&Ou(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),j){case 1:zr(a,5);break;case 4:zr(a,10);break;case 3:zr(a,6);break;default:zr(a,2)}}}function km(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function zr(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),y=a.Xa;const j=!y;y=new Br(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ba(y,"https"),ja(y),j?uI(y.toString(),m):dI(y.toString(),m)}else _t(2);a.G=0,a.l&&a.l.sa(h),bm(a),Sm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function bm(a){if(a.G=0,a.ka=[],a.l){const h=cm(a.h);(h.length!=0||a.i.length!=0)&&(A(a.ka,h),A(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Dm(a,h,m){var y=m instanceof Br?Rn(m):new Br(m);if(y.g!="")h&&(y.g=h+"."+y.g),Da(y,y.s);else{var j=l.location;y=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var O=new Br(null);y&&ba(O,y),h&&(O.g=h),j&&Da(O,j),m&&(O.l=m),y=O}return m=a.D,h=a.ya,m&&h&&xe(y,m,h),xe(y,"VER",a.la),Hi(a,y),y}function jm(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ke(new Oa({eb:m})):new ke(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Om(){}t=Om.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ba(){}Ba.prototype.g=function(a,h){return new Dt(a,h)};function Dt(a,h){st.call(this),this.g=new Tm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!_(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ts(this)}w(Dt,st),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){ju(this.g)},Dt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=Eu(a),a=m);h.i.push(new eI(h.Ya++,a)),h.G==3&&Ua(h)},Dt.prototype.N=function(){this.g.l=null,delete this.j,ju(this.g),delete this.g,Dt.aa.N.call(this)};function Lm(a){Tu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}w(Lm,Tu);function Vm(){Su.call(this),this.status=1}w(Vm,Su);function Ts(a){this.g=a}w(Ts,Om),Ts.prototype.ua=function(){vt(this.g,"a")},Ts.prototype.ta=function(a){vt(this.g,new Lm(a))},Ts.prototype.sa=function(a){vt(this.g,new Vm)},Ts.prototype.ra=function(){vt(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,Ow=function(){return new Ba},jw=function(){return Ra()},Dw=Ur,Th={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pa.NO_ERROR=0,Pa.TIMEOUT=8,Pa.HTTP_ERROR=6,Rl=Pa,Zp.COMPLETE="complete",bw=Zp,Kp.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",st.prototype.listen=st.prototype.K,io=Kp,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,kw=ke}).apply(typeof al<"u"?al:typeof self<"u"?self:typeof window<"u"?window:{});const xy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ti="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Vf("@firebase/firestore");function Zi(){return us.logLevel}function G(t,...e){if(us.logLevel<=ae.DEBUG){const n=e.map(Xf);us.debug(`Firestore (${Ti}): ${t}`,...n)}}function Wn(t,...e){if(us.logLevel<=ae.ERROR){const n=e.map(Xf);us.error(`Firestore (${Ti}): ${t}`,...n)}}function li(t,...e){if(us.logLevel<=ae.WARN){const n=e.map(Xf);us.warn(`Firestore (${Ti}): ${t}`,...n)}}function Xf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${Ti}) INTERNAL ASSERTION FAILED: `+t;throw Wn(e),new Error(e)}function ue(t,e){t||J()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends En{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class PP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CP{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ue(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new gn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new Lw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new dt(e)}}class kP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new kP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ue(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string"),this.R=n.token,new DP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=OP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function ci(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ae(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Ae(0,0))}static max(){return new Z(new Ae(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ho.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ho?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ye extends Ho{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const LP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends Ho{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return LP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(ye.fromString(e))}static fromName(e){return new Y(ye.fromString(e).popFirst(5))}static empty(){return new Y(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new ye(e.slice()))}}function VP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Pr(s,Y.empty(),e)}function MP(t){return new Pr(t.readTime,t.key,-1)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(Z.min(),Y.empty(),-1)}static max(){return new Pr(Z.max(),Y.empty(),-1)}}function UP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==FP)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function zP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function la(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jf.oe=-1;function ca(t){return t==null}function fc(t){return t===0&&1/t==-1/0}function $P(t){return typeof t=="number"&&Number.isInteger(t)&&!fc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Mw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ll(this.root,e,this.comparator,!0)}}class ll{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iy(this.data.getIterator())}getIteratorFrom(e){return new Iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class Iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Lt([])}unionWith(e){let n=new tt(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ci(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Uw("Invalid base64 string: "+i):i}}(e);return new rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const HP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(t){if(ue(!!t),typeof t=="string"){let e=0;const n=HP.exec(t);if(ue(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ds(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ep(t){const e=t.mapValue.fields.__previous_value__;return Zf(e)?ep(e):e}function qo(t){const e=Cr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n,r,s,i,o,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class Wo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl={mapValue:{}};function hs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zf(t)?4:GP(t)?9007199254740991:WP(t)?10:11:J()}function _n(t,e){if(t===e)return!0;const n=hs(t);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qo(t).isEqual(qo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Cr(s.timestampValue),l=Cr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ds(s.bytesValue).isEqual(ds(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),l=Oe(i.doubleValue);return o===l?fc(o)===fc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ci(t.arrayValue.values||[],e.arrayValue.values||[],_n);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Ey(o)!==Ey(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!_n(o[c],l[c])))return!1;return!0}(t,e);default:return J()}}function Go(t,e){return(t.values||[]).find(n=>_n(n,e))!==void 0}function ui(t,e){if(t===e)return 0;const n=hs(t),r=hs(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Oe(i.integerValue||i.doubleValue),c=Oe(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Ty(t.timestampValue,e.timestampValue);case 4:return Ty(qo(t),qo(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ds(i),c=ds(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=he(l[d],c[d]);if(f!==0)return f}return he(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=he(Oe(i.latitude),Oe(o.latitude));return l!==0?l:he(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,f;const p=i.fields||{},g=o.fields||{},x=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,P=he(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:Sy(x,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===cl.mapValue&&o===cl.mapValue)return 0;if(i===cl.mapValue)return 1;if(o===cl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=he(c[p],f[p]);if(g!==0)return g;const x=ui(l[c[p]],d[f[p]]);if(x!==0)return x}return he(c.length,f.length)}(t.mapValue,e.mapValue);default:throw J()}}function Ty(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Cr(t),r=Cr(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function Sy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ui(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function di(t){return Sh(t)}function Sh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Cr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Sh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Sh(n.fields[o])}`;return s+"}"}(t.mapValue):J()}function Ny(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Nh(t){return!!t&&"integerValue"in t}function tp(t){return!!t&&"arrayValue"in t}function Ay(t){return!!t&&"nullValue"in t}function Ry(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function WP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function _o(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_o(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_o(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_o(n)}setAll(e){let n=Ze.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=_o(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _n(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Pl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new xt(_o(this.value))}}function Fw(t){const e=[];return vs(t.fields,(n,r)=>{const s=new Ze([n]);if(Pl(r)){const i=Fw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Lt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ke(e,0,Z.min(),Z.min(),Z.min(),xt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ke(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new Ke(e,2,n,Z.min(),Z.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new Ke(e,3,n,Z.min(),Z.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ke&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.position=e,this.inclusive=n}}function Py(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=ui(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_n(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n="asc"){this.field=e,this.dir=n}}function KP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{}class Fe extends Bw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YP(e,n,r):n==="array-contains"?new ZP(e,r):n==="in"?new eC(e,r):n==="not-in"?new tC(e,r):n==="array-contains-any"?new nC(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new XP(e,r):new JP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ui(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(ui(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends Bw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new an(e,n)}matches(e){return zw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zw(t){return t.op==="and"}function $w(t){return QP(t)&&zw(t)}function QP(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function Ah(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+di(t.value);if($w(t))return t.filters.map(e=>Ah(e)).join(",");{const e=t.filters.map(n=>Ah(n)).join(",");return`${t.op}(${e})`}}function Hw(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&_n(r.value,s.value)}(t,e):t instanceof an?function(r,s){return s instanceof an&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Hw(o,s.filters[l]),!0):!1}(t,e):void J()}function qw(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${di(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(qw).join(" ,")+"}"}(t):"Filter"}class YP extends Fe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class XP extends Fe{constructor(e,n){super(e,"in",n),this.keys=Ww("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JP extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=Ww("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ww(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class ZP extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tp(n)&&Go(n.arrayValue,this.value)}}class eC extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Go(this.value.arrayValue,n)}}class tC extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Go(this.value.arrayValue,n)}}class nC extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Go(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function ky(t,e=null,n=[],r=[],s=null,i=null,o=null){return new rC(t,e,n,r,s,i,o)}function np(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ah(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ca(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>di(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>di(r)).join(",")),e.ue=n}return e.ue}function rp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Hw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cy(t.startAt,e.startAt)&&Cy(t.endAt,e.endAt)}function Rh(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sC(t,e,n,r,s,i,o,l){return new ua(t,e,n,r,s,i,o,l)}function sp(t){return new ua(t)}function by(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Gw(t){return t.collectionGroup!==null}function wo(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new tt(Ze.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new mc(i,r))}),n.has(Ze.keyField().canonicalString())||e.ce.push(new mc(Ze.keyField(),r))}return e.ce}function yn(t){const e=ne(t);return e.le||(e.le=iC(e,wo(t))),e.le}function iC(t,e){if(t.limitType==="F")return ky(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new mc(s.field,i)});const n=t.endAt?new pc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pc(t.startAt.position,t.startAt.inclusive):null;return ky(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ph(t,e){const n=t.filters.concat([e]);return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ch(t,e,n){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kc(t,e){return rp(yn(t),yn(e))&&t.limitType===e.limitType}function Kw(t){return`${np(yn(t))}|lt:${t.limitType}`}function As(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>qw(s)).join(", ")}]`),ca(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>di(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>di(s)).join(",")),`Target(${r})`}(yn(t))}; limitType=${t.limitType})`}function Qc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of wo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=Py(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,wo(r),s)||r.endAt&&!function(o,l,c){const d=Py(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,wo(r),s))}(t,e)}function oC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Qw(t){return(e,n)=>{let r=!1;for(const s of wo(t)){const i=aC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function aC(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?ui(c,d):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Mw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new Ce(Y.comparator);function Gn(){return lC}const Yw=new Ce(Y.comparator);function oo(...t){let e=Yw;for(const n of t)e=e.insert(n.key,n);return e}function Xw(t){let e=Yw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xr(){return xo()}function Jw(){return xo()}function xo(){return new Si(t=>t.toString(),(t,e)=>t.isEqual(e))}const cC=new Ce(Y.comparator),uC=new tt(Y.comparator);function ie(...t){let e=uC;for(const n of t)e=e.add(n);return e}const dC=new tt(he);function hC(){return dC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function Zw(t){return{integerValue:""+t}}function fC(t,e){return $P(e)?Zw(e):ip(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this._=void 0}}function pC(t,e,n){return t instanceof gc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Zf(i)&&(i=ep(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof hi?tx(t,e):t instanceof fi?nx(t,e):function(s,i){const o=ex(s,i),l=Dy(o)+Dy(s.Pe);return Nh(o)&&Nh(s.Pe)?Zw(l):ip(s.serializer,l)}(t,e)}function mC(t,e,n){return t instanceof hi?tx(t,e):t instanceof fi?nx(t,e):n}function ex(t,e){return t instanceof yc?function(r){return Nh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class gc extends Yc{}class hi extends Yc{constructor(e){super(),this.elements=e}}function tx(t,e){const n=rx(e);for(const r of t.elements)n.some(s=>_n(s,r))||n.push(r);return{arrayValue:{values:n}}}class fi extends Yc{constructor(e){super(),this.elements=e}}function nx(t,e){let n=rx(e);for(const r of t.elements)n=n.filter(s=>!_n(s,r));return{arrayValue:{values:n}}}class yc extends Yc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Dy(t){return Oe(t.integerValue||t.doubleValue)}function rx(t){return tp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.field=e,this.transform=n}}function gC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof hi&&s instanceof hi||r instanceof fi&&s instanceof fi?ci(r.elements,s.elements,_n):r instanceof yc&&s instanceof yc?_n(r.Pe,s.Pe):r instanceof gc&&s instanceof gc}(t.transform,e.transform)}class yC{constructor(e,n){this.version=e,this.transformResults=n}}class Et{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Et}static exists(e){return new Et(void 0,e)}static updateTime(e){return new Et(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xc{}function ix(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new op(t.key,Et.none()):new da(t.key,t.data,Et.none());{const n=t.data,r=xt.empty();let s=new tt(Ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Lr(t.key,r,new Lt(s.toArray()),Et.none())}}function vC(t,e,n){t instanceof da?function(s,i,o){const l=s.value.clone(),c=Oy(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Lr?function(s,i,o){if(!Cl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Oy(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(ox(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Eo(t,e,n,r){return t instanceof da?function(i,o,l,c){if(!Cl(i.precondition,o))return l;const d=i.value.clone(),f=Ly(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lr?function(i,o,l,c){if(!Cl(i.precondition,o))return l;const d=Ly(i.fieldTransforms,c,o),f=o.data;return f.setAll(ox(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Cl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function _C(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ex(r.transform,s||null);i!=null&&(n===null&&(n=xt.empty()),n.set(r.field,i))}return n||null}function jy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ci(r,s,(i,o)=>gC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class da extends Xc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Lr extends Xc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ox(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Oy(t,e,n){const r=new Map;ue(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,mC(o,l,n[s]))}return r}function Ly(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,pC(i,o,e))}return r}class op extends Xc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ax extends Xc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&vC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Eo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Eo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Jw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=ix(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&ci(this.mutations,e.mutations,(n,r)=>jy(n,r))&&ci(this.baseMutations,e.baseMutations,(n,r)=>jy(n,r))}}class ap{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ue(e.mutations.length===r.length);let s=function(){return cC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ap(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,le;function lx(t){switch(t){default:return J();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function cx(t){if(t===void 0)return Wn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Me.OK:return L.OK;case Me.CANCELLED:return L.CANCELLED;case Me.UNKNOWN:return L.UNKNOWN;case Me.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Me.INTERNAL:return L.INTERNAL;case Me.UNAVAILABLE:return L.UNAVAILABLE;case Me.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Me.NOT_FOUND:return L.NOT_FOUND;case Me.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Me.ABORTED:return L.ABORTED;case Me.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Me.DATA_LOSS:return L.DATA_LOSS;default:return J()}}(le=Me||(Me={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new ts([4294967295,4294967295],0);function Vy(t){const e=IC().encode(t),n=new Cw;return n.update(e),new Uint8Array(n.digest())}function My(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ts([n,r],0),new ts([s,i],0)]}class lp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ao(`Invalid padding: ${n}`);if(r<0)throw new ao(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ao(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ts.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ts.fromNumber(r)));return s.compare(TC)===1&&(s=new ts([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Vy(e),[r,s]=My(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new lp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Vy(e),[r,s]=My(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ao extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ha.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Jc(Z.min(),s,new Ce(he),Gn(),ie())}}class ha{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ha(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class ux{constructor(e,n){this.targetId=e,this.me=n}}class dx{constructor(e,n,r=rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Uy{constructor(){this.fe=0,this.ge=By(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J()}}),new ha(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=By()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class SC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gn(),this.qe=Fy(),this.Qe=new Ce(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Rh(i))if(r===0){const o=new Y(i.path);this.Ue(n,o,Ke.newNoDocument(o,Z.min()))}else ue(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ds(r).toUint8Array()}catch(c){if(c instanceof Uw)return li("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new lp(o,s,i)}catch(c){return li(c instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Rh(l.target)){const c=new Y(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ke.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ie();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Jc(e,n,this.Qe,this.ke,r);return this.ke=Gn(),this.qe=Fy(),this.Qe=new Ce(he),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Uy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tt(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Uy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Fy(){return new Ce(Y.comparator)}function By(){return new Ce(Y.comparator)}const NC={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RC={and:"AND",or:"OR"};class PC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kh(t,e){return t.useProto3Json||ca(e)?e:{value:e}}function vc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CC(t,e){return vc(t,e.toTimestamp())}function Ut(t){return ue(!!t),Z.fromTimestamp(function(n){const r=Cr(n);return new Ae(r.seconds,r.nanos)}(t))}function cp(t,e){return bh(t,e).canonicalString()}function bh(t,e){const n=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fx(t){const e=ye.fromString(t);return ue(_x(e)),e}function _c(t,e){return cp(t.databaseId,e.path)}function Io(t,e){const n=fx(e);if(n.get(1)!==t.databaseId.projectId)throw new q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(mx(n))}function px(t,e){return cp(t.databaseId,e)}function kC(t){const e=fx(t);return e.length===4?ye.emptyPath():mx(e)}function Dh(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mx(t){return ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zy(t,e,n){return{name:_c(t,e),fields:n.value.mapValue.fields}}function bC(t,e){return"found"in e?function(r,s){ue(!!s.found),s.found.name,s.found.updateTime;const i=Io(r,s.found.name),o=Ut(s.found.updateTime),l=s.found.createTime?Ut(s.found.createTime):Z.min(),c=new xt({mapValue:{fields:s.found.fields}});return Ke.newFoundDocument(i,o,l,c)}(t,e):"missing"in e?function(r,s){ue(!!s.missing),ue(!!s.readTime);const i=Io(r,s.missing),o=Ut(s.readTime);return Ke.newNoDocument(i,o)}(t,e):J()}function DC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ue(f===void 0||typeof f=="string"),rt.fromBase64String(f||"")):(ue(f===void 0||f instanceof Buffer||f instanceof Uint8Array),rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?L.UNKNOWN:cx(d.code);return new q(f,d.message||"")}(o);n=new dx(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Io(t,r.document.name),i=Ut(r.document.updateTime),o=r.document.createTime?Ut(r.document.createTime):Z.min(),l=new xt({mapValue:{fields:r.document.fields}}),c=Ke.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new kl(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Io(t,r.document),i=r.readTime?Ut(r.readTime):Z.min(),o=Ke.newNoDocument(s,i),l=r.removedTargetIds||[];n=new kl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Io(t,r.document),i=r.removedTargetIds||[];n=new kl([],i,s,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new EC(s,i),l=r.targetId;n=new ux(l,o)}}return n}function gx(t,e){let n;if(e instanceof da)n={update:zy(t,e.key,e.value)};else if(e instanceof op)n={delete:_c(t,e.key)};else if(e instanceof Lr)n={update:zy(t,e.key,e.data),updateMask:zC(e.fieldMask)};else{if(!(e instanceof ax))return J();n={verify:_c(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof gc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof hi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:CC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J()}(t,e.precondition)),n}function jC(t,e){return t&&t.length>0?(ue(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Ut(s.updateTime):Ut(i);return o.isEqual(Z.min())&&(o=Ut(i)),new yC(o,s.transformResults||[])}(n,e))):[]}function OC(t,e){return{documents:[px(t,e.path)]}}function LC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=px(t,s);const i=function(d){if(d.length!==0)return vx(an.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Rs(g.field),direction:UC(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=kh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function VC(t){let e=kC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ue(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=yx(p);return g instanceof an&&$w(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(w){return new mc(Ps(w.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,ca(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,x=p.values||[];return new pc(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,x=p.values||[];return new pc(x,g)}(n.endAt)),sC(e,s,o,i,l,"F",c,d)}function MC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ps(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ps(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ps(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ps(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Ps(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>yx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function UC(t){return NC[t]}function FC(t){return AC[t]}function BC(t){return RC[t]}function Rs(t){return{fieldPath:t.canonicalString()}}function Ps(t){return Ze.fromServerFormat(t.fieldPath)}function vx(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Ry(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NAN"}};if(Ay(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ry(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NAN"}};if(Ay(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(n.field),op:FC(n.op),value:n.value}}}(t):t instanceof an?function(n){const r=n.getFilters().map(s=>vx(s));return r.length===1?r[0]:{compositeFilter:{op:BC(n.op),filters:r}}}(t):J()}function zC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _x(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,r,s,i=Z.min(),o=Z.min(),l=rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.ct=e}}function HC(t){const e=VC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ch(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.un=new WC}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Pr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class WC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new tt(ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new tt(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new pi(0)}static kn(){return new pi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.changes=new Si(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ke.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Eo(r.mutation,s,Lt.empty(),Ae.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=Xr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=oo();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Gn();const o=xo(),l=function(){return xo()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Lr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Eo(f.mutation,d,f.mutation.getFieldMask(),Ae.now())):o.set(d.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new KC(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=xo();let s=new Ce((o,l)=>o-l),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Lt.empty();f=l.applyToLocalView(d,f),r.set(c,f);const p=(s.get(l.batchId)||ie()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,p=Jw();f.forEach(g=>{if(!i.has(g)){const x=ix(n.get(g),r.get(g));x!==null&&p.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Gw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Xr());let l=-1,c=i;return o.next(d=>F.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ie())).next(f=>({batchId:l,changes:Xw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=oo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=oo();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,c=>{const d=function(p,g){return new ua(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Ke.newInvalidDocument(f)))});let l=oo();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Eo(f.mutation,d,Lt.empty(),Ae.now()),Qc(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ut(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:HC(s.bundledQuery),readTime:Ut(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.overlays=new Ce(Y.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Xr(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ce((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Xr(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Xr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xC(n,r));let i=this.Ir.get(n);i===void 0&&(i=ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.Tr=new tt(We.Er),this.dr=new tt(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new ye([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new ye([])),r=new We(n,e),s=new We(n,e+1);let i=ie();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tt(We.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wC(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new We(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(he);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new We(new Y(i),0);let l=new tt(he);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ue(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new We(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.Mr=e,this.docs=function(){return new Ce(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Ke.newInvalidDocument(n))}getEntries(e,n){let r=Gn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ke.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Gn();const o=n.path,l=new Y(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||UP(MP(f),r)<=0||(s.has(f.key)||Qc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tk(this)}getSize(e){return F.resolve(this.size)}}class tk extends GC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.persistence=e,this.Nr=new Si(n=>np(n),rp),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new up,this.targetCount=0,this.kr=pi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new pi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jf(0),this.Kr=!1,this.Kr=!0,this.$r=new JC,this.referenceDelegate=e(this),this.Ur=new nk(this),this.indexManager=new qC,this.remoteDocumentCache=function(s){return new ek(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $C(n),this.Gr=new YC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ZC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new sk(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class sk extends BP{constructor(e){super(),this.currentSequenceNumber=e}}class dp{constructor(e){this.persistence=e,this.Jr=new up,this.Yr=null}static Zr(e){return new dp(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=Y.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new hp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cN()?8:zP(yt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new ik;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Zi()<=ae.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",As(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Zi()<=ae.DEBUG&&G("QueryEngine","Query:",As(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Zi()<=ae.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",As(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(n))):F.resolve())}Yi(e,n){if(by(n))return F.resolve(null);let r=yn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ch(n,null,"F"),r=yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ie(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,l);return this.ns(n,d,o,c.readTime)?this.Yi(e,Ch(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return by(n)||s.isEqual(Z.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Zi()<=ae.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),As(n)),this.rs(e,o,n,VP(s,-1)).next(l=>l))})}ts(e,n){let r=new tt(Qw(e));return n.forEach((s,i)=>{Qc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Zi()<=ae.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",As(n)),this.Ji.getDocumentsMatchingQuery(e,n,Pr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ce(he),this._s=new Si(i=>np(i),rp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function lk(t,e,n,r){return new ak(t,e,n,r)}async function wx(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ie();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function ck(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const p=d.batch,g=p.keys();let x=F.resolve();return g.forEach(w=>{x=x.next(()=>f.getEntry(c,w)).next(P=>{const A=d.docVersions.get(w);ue(A!==null),P.version.compareTo(A)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),f.addEntry(P)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ie();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function xx(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function uk(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(rt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,r)),s=s.insert(p,x),function(P,A,E){return P.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,x,f)&&l.push(n.Ur.updateTargetData(i,x))});let c=Gn(),d=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(dk(i,o,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!r.isEqual(Z.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function dk(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Gn();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):G("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function hk(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fk(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ur(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function jh(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!la(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function $y(t,e,n){const r=ne(t);let s=Z.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const p=ne(c),g=p._s.get(f);return g!==void 0?F.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,o,yn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Z.min(),n?i:ie())).next(l=>(pk(r,oC(e),l),{documents:l,Ts:i})))}function pk(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Hy{constructor(){this.activeTargetIds=hC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mk{constructor(){this.so=new Hy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Hy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul=null;function yd(){return ul===null?ul=function(){return 268435456+Math.round(2147483648*Math.random())}():ul++,"0x"+ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class _k extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=yd(),c=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(f=>(G("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw li("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",c,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ti}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=yk[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=yd();return new Promise((o,l)=>{const c=new kw;c.setWithCredentials(!0),c.listenOnce(bw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Rl.NO_ERROR:const f=c.getResponseJson();G(ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Rl.TIMEOUT:G(ct,`RPC '${e}' ${i} timed out`),l(new q(L.DEADLINE_EXCEEDED,"Request time out"));break;case Rl.HTTP_ERROR:const p=c.getStatus();if(G(ct,`RPC '${e}' ${i} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const w=function(A){const E=A.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(E)>=0?E:L.UNKNOWN}(x.status);l(new q(w,x.message))}else l(new q(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new q(L.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{G(ct,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);G(ct,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=yd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ow(),l=jw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");G(ct,`Creating RPC '${e}' stream ${s}: ${f}`,c);const p=o.createWebChannel(f,c);let g=!1,x=!1;const w=new vk({Io:A=>{x?G(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(G(ct,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),G(ct,`RPC '${e}' stream ${s} sending:`,A),p.send(A))},To:()=>p.close()}),P=(A,E,_)=>{A.listen(E,S=>{try{_(S)}catch(D){setTimeout(()=>{throw D},0)}})};return P(p,io.EventType.OPEN,()=>{x||(G(ct,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),P(p,io.EventType.CLOSE,()=>{x||(x=!0,G(ct,`RPC '${e}' stream ${s} transport closed`),w.So())}),P(p,io.EventType.ERROR,A=>{x||(x=!0,li(ct,`RPC '${e}' stream ${s} transport errored:`,A),w.So(new q(L.UNAVAILABLE,"The operation could not be completed")))}),P(p,io.EventType.MESSAGE,A=>{var E;if(!x){const _=A.data[0];ue(!!_);const S=_,D=S.error||((E=S[0])===null||E===void 0?void 0:E.error);if(D){G(ct,`RPC '${e}' stream ${s} received error:`,D);const V=D.status;let M=function(T){const R=Me[T];if(R!==void 0)return cx(R)}(V),I=D.message;M===void 0&&(M=L.INTERNAL,I="Unknown error status: "+V+" with message "+D.message),x=!0,w.So(new q(M,I)),p.close()}else G(ct,`RPC '${e}' stream ${s} received:`,_),w.bo(_)}}),P(l,Dw.STAT_EVENT,A=>{A.stat===Th.PROXY?G(ct,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Th.NOPROXY&&G(ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function vd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t){return new PC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fp(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Wn(n.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wk extends Ex{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=DC(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?Ut(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Dh(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Rh(c)?{documents:OC(i,c)}:{query:LC(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=hx(i,o.resumeToken);const d=kh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Z.min())>0){l.readTime=vc(i,o.snapshotVersion.toTimestamp());const d=kh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=MC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Dh(this.serializer),n.removeTarget=e,this.a_(n)}}class xk extends Ex{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ue(!!e.streamToken),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=jC(e.writeResults,e.commitTime),r=Ut(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Dh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gx(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,bh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(L.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,bh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(L.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ik{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wn(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{_s(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=ne(c);d.L_.add(4),await fa(d),d.q_.set("Unknown"),d.L_.delete(4),await eu(d)}(this))})}),this.q_=new Ik(r,s)}}async function eu(t){if(_s(t))for(const e of t.B_)await e(!0)}async function fa(t){for(const e of t.B_)await e(!1)}function Ix(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),yp(n)?gp(n):Ni(n).r_()&&mp(n,e))}function pp(t,e){const n=ne(t),r=Ni(n);n.N_.delete(e),r.r_()&&Tx(n,e),n.N_.size===0&&(r.r_()?r.o_():_s(n)&&n.q_.set("Unknown"))}function mp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ni(t).A_(e)}function Tx(t,e){t.Q_.xe(e),Ni(t).R_(e)}function gp(t){t.Q_=new SC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ni(t).start(),t.q_.v_()}function yp(t){return _s(t)&&!Ni(t).n_()&&t.N_.size>0}function _s(t){return ne(t).L_.size===0}function Sx(t){t.Q_=void 0}async function Sk(t){t.q_.set("Online")}async function Nk(t){t.N_.forEach((e,n)=>{mp(t,e)})}async function Ak(t,e){Sx(t),yp(t)?(t.q_.M_(e),gp(t)):t.q_.set("Unknown")}async function Rk(t,e,n){if(t.q_.set("Online"),e instanceof dx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wc(t,r)}else if(e instanceof kl?t.Q_.Ke(e):e instanceof ux?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await xx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=i.N_.get(c);if(!f)return;i.N_.set(c,f.withResumeToken(rt.EMPTY_BYTE_STRING,f.snapshotVersion)),Tx(i,c);const p=new ur(f.target,c,d,f.sequenceNumber);mp(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await wc(t,r)}}async function wc(t,e,n){if(!la(e))throw e;t.L_.add(1),await fa(t),t.q_.set("Offline"),n||(n=()=>xx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await eu(t)})}function Nx(t,e){return e().catch(n=>wc(t,n,e))}async function tu(t){const e=ne(t),n=kr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Pk(e);)try{const s=await hk(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Ck(e,s)}catch(s){await wc(e,s)}Ax(e)&&Rx(e)}function Pk(t){return _s(t)&&t.O_.length<10}function Ck(t,e){t.O_.push(e);const n=kr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Ax(t){return _s(t)&&!kr(t).n_()&&t.O_.length>0}function Rx(t){kr(t).start()}async function kk(t){kr(t).p_()}async function bk(t){const e=kr(t);for(const n of t.O_)e.m_(n.mutations)}async function Dk(t,e,n){const r=t.O_.shift(),s=ap.from(r,e,n);await Nx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await tu(t)}async function jk(t,e){e&&kr(t).V_&&await async function(r,s){if(function(o){return lx(o)&&o!==L.ABORTED}(s.code)){const i=r.O_.shift();kr(r).s_(),await Nx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await tu(r)}}(t,e),Ax(t)&&Rx(t)}async function Wy(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=_s(n);n.L_.add(3),await fa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await eu(n)}async function Ok(t,e){const n=ne(t);e?(n.L_.delete(2),await eu(n)):e||(n.L_.add(2),await fa(n),n.q_.set("Unknown"))}function Ni(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new wk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Sk.bind(null,t),Ro:Nk.bind(null,t),mo:Ak.bind(null,t),d_:Rk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),yp(t)?gp(t):t.q_.set("Unknown")):(await t.K_.stop(),Sx(t))})),t.K_}function kr(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new xk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:kk.bind(null,t),mo:jk.bind(null,t),f_:bk.bind(null,t),g_:Dk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await tu(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new vp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(t,e){if(Wn("AsyncQueue",`${e}: ${t}`),la(t))return new q(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=oo(),this.sortedSet=new Ce(this.comparator)}static emptySet(e){return new Js(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Js;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.W_=new Ce(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class mi{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new mi(e,n,Js.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Vk{constructor(){this.queries=Ky(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=Ky(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new q(L.ABORTED,"Firestore shutting down"))}}function Ky(){return new Si(t=>Kw(t),Kc)}async function Px(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Lk,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=_p(o,`Initialization of query '${As(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&wp(n)}async function Cx(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Mk(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&wp(n)}function Uk(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function wp(t){t.Y_.forEach(e=>{e.next()})}var Oh,Qy;(Qy=Oh||(Oh={})).ea="default",Qy.Cache="cache";class kx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Oh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this.key=e}}class Dx{constructor(e){this.key=e}}class Fk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=Qw(e),this.Ra=new Js(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Gy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),x=Qc(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),P=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let A=!1;g&&x?g.data.isEqual(x.data)?w!==P&&(r.track({type:3,doc:x}),A=!0):this.ga(g,x)||(r.track({type:2,doc:x}),A=!0,(c&&this.Aa(x,c)>0||d&&this.Aa(x,d)<0)&&(l=!0)):!g&&x?(r.track({type:0,doc:x}),A=!0):g&&!x&&(r.track({type:1,doc:g}),A=!0,(c||d)&&(l=!0)),A&&(x?(o=o.add(x),i=P?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(x,w){const P=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return P(x)-P(w)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new mi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Gy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Dx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new bx(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Bk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zk{constructor(e){this.key=e,this.va=!1}}class $k{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Si(l=>Kw(l),Kc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ce(Y.comparator),this.Na=new Map,this.La=new up,this.Ba={},this.ka=new Map,this.qa=pi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Hk(t,e,n=!0){const r=Ux(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await jx(r,e,n,!0),s}async function qk(t,e){const n=Ux(t);await jx(n,e,!0,!1)}async function jx(t,e,n,r){const s=await fk(t.localStore,yn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Wk(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ix(t.remoteStore,s),l}async function Wk(t,e,n,r,s){t.Ka=(p,g,x)=>async function(P,A,E,_){let S=A.view.ma(E);S.ns&&(S=await $y(P.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,S)));const D=_&&_.targetChanges.get(A.targetId),V=_&&_.targetMismatches.get(A.targetId)!=null,M=A.view.applyChanges(S,P.isPrimaryClient,D,V);return Xy(P,A.targetId,M.wa),M.snapshot}(t,p,g,x);const i=await $y(t.localStore,e,!0),o=new Fk(e,i.Ts),l=o.ma(i.documents),c=ha.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);Xy(t,n,d.wa);const f=new Bk(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function Gk(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Kc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await jh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&pp(r.remoteStore,s.targetId),Lh(r,s.targetId)}).catch(aa)):(Lh(r,s.targetId),await jh(r.localStore,s.targetId,!0))}async function Kk(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pp(n.remoteStore,r.targetId))}async function Qk(t,e,n){const r=n1(t);try{const s=await function(o,l){const c=ne(o),d=Ae.now(),f=l.reduce((x,w)=>x.add(w.key),ie());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let w=Gn(),P=ie();return c.cs.getEntries(x,f).next(A=>{w=A,w.forEach((E,_)=>{_.isValidDocument()||(P=P.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,w)).next(A=>{p=A;const E=[];for(const _ of l){const S=_C(_,p.get(_.key).overlayedDocument);S!=null&&E.push(new Lr(_.key,S,Fw(S.value.mapValue),Et.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,E,l)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(x,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:Xw(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ce(he)),d=d.insert(l,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await pa(r,s.changes),await tu(r.remoteStore)}catch(s){const i=_p(s,"Failed to persist write");n.reject(i)}}async function Ox(t,e){const n=ne(t);try{const r=await uk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ue(o.va):s.removedDocuments.size>0&&(ue(o.va),o.va=!1))}),await pa(n,r,e)}catch(r){await aa(r)}}function Yy(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=ne(o);c.onlineState=l;let d=!1;c.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(d=!0)}),d&&wp(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Yk(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ce(Y.comparator);o=o.insert(i,Ke.newNoDocument(i,Z.min()));const l=ie().add(i),c=new Jc(Z.min(),new Map,new Ce(he),o,l);await Ox(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),xp(r)}else await jh(r.localStore,e,!1).then(()=>Lh(r,e,n)).catch(aa)}async function Xk(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await ck(n.localStore,e);Vx(n,r,null),Lx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pa(n,s)}catch(s){await aa(s)}}async function Jk(t,e,n){const r=ne(t);try{const s=await function(o,l){const c=ne(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(ue(p!==null),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);Vx(r,e,n),Lx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pa(r,s)}catch(s){await aa(s)}}function Lx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Vx(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Lh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Mx(t,r)})}function Mx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(pp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xp(t))}function Xy(t,e,n){for(const r of n)r instanceof bx?(t.La.addReference(r.key,e),Zk(t,r)):r instanceof Dx?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Mx(t,r.key)):J()}function Zk(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),xp(t))}function xp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(ye.fromString(e)),r=t.qa.next();t.Na.set(r,new zk(n)),t.Oa=t.Oa.insert(n,r),Ix(t.remoteStore,new ur(yn(sp(n.path)),r,"TargetPurposeLimboResolution",Jf.oe))}}async function pa(t,e,n){const r=ne(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=hp.Wi(c.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const f=ne(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,g=>F.forEach(g.$i,x=>f.persistence.referenceDelegate.addReference(p,g.targetId,x)).next(()=>F.forEach(g.Ui,x=>f.persistence.referenceDelegate.removeReference(p,g.targetId,x)))))}catch(p){if(!la(p))throw p;G("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const x=f.os.get(g),w=x.snapshotVersion,P=x.withLastLimboFreeSnapshotVersion(w);f.os=f.os.insert(g,P)}}}(r.localStore,i))}async function e1(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await wx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new q(L.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pa(n,r.hs)}}function t1(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let s=ie();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function Ux(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ox.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yk.bind(null,e),e.Ca.d_=Mk.bind(null,e.eventManager),e.Ca.$a=Uk.bind(null,e.eventManager),e}function n1(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jk.bind(null,e),e}class xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return lk(this.persistence,new ok,e.initialUser,this.serializer)}Ga(e){return new rk(dp.Zr,this.serializer)}Wa(e){return new mk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xc.provider={build:()=>new xc};class Vh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=e1.bind(null,this.syncEngine),await Ok(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Vk}()}createDatastore(e){const n=Zc(e.databaseInfo.databaseId),r=function(i){return new _k(i)}(e.databaseInfo);return function(i,o,l,c){return new Ek(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Tk(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Yy(this.syncEngine,n,0),function(){return qy.D()?new qy:new gk}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,f){const p=new $k(s,i,o,l,c,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await fa(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Vh.provider={build:()=>new Vh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=ne(s),l={documents:i.map(p=>_c(o.serializer,p))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,ye.emptyPath(),l,i.length),d=new Map;c.forEach(p=>{const g=bC(o.serializer,p);d.set(g.key.toString(),g)});const f=[];return i.forEach(p=>{const g=d.get(p.toString());ue(!!g),f.push(g)}),f}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new op(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=Y.fromPath(r);this.mutations.push(new ax(s,this.precondition(s)))}),await async function(r,s){const i=ne(r),o={writes:s.map(l=>gx(i.serializer,l))};await i.Mo("Commit",i.serializer.databaseId,ye.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw J();n=Z.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Z.min())?Et.exists(!1):Et.updateTime(n):Et.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Z.min()))throw new q(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Et.updateTime(n)}return Et.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new fp(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new r1(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!ca(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!lx(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=Vw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_p(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _d(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await wx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await o1(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Wy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Wy(e.remoteStore,s)),t._onlineComponents=e}async function o1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await _d(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;li("Error using user provided cache. Falling back to memory cache: "+n),await _d(t,new xc)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await _d(t,new xc);return t._offlineComponents}async function Ep(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await Jy(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await Jy(t,new Vh))),t._onlineComponents}function a1(t){return Ep(t).then(e=>e.syncEngine)}function l1(t){return Ep(t).then(e=>e.datastore)}async function Bx(t){const e=await Ep(t),n=e.eventManager;return n.onListen=Hk.bind(null,e.syncEngine),n.onUnlisten=Gk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Kk.bind(null,e.syncEngine),n}function c1(t,e,n={}){const r=new gn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new Fx({next:g=>{f.Za(),o.enqueueAndForget(()=>Cx(i,p));const x=g.docs.has(l);!x&&g.fromCache?d.reject(new q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&c&&c.source==="server"?d.reject(new q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new kx(sp(l.path),f,{includeMetadataChanges:!0,_a:!0});return Px(i,p)}(await Bx(t),t.asyncQueue,e,n,r)),r.promise}function u1(t,e,n={}){const r=new gn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new Fx({next:g=>{f.Za(),o.enqueueAndForget(()=>Cx(i,p)),g.fromCache&&c.source==="server"?d.reject(new q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new kx(l,f,{includeMetadataChanges:!0,_a:!0});return Px(i,p)}(await Bx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t,e,n){if(!n)throw new q(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function d1(t,e,n,r){if(e===!0&&r===!0)throw new q(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ev(t){if(!Y.isDocumentKey(t))throw new q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tv(t){if(Y.isDocumentKey(t))throw new q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nu(t);throw new q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ru{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RP;switch(r.type){case"firstParty":return new bP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Zy.get(n);r&&(G("ComponentProvider","Removing Datastore"),Zy.delete(n),r.terminate())}(this),Promise.resolve()}}function h1(t,e,n,r={}){var s;const i=(t=wn(t,ru))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=dt.MOCK_USER;else{l=G0(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dt(d)}t._authCredentials=new PP(new Lw(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ai(this.firestore,e,this._query)}}class pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}}class Ir extends Ai{constructor(e,n,r){super(e,n,sp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new Y(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function ma(t,e,...n){if(t=ze(t),$x("collection","path",e),t instanceof ru){const r=ye.fromString(e,...n);return tv(r),new Ir(t,null,r)}{if(!(t instanceof pt||t instanceof Ir))throw new q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return tv(r),new Ir(t.firestore,null,r)}}function mt(t,e,...n){if(t=ze(t),arguments.length===1&&(e=Vw.newId()),$x("doc","path",e),t instanceof ru){const r=ye.fromString(e,...n);return ev(r),new pt(t,null,new Y(r))}{if(!(t instanceof pt||t instanceof Ir))throw new q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return ev(r),new pt(t.firestore,t instanceof Ir?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fp(this,"async_queue_retry"),this.Vu=()=>{const r=vd();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=vd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=vd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new gn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!la(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Wn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=vp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&J()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ri extends ru{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new rv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rv(e),this._firestoreClient=void 0,await e}}}function f1(t,e){const n=typeof t=="object"?t:Uf(),r=typeof t=="string"?t:"(default)",s=Hc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=H0("firestore");i&&h1(s,...i)}return s}function su(t){if(t._terminated)throw new q(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||p1(t),t._firestoreClient}function p1(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,f){return new qP(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,zx(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new i1(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fs(rt.fromBase64String(e))}catch(n){throw new q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fs(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=/^__.*__$/;class g1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new da(e,this.data,n,this.fieldTransforms)}}class Hx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class iu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new iu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ec(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qx(this.Cu)&&m1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class y1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zc(e)}Qu(e,n,r,s=!1){return new iu({Cu:e,methodName:n,qu:r,path:Ze.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ou(t){const e=t._freezeSettings(),n=Zc(t._databaseId);return new y1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Wx(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ap("Data must be an object, but it was:",o,r);const l=Yx(r,o);let c,d;if(i.merge)c=new Lt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=Mh(e,p,n);if(!o.contains(g))throw new q(L.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Jx(f,g)||f.push(g)}c=new Lt(f),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new g1(new xt(l),c,d)}class au extends ya{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof au}}function Gx(t,e,n){return new iu({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Sp extends ya{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=Gx(this,e,!0),r=this.Ku.map(i=>ws(i,n)),s=new hi(r);return new sx(e.path,s)}isEqual(e){return e instanceof Sp&&oi(this.Ku,e.Ku)}}class Np extends ya{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=Gx(this,e,!0),r=this.Ku.map(i=>ws(i,n)),s=new fi(r);return new sx(e.path,s)}isEqual(e){return e instanceof Np&&oi(this.Ku,e.Ku)}}function Kx(t,e,n,r){const s=t.Qu(1,e,n);Ap("Data must be an object, but it was:",s,r);const i=[],o=xt.empty();vs(r,(c,d)=>{const f=Rp(e,c,n);d=ze(d);const p=s.Nu(f);if(d instanceof au)i.push(f);else{const g=ws(d,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new Lt(i);return new Hx(o,l,s.fieldTransforms)}function Qx(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[Mh(e,r,n)],c=[s];if(i.length%2!=0)throw new q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Mh(e,i[g])),c.push(i[g+1]);const d=[],f=xt.empty();for(let g=l.length-1;g>=0;--g)if(!Jx(d,l[g])){const x=l[g];let w=c[g];w=ze(w);const P=o.Nu(x);if(w instanceof au)d.push(x);else{const A=ws(w,P);A!=null&&(d.push(x),f.set(x,A))}}const p=new Lt(d);return new Hx(f,p,o.fieldTransforms)}function v1(t,e,n,r=!1){return ws(n,t.Qu(r?4:3,e))}function ws(t,e){if(Xx(t=ze(t)))return Ap("Unsupported field value:",e,t),Yx(t,e);if(t instanceof ya)return function(r,s){if(!qx(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=ws(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ae.fromDate(r);return{timestampValue:vc(s.serializer,i)}}if(r instanceof Ae){const i=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vc(s.serializer,i)}}if(r instanceof Ip)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fs)return{bytesValue:hx(s.serializer,r._byteString)};if(r instanceof pt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Tp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return ip(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${nu(r)}`)}(t,e)}function Yx(t,e){const n={};return Mw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(t,(r,s)=>{const i=ws(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Xx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Ip||t instanceof fs||t instanceof pt||t instanceof ya||t instanceof Tp)}function Ap(t,e,n){if(!Xx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=nu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Mh(t,e,n){if((e=ze(e))instanceof ga)return e._internalPath;if(typeof e=="string")return Rp(t,e);throw Ec("Field path arguments must be of type string or ",t,!1,void 0,n)}const _1=new RegExp("[~\\*/\\[\\]]");function Rp(t,e,n){if(e.search(_1)>=0)throw Ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ga(...e.split("."))._internalPath}catch{throw Ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ec(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(L.INVALID_ARGUMENT,l+t+c)}function Jx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new w1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class w1 extends Ic{data(){return super.data()}}function Pp(t,e){return typeof e=="string"?Rp(t,e):e instanceof ga?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cp{}class E1 extends Cp{}function Vt(t,e,...n){let r=[];e instanceof Cp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof kp).length,l=i.filter(c=>c instanceof lu).length;if(o>1||o>0&&l>0)throw new q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class lu extends E1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new lu(e,n,r)}_apply(e){const n=this._parse(e);return Zx(e._query,n),new Ai(e.firestore,e.converter,Ph(e._query,n))}_parse(e){const n=ou(e.firestore);return function(i,o,l,c,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){iv(p,f);const x=[];for(const w of p)x.push(sv(c,i,w));g={arrayValue:{values:x}}}else g=sv(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||iv(p,f),g=v1(l,o,p,f==="in"||f==="not-in");return Fe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ht(t,e,n){const r=e,s=Pp("where",t);return lu._create(s,r,n)}class kp extends Cp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)Zx(o,c),o=Ph(o,c)}(e._query,n),new Ai(e.firestore,e.converter,Ph(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function sv(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gw(e)&&n.indexOf("/")!==-1)throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!Y.isDocumentKey(r))throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ny(t,new Y(r))}if(n instanceof pt)return Ny(t,n._key);throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nu(n)}.`)}function iv(t,e){if(!Array.isArray(t)||t.length===0)throw new q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zx(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class eE{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Oe(o.doubleValue));return new Tp(i)}convertGeoPoint(e){return new Ip(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ep(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qo(e));default:return null}}convertTimestamp(e){const n=Cr(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);ue(_x(r));const s=new Wo(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Wn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class I1 extends eE{constructor(e){super(),this.firestore=e}convertBytes(e){return new fs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bp extends Ic{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bl extends bp{data(e={}){return super.data(e)}}class T1{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new zs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bl(this._firestore,this._userDataWriter,r.key,r,new zs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new bl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new zs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new bl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new zs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:S1(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function S1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t){t=wn(t,pt);const e=wn(t.firestore,Ri);return c1(su(e),t._key).then(n=>N1(e,t,n))}class Dp extends eE{constructor(e){super(),this.firestore=e}convertBytes(e){return new fs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function Rt(t){t=wn(t,Ai);const e=wn(t.firestore,Ri),n=su(e),r=new Dp(e);return x1(t._query),u1(n,t._query).then(s=>new T1(e,r,t,s))}function Sr(t,e,n){t=wn(t,pt);const r=wn(t.firestore,Ri),s=tE(t.converter,e,n);return nE(r,[Wx(ou(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Et.none())])}function dr(t,e,n,...r){t=wn(t,pt);const s=wn(t.firestore,Ri),i=ou(s);let o;return o=typeof(e=ze(e))=="string"||e instanceof ga?Qx(i,"updateDoc",t._key,e,n,r):Kx(i,"updateDoc",t._key,e),nE(s,[o.toMutation(t._key,Et.exists(!0))])}function nE(t,e){return function(r,s){const i=new gn;return r.asyncQueue.enqueueAndForget(async()=>Qk(await a1(r),s,i)),i.promise}(su(t),e)}function N1(t,e,n){const r=n.docs.get(e._key),s=new Dp(t);return new bp(t,s,e._key,r,new zs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1={maxAttempts:5};function eo(t,e){if((t=ze(t)).firestore!==e)throw new q(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1 extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ou(n)}get(n){const r=eo(n,this._firestore),s=new I1(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return J();const o=i[0];if(o.isFoundDocument())return new Ic(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new Ic(this._firestore,s,r._key,null,r.converter);throw J()})}set(n,r,s){const i=eo(n,this._firestore),o=tE(i.converter,r,s),l=Wx(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,l),this}update(n,r,s,...i){const o=eo(n,this._firestore);let l;return l=typeof(r=ze(r))=="string"||r instanceof ga?Qx(this._dataReader,"Transaction.update",o._key,r,s,i):Kx(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,l),this}delete(n){const r=eo(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=eo(e,this._firestore),r=new Dp(this._firestore);return super.get(e).then(s=>new bp(this._firestore,r,n._key,s._document,new zs(!1,!1),n.converter))}}function P1(t,e,n){t=wn(t,Ri);const r=Object.assign(Object.assign({},A1),n);return function(i){if(i.maxAttempts<1)throw new q(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const c=new gn;return i.asyncQueue.enqueueAndForget(async()=>{const d=await l1(i);new s1(i.asyncQueue,d,l,o,c).au()}),c.promise}(su(t),s=>e(new R1(t,s)),r)}function ov(...t){return new Sp("arrayUnion",t)}function av(...t){return new Np("arrayRemove",t)}(function(e,n=!0){(function(s){Ti=s})(ys),ls(new Rr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ri(new CP(r.getProvider("auth-internal")),new jP(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wo(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),pn(xy,"4.7.3",e),pn(xy,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="firebasestorage.googleapis.com",C1="storageBucket",k1=2*60*1e3,b1=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends En{constructor(e,n,r=0){super(wd(e),`Firebase Storage: ${n} (${wd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,In.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xn||(xn={}));function wd(t){return"storage/"+t}function D1(){const t="An unknown error occurred, please check the error payload for server response.";return new In(xn.UNKNOWN,t)}function j1(){return new In(xn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O1(){return new In(xn.CANCELED,"User canceled the upload/download.")}function L1(t){return new In(xn.INVALID_URL,"Invalid URL '"+t+"'.")}function V1(t){return new In(xn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lv(t){return new In(xn.INVALID_ARGUMENT,t)}function sE(){return new In(xn.APP_DELETED,"The Firebase app was deleted.")}function M1(t){return new In(xn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=tn.makeFromUrl(e,n)}catch{return new tn(e,"")}if(r.path==="")return r;throw V1(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),w={bucket:1,path:3},P=n===rE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",E=new RegExp(`^https?://${P}/${s}/${A}`,"i"),S=[{regex:l,indices:c,postModify:i},{regex:x,indices:w,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<S.length;D++){const V=S[D],M=V.regex.exec(e);if(M){const I=M[V.indices.bucket];let v=M[V.indices.path];v||(v=""),r=new tn(I,v),V.postModify(r);break}}if(r==null)throw L1(e);return r}}class U1{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let d=!1;function f(...A){d||(d=!0,e.apply(null,A))}function p(A){s=setTimeout(()=>{s=null,t(x,c())},A)}function g(){i&&clearTimeout(i)}function x(A,...E){if(d){g();return}if(A){g(),f.call(null,A,...E);return}if(c()||o){g(),f.call(null,A,...E);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,p(S)}let w=!1;function P(A){w||(w=!0,g(),!d&&(s!==null?(A||(l=2),clearTimeout(s),p(0)):A||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,P(!0)},n),P}function B1(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t){return t!==void 0}function cv(t,e,n,r){if(r<e)throw lv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw lv(`Invalid value for '${t}'. Expected ${n} or less.`)}function $1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Tc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Tc||(Tc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,r,s,i,o,l,c,d,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,w)=>{this.resolve_=x,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new dl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Tc.NO_ERROR,c=i.getStatus();if(!l||H1(c,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Tc.ABORT;r(!1,new dl(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new dl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());z1(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=D1();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?sE():O1();o(c)}else{const c=j1();o(c)}};this.canceled_?n(!1,new dl(!1,null,!0)):this.backoffId_=F1(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&B1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function W1(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function G1(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function K1(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Q1(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Y1(t,e,n,r,s,i,o=!0){const l=$1(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return K1(d,e),W1(d,n),G1(d,i),Q1(d,r),new q1(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function J1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n){this._service=e,n instanceof tn?this._location=n:this._location=tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sc(e,n)}get root(){const e=new tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return J1(this._location.path)}get storage(){return this._service}get parent(){const e=X1(this._location.path);if(e===null)return null;const n=new tn(this._location.bucket,e);return new Sc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw M1(e)}}function uv(t,e){const n=e==null?void 0:e[C1];return n==null?null:tn.makeFromBucketSpec(n,t)}function Z1(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:G0(s,t.app.options.projectId))}class eb{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=rE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=k1,this._maxUploadRetryTime=b1,this._requests=new Set,s!=null?this._bucket=tn.makeFromBucketSpec(s,this._host):this._bucket=uv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tn.makeFromBucketSpec(this._url,e):this._bucket=uv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sc(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new U1(sE());{const o=Y1(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const dv="@firebase/storage",hv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="storage";function tb(t=Uf(),e){t=ze(t);const r=Hc(t,iE).getImmediate({identifier:e}),s=H0("storage");return s&&nb(r,...s),r}function nb(t,e,n,r={}){Z1(t,e,n,r)}function rb(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new eb(n,r,s,e,ys)}function sb(){ls(new Rr(iE,rb,"PUBLIC").setMultipleInstances(!0)),pn(dv,hv,""),pn(dv,hv,"esm2017")}sb();const ib={apiKey:"AIzaSyCp8nBFXAqFw4uVRCnT1zOTNgj1YI7ceYM",authDomain:"mediapp-3d0db.firebaseapp.com",projectId:"mediapp-3d0db",storageBucket:"mediapp-3d0db.firebasestorage.app",messagingSenderId:"622195451578",appId:"1:622195451578:web:b855761adcc6e98b31c483"},jp=Y0(ib),dn=NP(jp),Kn=f1(jp);tb(jp);var _e=(t=>(t.ADMIN="admin",t.DOCTOR="doctor",t.PATIENT="patient",t))(_e||{}),Pi=(t=>(t.PENDING="pending",t.ACTIVE="active",t.SUSPENDED="suspended",t))(Pi||{}),oE=(t=>(t.MALE="male",t.FEMALE="female",t.OTHER="other",t))(oE||{}),aE=(t=>(t.MILD="mild",t.MODERATE="moderate",t.SEVERE="severe",t))(aE||{}),Dl=(t=>(t.CONSULTATION="consultation",t.FOLLOW_UP="follow-up",t.CHECKUP="checkup",t.EMERGENCY="emergency",t))(Dl||{}),He=(t=>(t.SCHEDULED="scheduled",t.CONFIRMED="confirmed",t.COMPLETED="completed",t.CANCELLED="cancelled",t.NO_SHOW="no-show",t))(He||{}),jl=(t=>(t.INITIAL="initial",t.FOLLOW_UP="follow-up",t.EMERGENCY="emergency",t.TELEMEDICINE="telemedicine",t))(jl||{}),lE=(t=>(t.NORMAL="normal",t.HIGH="high",t.LOW="low",t.CRITICAL="critical",t))(lE||{}),cE=(t=>(t.APPOINTMENT="appointment",t.ENCOUNTER="encounter",t.TEST_RESULT="test_result",t.MEDICATION="medication",t.SYMPTOM="symptom",t))(cE||{});const va={USERS:"users",APPOINTMENTS:"appointments",ENCOUNTERS:"encounters",TEST_RESULTS:"testResults",TIMELINES:"timelines"},gi={APPOINTMENT:"APT",ENCOUNTER:"ENC",TEST_RESULT:"TST",TIMELINE:"TLN"},ob={APPOINTMENT_DURATION:30},uE={APPOINTMENT:"#FF9800",ENCOUNTER:"#9C27B0",TEST_RESULT:"#2196F3",MEDICATION:"#4CAF50",SYMPTOM:"#F44336"};class dE{constructor(){$r(this,"collectionRef",ma(Kn,va.USERS))}async create(e,n){const r=mt(this.collectionRef,e),s=this.removeUndefined(n);await Sr(r,s)}async findById(e){const n=mt(this.collectionRef,e),r=await Tr(n);return r.exists()?r.data():null}async findByAuthUID(e){const n=Vt(this.collectionRef,ht("AuthID","==",e)),r=await Rt(n);return r.empty?null:r.docs[0].data()}async update(e,n){const r=mt(this.collectionRef,e),s=this.removeUndefined(n);await dr(r,s)}async findByEmail(e){const n=Vt(this.collectionRef,ht("email","==",e)),r=await Rt(n);return r.empty?null:r.docs[0].data()}async findPendingUsers(){const e=Vt(this.collectionRef,ht("status","==",Pi.PENDING));return(await Rt(e)).docs.map(r=>r.data())}async findByRole(e){const n=Vt(this.collectionRef,ht("role","==",e));return(await Rt(n)).docs.map(s=>s.data())}async findAllPatients(){return(await Rt(this.collectionRef)).docs.map(n=>n.data()).filter(n=>{var r;return((r=n.userID)==null?void 0:r.startsWith("PAT"))||n.role==="patient"})}async findAllDoctors(){return(await Rt(this.collectionRef)).docs.map(n=>n.data()).filter(n=>{var r;return((r=n.userID)==null?void 0:r.startsWith("DOC"))||n.role==="doctor"})}removeUndefined(e){if(e==null)return e;if(Array.isArray(e))return e.map(n=>this.removeUndefined(n));if(typeof e=="object"&&e.constructor===Object){const n={};for(const r in e)e[r]!==void 0&&(n[r]=this.removeUndefined(e[r]));return n}return e}}const xs=new dE,Op=async(t,e)=>{await xs.create(t,e)},br=async t=>await xs.findById(t),hE=async t=>await xs.findByAuthUID(t),Vr=async(t,e)=>{await xs.update(t,e)},fE=async()=>await xs.findPendingUsers(),ab=async()=>await xs.findAllPatients(),pE=async()=>await xs.findAllDoctors(),lb=Object.freeze(Object.defineProperty({__proto__:null,UserRepository:dE,create:Op,getAllDoctors:pE,getAllPatients:ab,getByAuthUID:hE,getById:br,getPendingUsers:fE,update:Vr},Symbol.toStringTag,{value:"Module"}));async function cb(t,e){var i,o;const n=mt(Kn,"admin","common_info"),r=3;let s;for(let l=0;l<r;l++)try{return await P1(Kn,async c=>{const d=await c.get(n);if(!d.exists())throw new Error("Common info document does not exist. Please contact an administrator.");const f=d.data(),p=t==="PAT"?"last_pat_id":"last_doc_id";let g=f[p];(!g||typeof g!="string"||!g.startsWith(t))&&(g=`${t}000`);const x=g.replace(t,"");let w=parseInt(x,10);isNaN(w)&&(w=0);const P=w+1,A=`${t}${String(P).padStart(3,"0")}`,E=f.users||{};return E[A]=e,c.update(n,{[p]:A,users:E}),A})}catch(c){if(s=c,((c==null?void 0:c.code)==="unavailable"||(c==null?void 0:c.code)==="deadline-exceeded"||(i=c==null?void 0:c.message)!=null&&i.includes("ERR_CONNECTION_CLOSED")||(o=c==null?void 0:c.message)!=null&&o.includes("network"))&&l<r-1){await new Promise(d=>setTimeout(d,Math.pow(2,l)*1e3));continue}throw(c==null?void 0:c.code)==="permission-denied"||(c==null?void 0:c.code)==="permissions-denied"?new Error("Permission denied. Please ensure you are signed in and try again."):c}throw s||new Error("Failed to generate user ID after multiple attempts. Please try again.")}async function ub(t){try{const e=mt(Kn,"admin","common_info"),n=await Tr(e);if(!n.exists())return null;const s=n.data().users||{};for(const[i,o]of Object.entries(s))if(o===t)return i;return null}catch(e){return(e==null?void 0:e.code)==="permission-denied"||(e==null?void 0:e.code)==="permissions-denied"||console.error("[ID_GEN] Error getting userID from authUID:",e),null}}function yi(t){const e=Date.now(),n=Math.floor(Math.random()*900+100);return`${t}${e}${n}`}const xd={email:"mediappcroos2000@gmail.com",authID:"BTF8DuIZC0TYTf9iK6zGXASNQWC2"},cu=new bn;cu.setCustomParameters({prompt:"select_account"});cu.addScope("email");cu.addScope("profile");const mE=async t=>{const e=t.uid;if((t.email||"")===xd.email||e===xd.authID)try{const s=await br("admin");if(s&&(s.AuthID===e||s.AuthID===xd.authID))return s}catch(s){console.error("[AUTH] Error reading admin document:",s)}const r=await ub(e);if(!r)return null;try{return await br(r)}catch(s){return console.error("[AUTH] Error reading user document:",s),null}},db=async()=>{try{return await OR(dn,cu)}catch(t){throw(t==null?void 0:t.code)==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):(t==null?void 0:t.code)==="auth/popup-blocked"?new Error("Popup was blocked by browser. Please allow popups and try again."):(console.error("[AUTH] Google sign-in error:",t),t)}},hb=async()=>{try{await mR(dn)}catch(t){throw console.error("Sign-out error:",t),t}},fv=async()=>{const t=dn.currentUser;if(!t)return null;try{return await mE(t)}catch(e){return console.error("[AUTH] Error getting current user:",e),null}},fb=t=>pR(dn,async e=>{if(e)try{const n=await mE(e);t(n)}catch(n){console.error("[AUTH] Error in onAuthStateChanged:",n),t(null)}else t(null)}),gE=b.createContext(void 0),pb=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(!0);b.useEffect(()=>{const l=fb(async c=>{if(c){const d=await fv();n(d)}else n(null);s(!1)});return()=>l()},[]);const i=async()=>{s(!0);try{await db();const l=await fv();n(l)}catch(l){throw console.error("[AUTH_CONTEXT] Sign in failed:",l),l}finally{s(!1)}},o=async()=>{s(!0);try{await hb(),n(null)}catch(l){throw console.error("Sign out failed:",l),l}finally{s(!1)}};return u.jsx(gE.Provider,{value:{user:e,loading:r,signIn:i,signOut:o},children:t})},uu=()=>{const t=b.useContext(gE);if(!t)throw new Error("useAuthContext must be used within AuthProvider");return t};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ko.apply(this,arguments)}var hr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(hr||(hr={}));const pv="popstate";function mb(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Uh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:yE(s)}return yb(e,n,null,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gb(){return Math.random().toString(36).substr(2,8)}function mv(t,e){return{usr:t.state,key:t.key,idx:e}}function Uh(t,e,n,r){return n===void 0&&(n=null),Ko({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ci(e):e,{state:n,key:e&&e.key||r||gb()})}function yE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ci(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yb(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=hr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(Ko({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=hr.Pop;let A=f(),E=A==null?null:A-d;d=A,c&&c({action:l,location:P.location,delta:E})}function g(A,E){l=hr.Push;let _=Uh(P.location,A,E);d=f()+1;let S=mv(_,d),D=P.createHref(_);try{o.pushState(S,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(D)}i&&c&&c({action:l,location:P.location,delta:1})}function x(A,E){l=hr.Replace;let _=Uh(P.location,A,E);d=f();let S=mv(_,d),D=P.createHref(_);o.replaceState(S,"",D),i&&c&&c({action:l,location:P.location,delta:0})}function w(A){let E=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof A=="string"?A:yE(A);return _=_.replace(/ $/,"%20"),Be(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let P={get action(){return l},get location(){return t(s,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(pv,p),c=A,()=>{s.removeEventListener(pv,p),c=null}},createHref(A){return e(s,A)},createURL:w,encodeLocation(A){let E=w(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:x,go(A){return o.go(A)}};return P}var gv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(gv||(gv={}));function vb(t,e,n){return n===void 0&&(n="/"),_b(t,e,n)}function _b(t,e,n,r){let s=typeof e=="string"?Ci(e):e,i=wE(s.pathname||"/",n);if(i==null)return null;let o=vE(t);wb(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=bb(i);l=Pb(o[c],d)}return l}function vE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Be(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=ns([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(Be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),vE(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Ab(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of _E(i.path))s(i,o,c)}),e}function _E(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_E(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function wb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Rb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const xb=/^:[\w-]+$/,Eb=3,Ib=2,Tb=1,Sb=10,Nb=-2,yv=t=>t==="*";function Ab(t,e){let n=t.split("/"),r=n.length;return n.some(yv)&&(r+=Nb),e&&(r+=Ib),n.filter(s=>!yv(s)).reduce((s,i)=>s+(xb.test(i)?Eb:i===""?Tb:Sb),r)}function Rb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Pb(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Cb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:ns([i,p.pathname]),pathnameBase:Vb(ns([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=ns([i,p.pathnameBase]))}return o}function Cb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:x}=f;if(g==="*"){let P=l[p]||"";o=i.slice(0,i.length-P.length).replace(/(.)\/+$/,"$1")}const w=l[p];return x&&!w?d[g]=void 0:d[g]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function kb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Lp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function bb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Db=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jb=t=>Db.test(t);function Ob(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ci(t):t,i;if(n)if(jb(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Lp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=vv(n.substring(1),"/"):i=vv(n,e)}else i=e;return{pathname:i,search:Mb(r),hash:Ub(s)}}function vv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ed(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Lb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xE(t,e){let n=Lb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function EE(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ci(t):(s=Ko({},t),Be(!s.pathname||!s.pathname.includes("?"),Ed("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),Ed("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),Ed("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=Ob(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const ns=t=>t.join("/").replace(/\/\/+/g,"/"),Vb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Mb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ub=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Fb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const IE=["post","put","patch","delete"];new Set(IE);const Bb=["get",...IE];new Set(Bb);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qo(){return Qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qo.apply(this,arguments)}const Vp=b.createContext(null),zb=b.createContext(null),_a=b.createContext(null),du=b.createContext(null),Mr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),TE=b.createContext(null);function wa(){return b.useContext(du)!=null}function xa(){return wa()||Be(!1),b.useContext(du).location}function SE(t){b.useContext(_a).static||b.useLayoutEffect(t)}function De(){let{isDataRoute:t}=b.useContext(Mr);return t?nD():$b()}function $b(){wa()||Be(!1);let t=b.useContext(Vp),{basename:e,future:n,navigator:r}=b.useContext(_a),{matches:s}=b.useContext(Mr),{pathname:i}=xa(),o=JSON.stringify(xE(s,n.v7_relativeSplatPath)),l=b.useRef(!1);return SE(()=>{l.current=!0}),b.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=EE(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ns([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function Hb(){let{matches:t}=b.useContext(Mr),e=t[t.length-1];return e?e.params:{}}function qb(t,e){return Wb(t,e)}function Wb(t,e,n,r){wa()||Be(!1);let{navigator:s}=b.useContext(_a),{matches:i}=b.useContext(Mr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=xa(),f;if(e){var p;let A=typeof e=="string"?Ci(e):e;c==="/"||(p=A.pathname)!=null&&p.startsWith(c)||Be(!1),f=A}else f=d;let g=f.pathname||"/",x=g;if(c!=="/"){let A=c.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(A.length).join("/")}let w=vb(t,{pathname:x}),P=Xb(w&&w.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:ns([c,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:ns([c,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&P?b.createElement(du.Provider,{value:{location:Qo({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:hr.Pop}},P):P}function Gb(){let t=tD(),e=Fb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const Kb=b.createElement(Gb,null);class Qb extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Mr.Provider,{value:this.props.routeContext},b.createElement(TE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Yb(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(Vp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Mr.Provider,{value:e},r)}function Xb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||Be(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:x}=n,w=p.route.loader&&g[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||w){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let x,w=!1,P=null,A=null;n&&(x=l&&p.route.id?l[p.route.id]:void 0,P=p.route.errorElement||Kb,c&&(d<0&&g===0?(rD("route-fallback"),w=!0,A=null):d===g&&(w=!0,A=p.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),_=()=>{let S;return x?S=P:w?S=A:p.route.Component?S=b.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=f,b.createElement(Yb,{match:p,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:S})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?b.createElement(Qb,{location:n.location,revalidation:n.revalidation,component:P,error:x,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var NE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(NE||{}),AE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(AE||{});function Jb(t){let e=b.useContext(Vp);return e||Be(!1),e}function Zb(t){let e=b.useContext(zb);return e||Be(!1),e}function eD(t){let e=b.useContext(Mr);return e||Be(!1),e}function RE(t){let e=eD(),n=e.matches[e.matches.length-1];return n.route.id||Be(!1),n.route.id}function tD(){var t;let e=b.useContext(TE),n=Zb(),r=RE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nD(){let{router:t}=Jb(NE.UseNavigateStable),e=RE(AE.UseNavigateStable),n=b.useRef(!1);return SE(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Qo({fromRouteId:e},i)))},[t,e])}const _v={};function rD(t,e,n){_v[t]||(_v[t]=!0)}function sD(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Nc(t){let{to:e,replace:n,state:r,relative:s}=t;wa()||Be(!1);let{future:i,static:o}=b.useContext(_a),{matches:l}=b.useContext(Mr),{pathname:c}=xa(),d=De(),f=EE(e,xE(l,i.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(f);return b.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function Se(t){Be(!1)}function iD(t){let{basename:e="/",children:n=null,location:r,navigationType:s=hr.Pop,navigator:i,static:o=!1,future:l}=t;wa()&&Be(!1);let c=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:c,navigator:i,static:o,future:Qo({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Ci(r));let{pathname:f="/",search:p="",hash:g="",state:x=null,key:w="default"}=r,P=b.useMemo(()=>{let A=wE(f,c);return A==null?null:{location:{pathname:A,search:p,hash:g,state:x,key:w},navigationType:s}},[c,f,p,g,x,w,s]);return P==null?null:b.createElement(_a.Provider,{value:d},b.createElement(du.Provider,{children:n,value:P}))}function oD(t){let{children:e,location:n}=t;return qb(Fh(e),n)}new Promise(()=>{});function Fh(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,Fh(r.props.children,i));return}r.type!==Se&&Be(!1),!r.props.index||!r.props.children||Be(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function aD(t,e){let n=Bh(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const lD="6";try{window.__reactRouterVersion=lD}catch{}const cD="startTransition",wv=VI[cD];function uD(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=mb({window:s,v5Compat:!0}));let o=i.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=b.useCallback(p=>{d&&wv?wv(()=>c(p)):c(p)},[c,d]);return b.useLayoutEffect(()=>o.listen(f),[o,f]),b.useEffect(()=>sD(r),[r]),b.createElement(iD,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var xv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xv||(xv={}));var Ev;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ev||(Ev={}));function PE(t){let e=b.useRef(Bh(t)),n=b.useRef(!1),r=xa(),s=b.useMemo(()=>aD(r.search,n.current?null:e.current),[r.search]),i=De(),o=b.useCallback((l,c)=>{const d=Bh(typeof l=="function"?l(s):l);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}function Nt(){return uu()}const Ve=({size:t=24,message:e})=>u.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[u.jsxs("svg",{className:"animate-spin text-blue-600",width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),e&&u.jsx("span",{className:"mt-2 text-gray-700",children:e})]}),Ea="/assets/logo-DrZqXrNr.png",dD=()=>{const{signIn:t,user:e,loading:n}=Nt(),[r,s]=b.useState(null),i=De();b.useEffect(()=>{!n&&dn.currentUser&&(e?e.role===_e.ADMIN?i("/admin/dashboard",{replace:!0}):e.role===_e.DOCTOR?i("/doctor/dashboard",{replace:!0}):e.role===_e.PATIENT&&i("/patient/dashboard",{replace:!0}):dn.currentUser&&i("/register/patient/flow",{replace:!0}))},[e,n,i]);const o=async()=>{s(null);try{await t()}catch(l){console.error("[LOGIN] Sign-in error:",l),s(l.message||"Login failed. Try again.")}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f5f7f8] p-4",children:u.jsxs("div",{className:"flex w-full max-w-md flex-col items-center text-center",children:[u.jsxs("div",{className:"flex flex-col items-center gap-4 pb-12 pt-5",children:[u.jsx("img",{src:Ea,alt:"CareSync Logo",className:"h-16 w-16 object-contain"}),u.jsx("h2",{className:"text-[#111418] text-[28px] font-bold leading-tight",children:"CareSync"})]}),u.jsx("h1",{className:"text-[#111418] text-[32px] font-bold leading-tight pb-2",children:"Welcome Back"}),u.jsx("p",{className:"text-gray-600 text-base font-normal leading-normal pb-8",children:"Sign in to continue"}),u.jsxs("div",{className:"flex w-full flex-col items-stretch justify-start rounded-xl shadow-[0_4px_12px_rgba(0,0,0,0.05)] bg-white p-6",children:[n?u.jsx("div",{className:"flex justify-center py-3",children:u.jsx(Ve,{size:48,message:"Signing in..."})}):u.jsx("div",{className:"flex py-3",children:u.jsxs("button",{onClick:o,disabled:n,className:"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 flex-1 bg-[#3c83f6] text-white gap-3 text-base font-bold leading-normal tracking-[0.015em] transition-colors hover:bg-[#3c83f6]/90 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsxs("svg",{className:"h-6 w-6",fill:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),u.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),u.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),u.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"}),u.jsx("path",{d:"M1 1h22v22H1z",fill:"none"})]}),u.jsx("span",{className:"truncate",children:"Sign in with Google"})]})}),r&&u.jsx("p",{className:"text-red-500 text-center text-sm mt-2",children:r})]}),u.jsxs("p",{className:"text-gray-500 text-xs font-normal leading-normal pt-12 px-4 text-center",children:["By continuing, you agree to our"," ",u.jsx("a",{className:"font-medium text-[#3c83f6] hover:underline",href:"#",children:"Terms of Service"})," ","&"," ",u.jsx("a",{className:"font-medium text-[#3c83f6] hover:underline",href:"#",children:"Privacy Policy"}),"."]})]})})},hD=()=>{const t=De(),e=()=>{t("/register/patient/flow")};return u.jsxs("div",{className:"relative flex h-screen w-full flex-col bg-[#f5f7f8] overflow-hidden",children:[u.jsx("div",{className:"h-10"}),u.jsxs("main",{className:"flex flex-1 flex-col px-6",children:[u.jsx("div",{className:"flex-grow",children:u.jsxs("div",{className:"flex flex-col items-center justify-center pt-16 pb-8 text-center",children:[u.jsx("div",{className:"mb-6 flex flex-col items-center gap-3",children:u.jsx("img",{src:Ea,alt:"CareSync Logo",className:"h-20 w-20 object-contain"})}),u.jsx("h1",{className:"text-[#111827] tracking-tight text-[32px] font-bold leading-tight pb-3",children:"Join CareSync"}),u.jsx("p",{className:"text-[#4B5563] text-base font-normal leading-normal max-w-sm",children:"Create your secure patient profile to book appointments, view your medical records, and manage your health all in one place."})]})}),u.jsx("div",{className:"flex-shrink-0 pb-8",children:u.jsx("div",{className:"flex px-0 py-3",children:u.jsx("button",{onClick:e,className:"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 flex-1 bg-[#3c83f6] text-white text-base font-bold leading-normal tracking-[0.015em] hover:bg-[#3c83f6]/90 focus:outline-none focus:ring-2 focus:ring-[#3c83f6] focus:ring-offset-2 transition-colors",children:u.jsx("span",{className:"truncate",children:"Get Started"})})})})]})]})},fD=({currentStep:t,totalSteps:e})=>u.jsx("div",{className:"flex w-full flex-row items-center justify-center gap-2 py-5 px-4 bg-white",children:Array.from({length:e},(n,r)=>{const s=r+1,i=s<=t,o=s<t;return u.jsxs(Xo.Fragment,{children:[u.jsx("div",{className:"flex flex-col items-center gap-2",children:u.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full text-sm font-bold ${i?"bg-[#3c83f6] text-white":"border-2 border-gray-300 bg-transparent text-gray-400"}`,children:s})}),s<e&&u.jsx("div",{className:`h-1 flex-1 ${o||i?"bg-[#3c83f6]":"bg-gray-300"}`})]},s)})}),pD=({title:t,onBack:e,showBack:n=!0})=>u.jsxs("div",{className:"flex items-center bg-white p-4 pb-2 justify-between border-b border-gray-200",children:[u.jsx("div",{className:"text-[#111418] flex size-12 shrink-0 items-center justify-start",children:n&&e?u.jsx("button",{onClick:e,type:"button",className:"flex items-center justify-center",children:u.jsx("span",{className:"material-symbols-outlined text-2xl",children:"arrow_back_ios_new"})}):u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:Ea,alt:"CareSync Logo",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-lg font-bold text-[#111418]",children:"CareSync"})]})}),u.jsx("h2",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center",children:t}),u.jsx("div",{className:"flex size-12 shrink-0"})," "]}),$t=({label:t,value:e,onChange:n,type:r="text",placeholder:s,required:i=!1,error:o,icon:l})=>{const c=`form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-2 focus:ring-[#3c83f6]/50 border border-[#dbdfe6] bg-white focus:border-[#3c83f6] h-14 placeholder:text-[#60708a] p-[15px] text-base font-normal leading-normal ${l?"rounded-r-none border-r-0 pr-2":""} ${o?"border-red-500":""}`,d=(f,p)=>{if(p==="date"&&f){if(/^\d{4}-\d{2}-\d{2}$/.test(f))return f;const g=new Date(f);if(!isNaN(g.getTime()))return g.toISOString().split("T")[0]}return f};return u.jsxs("label",{className:"flex flex-col min-w-40 flex-1",children:[u.jsxs("p",{className:"text-[#111418] text-base font-medium leading-normal pb-2",children:[t," ",i&&u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"flex w-full flex-1 items-stretch rounded-lg",children:[u.jsx("input",{type:r,value:r==="date"?d(e,r):e,onChange:f=>n(f.target.value),placeholder:s,className:c}),l&&u.jsx("div",{className:"text-[#60708a] flex border border-[#dbdfe6] bg-white items-center justify-center px-[15px] rounded-r-lg border-l-0",children:l})]}),o&&u.jsx("span",{className:"text-red-500 text-sm mt-1",children:o})]})},mD=({value:t,onChange:e,required:n=!1})=>{const r=Object.values(oE);return u.jsxs("div",{className:"flex flex-col min-w-40 flex-1",children:[u.jsxs("p",{className:"text-[#111418] text-base font-medium leading-normal pb-2",children:["Gender ",n&&u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("div",{className:"grid grid-cols-3 gap-2 rounded-lg bg-[#f5f7f8] p-1",children:r.map(s=>{const i=t===s;return u.jsx("button",{type:"button",onClick:()=>e(s),className:`flex items-center justify-center rounded-md py-3 text-base font-semibold transition-colors ${i?"text-[#111418] bg-white shadow-sm":"text-gray-500 hover:text-[#111418]"}`,children:s},s)})})]})},gD="modulepreload",yD=function(t){return"/"+t},Iv={},vD=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=yD(c),c in Iv)return;Iv[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":gD,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,x)=>{p.addEventListener("load",g),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};class _D{constructor(){$r(this,"docRef",mt(Kn,"admin","pending_approval"))}async getPendingApprovals(){var e;try{const n=await Tr(this.docRef);if(console.log("[PENDING_APPROVAL] Document exists:",n.exists()),!n.exists()){const i={doctors:[],patients:[]};return await Sr(this.docRef,i),i}const r=n.data();console.log("[PENDING_APPROVAL] Raw data from Firestore:",r),console.log("[PENDING_APPROVAL] Patients array:",r==null?void 0:r.patients),console.log("[PENDING_APPROVAL] Patients array type:",Array.isArray(r==null?void 0:r.patients)),console.log("[PENDING_APPROVAL] Patients length:",(e=r==null?void 0:r.patients)==null?void 0:e.length);const s={doctors:Array.isArray(r==null?void 0:r.doctors)?r.doctors:[],patients:Array.isArray(r==null?void 0:r.patients)?r.patients:[]};return console.log("[PENDING_APPROVAL] Returning:",s),s}catch(n){throw console.error("[PENDING_APPROVAL] Error getting pending approvals:",n),n}}async addPendingPatient(e){(await Tr(this.docRef)).exists()||await Sr(this.docRef,{doctors:[],patients:[]}),await dr(this.docRef,{patients:ov(e)})}async addPendingDoctor(e){(await Tr(this.docRef)).exists()||await Sr(this.docRef,{doctors:[],patients:[]}),await dr(this.docRef,{doctors:ov(e)})}async removePendingPatient(e){const r=(await this.getPendingApprovals()).patients.find(s=>s.userID===e);r&&await dr(this.docRef,{patients:av(r)})}async removePendingDoctor(e){const r=(await this.getPendingApprovals()).doctors.find(s=>s.userID===e);r&&await dr(this.docRef,{doctors:av(r)})}}const hu=new _D,Ol=async()=>await hu.getPendingApprovals(),wD=async t=>await hu.addPendingPatient(t),Tv=async t=>await hu.removePendingPatient(t),Sv=async t=>await hu.removePendingDoctor(t),xD=async(t,e,n)=>{var i;const r=await cb("PAT",t),s={userID:r,AuthID:t,email:(n==null?void 0:n.email)||((i=e.contactInfo)==null?void 0:i.email)||"",role:"patient",displayName:(n==null?void 0:n.displayName)||`${e.personalInfo.firstName} ${e.personalInfo.lastName}`,photoURL:(n==null?void 0:n.photoURL)||void 0,status:Pi.PENDING,isApproved:!1,...e,createdAt:new Date,updatedAt:new Date};return await Op(r,s),await wD({userID:r,name:s.displayName,phone:e.contactInfo.primaryPhone||"",photoURL:s.photoURL,status:"pending",registeredAt:s.createdAt||new Date}),s},ED=async t=>{const e=await br(t);return!e||e.role!==_e.PATIENT?null:e},CE=async t=>{const e=await hE(t);return!e||e.role!==_e.PATIENT?null:e},ID=async(t,e)=>{await Vr(t,{...e,updatedAt:new Date})},TD=async t=>{const e=await kE();return t?e.filter(n=>n.assignedDoctorId===t).map(n=>n):e},kE=async()=>{const{getAllPatients:t}=await vD(async()=>{const{getAllPatients:n}=await Promise.resolve().then(()=>lb);return{getAllPatients:n}},void 0);return(await t()).filter(n=>n.role===_e.PATIENT)},SD=async(t,e)=>{await Vr(t,{assignedDoctorId:e,updatedAt:new Date})},ND=async t=>await CE(t)!==null,ps={createPatient:xD,getPatient:ED,getPatientByAuthUID:CE,updatePatient:ID,getPatientsByDoctor:TD,getAllPatients:kE,assignDoctor:SD,patientExists:ND},AD=()=>{const{user:t}=uu(),e=De(),[n,r]=b.useState(0),[s,i]=b.useState(!1),[o,l]=b.useState(!0),[c,d]=b.useState(null),[f,p]=b.useState(!1),[g,x]=b.useState(!1);b.useEffect(()=>{if(f){const z=setTimeout(()=>{e("/login",{replace:!0})},1500);return()=>clearTimeout(z)}},[f,e]),b.useEffect(()=>{(async()=>{if(!dn.currentUser){l(!1);return}if(t)try{const U=t.userID!==void 0&&t.userID.startsWith("PAT");x(U)}catch(U){console.error("Error checking patient existence:",U)}else x(!1);l(!1)})()},[t]);const[w,P]=b.useState({firstName:"",lastName:"",dateOfBirth:"",gender:"",primaryPhone:"",bloodType:"",maritalStatus:"",occupation:""}),[A,E]=b.useState({secondaryPhone:"",email:(t==null?void 0:t.email)||"",address:{street:"",city:"",country:""}}),[_,S]=b.useState({name:"",relationship:"",phone:"",email:""}),[D,V]=b.useState({pastMedicalHistory:"",pastSurgicalHistory:"",allergies:"",familyHistory:"",currentMedications:"",otherRelevantHistory:""});if(b.useEffect(()=>{!dn.currentUser&&!o&&e("/login",{replace:!0})},[o,e]),!dn.currentUser)return o?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading..."})}):null;if(o)return u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading..."})});if(g)return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f5f7f8] p-4",children:u.jsxs("div",{className:"w-full max-w-lg rounded-xl bg-white shadow-[0_4px_12px_rgba(0,0,0,0.05)] p-6 text-center",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4 text-[#111418]",children:"Registration Complete"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Your registration has been submitted successfully."}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending admin approval. Please wait for approval before accessing the system."}),u.jsx("button",{onClick:()=>e("/login"),className:"flex h-14 w-full items-center justify-center rounded-xl bg-[#3c83f6] px-6 text-base font-bold text-white shadow-sm hover:bg-[#3c83f6]/90 focus:outline-none focus:ring-2 focus:ring-[#3c83f6] focus:ring-offset-2",children:"Back to Login"})]})});const M=(z,U)=>{P(H=>({...H,[z]:U}))},I=(z,U)=>{if(z.includes(".")){const[H,Q]=z.split(".");E(pe=>{const fe=pe[H];return typeof fe=="object"&&fe!==null?{...pe,[H]:{...fe,[Q]:U}}:pe})}else E(H=>({...H,[z]:U}))},v=(z,U)=>{S(H=>({...H,[z]:U}))},T=(z,U)=>{V(H=>({...H,[z]:U}))},R=()=>w.firstName.trim()?w.lastName.trim()?w.dateOfBirth?w.gender?w.primaryPhone.trim()?(d(null),!0):(d("Primary phone is required"),!1):(d("Gender is required"),!1):(d("Date of birth is required"),!1):(d("Last name is required"),!1):(d("First name is required"),!1),k=()=>{n===0&&!R()||(r(z=>z+1),d(null))},C=()=>{r(z=>z-1),d(null)},N=z=>{if(z==null)return z;if(Array.isArray(z))return z.map(N);if(typeof z=="object"){const U={};for(const H in z)z[H]!==void 0&&(U[H]=N(z[H]));return U}return z},X=async()=>{if(!(s||f)){i(!0),d(null);try{const z={personalInfo:{firstName:w.firstName.trim(),lastName:w.lastName.trim(),dateOfBirth:(()=>{if(!w.dateOfBirth)throw new Error("Date of birth is required");const Q=new Date(w.dateOfBirth);if(isNaN(Q.getTime()))throw new Error("Invalid date of birth");return Q})(),gender:w.gender,...w.bloodType&&{bloodType:w.bloodType},...w.maritalStatus&&{maritalStatus:w.maritalStatus},...w.occupation.trim()&&{occupation:w.occupation.trim()}},contactInfo:{primaryPhone:w.primaryPhone.trim(),...A.secondaryPhone.trim()&&{secondaryPhone:A.secondaryPhone.trim()},...A.email.trim()&&{email:A.email.trim()},...A.address.street.trim()&&{address:[A.address.street.trim(),A.address.city.trim(),A.address.country.trim()].filter(Boolean).join(", ")}},..._.name.trim()||_.phone.trim()?{emergencyContact:{name:_.name.trim(),relationship:_.relationship.trim(),phone:_.phone.trim()}}:{},medicalInfo:{allergies:D.allergies.trim()?D.allergies.split(",").map(Q=>Q.trim()).filter(Boolean).map(Q=>({name:Q,severity:aE.MILD})):[],currentMedications:D.currentMedications.trim()?D.currentMedications.split(",").map(Q=>Q.trim()).filter(Boolean):[],medicalHistory:D.pastMedicalHistory.trim()?D.pastMedicalHistory.split(",").map(Q=>Q.trim()).filter(Boolean):[],surgicalHistory:D.pastSurgicalHistory.trim()?D.pastSurgicalHistory.split(",").map(Q=>Q.trim()).filter(Boolean):[],familyHistory:D.familyHistory.trim()?D.familyHistory.split(",").map(Q=>Q.trim()).filter(Boolean):[],socialHistory:{}}},U=N(z),H=dn.currentUser;if(!H){d("You must be signed in to register. Please sign in again."),i(!1);return}await ps.createPatient(H.uid,U,{email:H.email,displayName:H.displayName,photoURL:H.photoURL}),p(!0)}catch(z){console.error("Registration error:",z),d(z.message||"Failed to submit registration. Please try again."),i(!1)}}},oe=["Step 1: Personal Information","Step 2: Contact Information","Step 3: Medical Information"],ve=()=>n===0?u.jsxs("div",{className:"flex flex-1 flex-col px-4 pt-5 pb-8",children:[u.jsxs("div",{className:"flex w-full flex-1 flex-col rounded-xl bg-white shadow-[0_4px_12px_rgba(0,0,0,0.05)] p-6",children:[u.jsx("h2",{className:"text-[#111418] text-[28px] font-bold leading-tight text-left pb-5",children:"Let's start with the basics"}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx($t,{label:"First Name",value:w.firstName,onChange:z=>M("firstName",z),placeholder:"Enter your first name",required:!0}),u.jsx($t,{label:"Last Name",value:w.lastName,onChange:z=>M("lastName",z),placeholder:"Enter your last name",required:!0}),u.jsx($t,{label:"Date of Birth",type:"date",value:w.dateOfBirth,onChange:z=>M("dateOfBirth",z),placeholder:"MM/DD/YYYY",required:!0,icon:u.jsx("span",{className:"material-symbols-outlined text-2xl",children:"calendar_today"})}),u.jsx(mD,{value:w.gender,onChange:z=>M("gender",z),required:!0}),u.jsx($t,{label:"Phone Number",type:"tel",value:w.primaryPhone,onChange:z=>M("primaryPhone",z),placeholder:"(555) 123-4567",required:!0})]})]}),u.jsx("div",{className:"flex-grow"}),u.jsx("div",{className:"pt-8",children:u.jsx("button",{onClick:k,disabled:s||f,className:"flex h-14 w-full items-center justify-center rounded-xl bg-[#3c83f6] px-6 text-base font-bold text-white shadow-sm hover:bg-[#3c83f6]/90 focus:outline-none focus:ring-2 focus:ring-[#3c83f6] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})})]}):n===1?u.jsxs("div",{className:"flex flex-1 flex-col px-4 pt-5 pb-8",children:[u.jsxs("div",{className:"flex w-full flex-1 flex-col rounded-xl bg-white shadow-[0_4px_12px_rgba(0,0,0,0.05)] p-6",children:[u.jsx("h2",{className:"text-[#111418] text-[28px] font-bold leading-tight text-left pb-5",children:"Contact details"}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx($t,{label:"Secondary Phone (Optional)",type:"tel",value:A.secondaryPhone,onChange:z=>I("secondaryPhone",z),placeholder:"(555) 123-4567"}),u.jsx($t,{label:"Email (Optional)",type:"email",value:A.email,onChange:z=>I("email",z),placeholder:"your.email@example.com"}),u.jsxs("div",{className:"pt-2",children:[u.jsx("h3",{className:"text-[#111418] text-lg font-semibold mb-4",children:"Address (Optional)"}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx($t,{label:"Street Address",value:A.address.street,onChange:z=>I("address.street",z),placeholder:"123 Main Street"}),u.jsx($t,{label:"City",value:A.address.city,onChange:z=>I("address.city",z),placeholder:"City"}),u.jsx($t,{label:"Country",value:A.address.country,onChange:z=>I("address.country",z),placeholder:"Country"})]})]}),u.jsxs("div",{className:"pt-2",children:[u.jsx("h3",{className:"text-[#111418] text-lg font-semibold mb-4",children:"Emergency Contact (Optional)"}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx($t,{label:"Name",value:_.name,onChange:z=>v("name",z),placeholder:"Emergency contact name"}),u.jsx($t,{label:"Relationship",value:_.relationship,onChange:z=>v("relationship",z),placeholder:"e.g., Spouse, Parent, Friend"}),u.jsx($t,{label:"Phone",type:"tel",value:_.phone,onChange:z=>v("phone",z),placeholder:"(555) 123-4567"})]})]})]})]}),u.jsx("div",{className:"flex-grow"}),u.jsxs("div",{className:"pt-8 flex gap-3",children:[u.jsx("button",{onClick:C,disabled:s||f,className:"flex h-14 flex-1 items-center justify-center rounded-xl border-2 border-[#dbdfe6] bg-white px-6 text-base font-bold text-[#111418] hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#3c83f6] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),u.jsx("button",{onClick:k,disabled:s||f,className:"flex h-14 flex-1 items-center justify-center rounded-xl bg-[#3c83f6] px-6 text-base font-bold text-white shadow-sm hover:bg-[#3c83f6]/90 focus:outline-none focus:ring-2 focus:ring-[#3c83f6] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}):u.jsxs("div",{className:"flex flex-1 flex-col px-4 pt-5 pb-8",children:[u.jsxs("div",{className:"flex w-full flex-1 flex-col rounded-xl bg-white shadow-[0_4px_12px_rgba(0,0,0,0.05)] p-6",children:[u.jsx("h2",{className:"text-[#111418] text-[28px] font-bold leading-tight text-left pb-2",children:"Medical history"}),u.jsx("p",{className:"text-gray-600 text-sm mb-5",children:"All fields below are optional. Please provide any relevant medical information."}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("div",{children:u.jsxs("label",{className:"flex flex-col",children:[u.jsxs("p",{className:"text-[#111418] text-base font-medium leading-normal pb-2",children:["Past Medical History",u.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"List any past or current medical conditions (e.g., Diabetes, Hypertension, Asthma). Separate multiple conditions with commas."})]}),u.jsx("textarea",{value:D.pastMedicalHistory,onChange:z=>T("pastMedicalHistory",z.target.value),className:"w-full rounded-lg border border-[#dbdfe6] bg-white focus:outline-0 focus:ring-2 focus:ring-[#3c83f6]/50 focus:border-[#3c83f6] p-[15px] text-base font-normal leading-normal min-h-[100px] placeholder:text-[#60708a]",placeholder:"e.g., Diabetes Type 2, Hypertension"})]})}),u.jsx("div",{children:u.jsxs("label",{className:"flex flex-col",children:[u.jsxs("p",{className:"text-[#111418] text-base font-medium leading-normal pb-2",children:["Past Surgical History",u.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"List any past surgeries or procedures. Include the date if known. Separate multiple entries with commas."})]}),u.jsx("textarea",{value:D.pastSurgicalHistory,onChange:z=>T("pastSurgicalHistory",z.target.value),className:"w-full rounded-lg border border-[#dbdfe6] bg-white focus:outline-0 focus:ring-2 focus:ring-[#3c83f6]/50 focus:border-[#3c83f6] p-[15px] text-base font-normal leading-normal min-h-[100px] placeholder:text-[#60708a]",placeholder:"e.g., Appendectomy (2010), Knee Surgery (2015)"})]})}),u.jsx("div",{children:u.jsxs("label",{className:"flex flex-col",children:[u.jsxs("p",{className:"text-[#111418] text-base font-medium leading-normal pb-2",children:["Allergies",u.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"List any known allergies (medications, food, environmental, etc.). Include severity if known. Separate multiple allergies with commas."})]}),u.jsx("textarea",{value:D.allergies,onChange:z=>T("allergies",z.target.value),className:"w-full rounded-lg border border-[#dbdfe6] bg-white focus:outline-0 focus:ring-2 focus:ring-[#3c83f6]/50 focus:border-[#3c83f6] p-[15px] text-base font-normal leading-normal min-h-[100px] placeholder:text-[#60708a]",placeholder:"e.g., Penicillin (severe), Peanuts (moderate)"})]})}),u.jsx("div",{children:u.jsxs("label",{className:"flex flex-col",children:[u.jsxs("p",{className:"text-[#111418] text-base font-medium leading-normal pb-2",children:["Family History",u.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"List any medical conditions that run in your family. Include the relation if known. Separate multiple entries with commas."})]}),u.jsx("textarea",{value:D.familyHistory,onChange:z=>T("familyHistory",z.target.value),className:"w-full rounded-lg border border-[#dbdfe6] bg-white focus:outline-0 focus:ring-2 focus:ring-[#3c83f6]/50 focus:border-[#3c83f6] p-[15px] text-base font-normal leading-normal min-h-[100px] placeholder:text-[#60708a]",placeholder:"e.g., Heart disease (Father), Diabetes (Mother)"})]})}),u.jsx("div",{children:u.jsxs("label",{className:"flex flex-col",children:[u.jsxs("p",{className:"text-[#111418] text-base font-medium leading-normal pb-2",children:["Current Medications",u.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"List all medications you are currently taking, including dosage if known. Separate multiple medications with commas."})]}),u.jsx("textarea",{value:D.currentMedications,onChange:z=>T("currentMedications",z.target.value),className:"w-full rounded-lg border border-[#dbdfe6] bg-white focus:outline-0 focus:ring-2 focus:ring-[#3c83f6]/50 focus:border-[#3c83f6] p-[15px] text-base font-normal leading-normal min-h-[100px] placeholder:text-[#60708a]",placeholder:"e.g., Metformin 500mg twice daily, Lisinopril 10mg once daily"})]})}),u.jsx("div",{children:u.jsxs("label",{className:"flex flex-col",children:[u.jsxs("p",{className:"text-[#111418] text-base font-medium leading-normal pb-2",children:["Any Other Relevant History",u.jsx("span",{className:"text-xs text-gray-500 block font-normal mt-1",children:"Include any other relevant medical information, lifestyle factors, or health concerns that may be important for your care."})]}),u.jsx("textarea",{value:D.otherRelevantHistory,onChange:z=>T("otherRelevantHistory",z.target.value),className:"w-full rounded-lg border border-[#dbdfe6] bg-white focus:outline-0 focus:ring-2 focus:ring-[#3c83f6]/50 focus:border-[#3c83f6] p-[15px] text-base font-normal leading-normal min-h-[100px] placeholder:text-[#60708a]",placeholder:"e.g., Smoking history, exercise habits, dietary restrictions"})]})})]})]}),u.jsx("div",{className:"flex-grow"}),u.jsxs("div",{className:"pt-8 flex gap-3",children:[u.jsx("button",{onClick:C,disabled:s||f,className:"flex h-14 flex-1 items-center justify-center rounded-xl border-2 border-[#dbdfe6] bg-white px-6 text-base font-bold text-[#111418] hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#3c83f6] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),u.jsx("button",{onClick:X,disabled:s||f,className:"flex h-14 flex-1 items-center justify-center rounded-xl bg-[#3c83f6] px-6 text-base font-bold text-white shadow-sm hover:bg-[#3c83f6]/90 focus:outline-none focus:ring-2 focus:ring-[#3c83f6] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:s?u.jsxs("span",{className:"flex items-center",children:[u.jsx(Ve,{size:20}),u.jsx("span",{className:"ml-2",children:"Submitting..."})]}):"Submit"})]})]});return u.jsxs("div",{className:"relative flex min-h-screen w-full flex-col bg-[#f5f7f8] overflow-x-hidden",children:[u.jsx(pD,{title:oe[n],onBack:n>0?C:void 0,showBack:n>0}),u.jsx(fD,{currentStep:n+1,totalSteps:3}),c&&u.jsx("div",{className:"mx-4 mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:c}),f?u.jsx("div",{className:"flex flex-1 flex-col items-center justify-center px-4 py-8",children:u.jsxs("div",{className:"flex w-full max-w-md flex-col items-center rounded-xl bg-white shadow-[0_4px_12px_rgba(0,0,0,0.05)] p-8 text-center",children:[u.jsx("div",{className:"mb-4",children:u.jsx("div",{className:"inline-block p-4 bg-green-100 rounded-full",children:u.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),u.jsx("h2",{className:"text-xl font-semibold text-[#111418] mb-2",children:"Registration Submitted Successfully!"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Your account is pending admin approval. You will be redirected to the login page shortly."}),u.jsx(Ve,{size:32,message:"Redirecting..."})]})}):ve()]})},RD=async t=>{const e=await br(t);return!e||e.role!==_e.DOCTOR?null:e},PD=async(t,e)=>{await Vr(t,{...e,updatedAt:new Date})},CD=async()=>(await pE()).filter(e=>e.role===_e.DOCTOR),kD=async(t,e)=>{await Vr(t,{availability:e,updatedAt:new Date})},fu={getDoctor:RD,updateDoctor:PD,getDoctors:CD,updateAvailability:kD},K=({children:t,onClick:e,variant:n="primary",disabled:r=!1,type:s="button",className:i=""})=>{const o="px-4 py-2 rounded font-semibold focus:outline-none transition-colors",l={primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700"};return u.jsx("button",{type:s,onClick:e,disabled:r,className:`${o} ${l[n]} ${r?"opacity-50 cursor-not-allowed":""} ${i}`,children:t})},se=({label:t,type:e="text",value:n,onChange:r,error:s,placeholder:i,required:o=!1,options:l})=>u.jsxs("div",{className:"flex flex-col mb-4",children:[t&&u.jsxs("label",{className:"mb-1 font-medium",children:[t," ",o&&u.jsx("span",{className:"text-red-500",children:"*"})]}),e==="select"&&l?u.jsxs("select",{value:n,onChange:c=>r(c.target.value),className:`border rounded px-3 py-2 focus:outline-none focus:ring ${s?"border-red-500":"border-gray-300"}`,children:[u.jsx("option",{value:"",children:"Select..."}),l.map(c=>u.jsx("option",{value:c,children:c},c))]}):u.jsx("input",{type:e,value:n,placeholder:i,onChange:c=>r(c.target.value),className:`border rounded px-3 py-2 focus:outline-none focus:ring ${s?"border-red-500":"border-gray-300"}`}),s&&u.jsx("span",{className:"text-red-500 text-sm mt-1",children:s})]}),bD=({userId:t,onSuccess:e})=>{var f,p,g,x,w,P,A,E,_,S,D,V,M,I,v,T,R,k;const[n,r]=b.useState(!1),[s,i]=b.useState(null),[o,l]=b.useState({professionalInfo:{},contactInfo:{},practiceInfo:{},availability:{workingDays:[],workingHours:{start:"",end:""},timeSlots:[],timeZone:""}}),c=(C,N,X)=>{l(oe=>({...oe,[C]:{...oe[C]||{},[N]:X}}))},d=async()=>{r(!0),i(null);try{await fu.createDoctor(t,o),e==null||e()}catch(C){i(C.message||"Failed to register doctor")}finally{r(!1)}};return u.jsxs("form",{className:"space-y-4",children:[u.jsx("h2",{children:"Professional Info"}),u.jsx(se,{label:"First Name",value:((f=o.professionalInfo)==null?void 0:f.firstName)||"",onChange:C=>c("professionalInfo","firstName",C.target.value),required:!0}),u.jsx(se,{label:"Last Name",value:((p=o.professionalInfo)==null?void 0:p.lastName)||"",onChange:C=>c("professionalInfo","lastName",C.target.value),required:!0}),u.jsx(se,{label:"Title",value:((g=o.professionalInfo)==null?void 0:g.title)||"",onChange:C=>c("professionalInfo","title",C.target.value)}),u.jsx(se,{label:"Specialization",value:((x=o.professionalInfo)==null?void 0:x.specialization)||"",onChange:C=>c("professionalInfo","specialization",C.target.value)}),u.jsx(se,{label:"Qualifications (comma separated)",value:((P=(w=o.professionalInfo)==null?void 0:w.qualifications)==null?void 0:P.join(", "))||"",onChange:C=>c("professionalInfo","qualifications",C.target.value.split(",").map(N=>N.trim()))}),u.jsx(se,{label:"License Number",value:((A=o.professionalInfo)==null?void 0:A.licenseNumber)||"",onChange:C=>c("professionalInfo","licenseNumber",C.target.value)}),u.jsx(se,{label:"License Expiry",type:"date",value:((E=o.professionalInfo)==null?void 0:E.licenseExpiry)||"",onChange:C=>c("professionalInfo","licenseExpiry",C.target.value)}),u.jsx("h2",{children:"Practice Info"}),u.jsx(se,{label:"Clinic Name",value:((_=o.practiceInfo)==null?void 0:_.clinicName)||"",onChange:C=>c("practiceInfo","clinicName",C.target.value)}),u.jsx(se,{label:"Clinic Address",value:((S=o.practiceInfo)==null?void 0:S.clinicAddress)||"",onChange:C=>c("practiceInfo","clinicAddress",C.target.value)}),u.jsx(se,{label:"Consultation Fee",type:"number",value:((D=o.practiceInfo)==null?void 0:D.consultationFee)||"",onChange:C=>c("practiceInfo","consultationFee",C.target.value)}),u.jsx(se,{label:"Currency",value:((V=o.practiceInfo)==null?void 0:V.currency)||"USD",onChange:C=>c("practiceInfo","currency",C.target.value)}),u.jsx("h2",{children:"Availability"}),u.jsx(se,{label:"Working Days (select multiple comma separated)",value:((I=(M=o.availability)==null?void 0:M.workingDays)==null?void 0:I.join(", "))||"",onChange:C=>c("availability","workingDays",C.target.value.split(",").map(N=>N.trim()))}),u.jsx(se,{label:"Working Hours",value:((v=o.availability)==null?void 0:v.workingHours)||"",onChange:C=>c("availability","workingHours",C.target.value)}),u.jsx(se,{label:"Time Slots (comma separated)",value:((R=(T=o.availability)==null?void 0:T.timeSlots)==null?void 0:R.join(", "))||"",onChange:C=>c("availability","timeSlots",C.target.value.split(",").map(N=>N.trim()))}),u.jsx(se,{label:"Time Zone",value:((k=o.availability)==null?void 0:k.timeZone)||"",onChange:C=>c("availability","timeZone",C.target.value)}),s&&u.jsx("p",{className:"text-red-500",children:s}),u.jsx(K,{onClick:d,disabled:n,children:n?"Submitting...":"Submit"})]})},ee=({children:t,title:e,className:n=""})=>u.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow ${n}`,children:[e&&u.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:u.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:e})}),u.jsx("div",{className:e?"p-6":"",children:t})]}),DD=()=>{const{user:t}=uu(),[e,n]=b.useState(!1);return t?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs(ee,{className:"w-full max-w-lg p-6 shadow-lg",children:[u.jsxs("div",{className:"flex flex-col items-center gap-3 mb-6",children:[u.jsx("img",{src:Ea,alt:"CareSync Logo",className:"h-16 w-16 object-contain"}),u.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Doctor Registration"})]}),e&&u.jsx("div",{className:"text-green-600 text-center mb-4",children:"Registration successful! Your account is pending approval."}),!e&&u.jsx(bD,{userId:t.userId,onSuccess:()=>n(!0)}),e&&u.jsx("div",{className:"flex justify-center mt-4",children:u.jsx(K,{onClick:()=>n(!1),children:"Register Another Doctor"})})]})}):u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs(ee,{className:"w-full max-w-lg p-6 shadow-lg",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Doctor Registration"}),u.jsx("p",{className:"text-red-500 text-center",children:"Please sign in to register as a doctor."})]})})};class jD{constructor(){$r(this,"collectionRef",ma(Kn,va.APPOINTMENTS))}async create(e,n){const r=mt(this.collectionRef,e);await Sr(r,n)}async findById(e){const n=mt(this.collectionRef,e),r=await Tr(n);return r.exists()?r.data():null}async update(e,n){const r=mt(this.collectionRef,e);await dr(r,n)}async findByPatient(e){const n=Vt(this.collectionRef,ht("patientId","==",e));return(await Rt(n)).docs.map(s=>s.data())}async findByDoctor(e,n,r){let s=Vt(this.collectionRef,ht("doctorId","==",e));return n&&r&&(s=Vt(this.collectionRef,ht("doctorId","==",e),ht("dateTime",">=",Ae.fromDate(n)),ht("dateTime","<=",Ae.fromDate(r)))),(await Rt(s)).docs.map(o=>o.data())}async findByDateRange(e,n){const r=Vt(this.collectionRef,ht("dateTime",">=",Ae.fromDate(e)),ht("dateTime","<=",Ae.fromDate(n)));return(await Rt(r)).docs.map(i=>i.data())}}const Ia=new jD,OD=async(t,e)=>{await Ia.create(t,e)},LD=async t=>await Ia.findById(t),bE=async(t,e)=>{await Ia.update(t,e)},VD=async t=>await Ia.findByPatient(t),MD=async(t,e,n)=>await Ia.findByDoctor(t,e,n),UD=async t=>{const e=yi(gi.APPOINTMENT),n={...t,appointmentId:e,createdAt:new Date,updatedAt:new Date};return await OD(e,n),n},FD=async t=>await LD(t),BD=async(t,e)=>{await bE(t,{...e,updatedAt:new Date})},zD=async(t,e)=>{await bE(t,{status:He.CANCELLED,cancellationReason:e,cancelledAt:new Date,updatedAt:new Date})},$D=async t=>await VD(t),DE=async(t,e,n)=>await MD(t,e,n),HD=async(t,e,n)=>{const r=await DE(t),s=e.getTime(),i=s+n*60*1e3;for(const o of r){const l=o.dateTime.getTime(),c=o.duration??ob.APPOINTMENT_DURATION,d=l+c*60*1e3;if(s<d&&i>l)return!1}return!0},vi={createAppointment:UD,getAppointment:FD,updateAppointment:BD,cancelAppointment:zD,getAppointmentsByPatient:$D,getAppointmentsByDoctor:DE,checkAvailability:HD};class qD{constructor(){$r(this,"collectionRef",ma(Kn,va.TEST_RESULTS))}async create(e,n){const r=mt(this.collectionRef,e);await Sr(r,n)}async findById(e){const n=mt(this.collectionRef,e),r=await Tr(n);return r.exists()?r.data():null}async update(e,n){const r=mt(this.collectionRef,e);await dr(r,n)}async findByPatient(e){const n=Vt(this.collectionRef,ht("patientId","==",e));return(await Rt(n)).docs.map(s=>s.data())}async findByDoctor(e){const n=Vt(this.collectionRef,ht("doctorId","==",e));return(await Rt(n)).docs.map(s=>s.data())}}const pu=new qD,WD=async(t,e)=>{await pu.create(t,e)},GD=async t=>await pu.findById(t),KD=async(t,e)=>{await pu.update(t,e)},QD=async t=>await pu.findByPatient(t),YD=async(t,e,n)=>{const r=yi(gi.TEST_RESULT),s={testResultId:r,patientId:t,doctorId:"",fileInfo:{...e},testInfo:n,extractedData:{isExtracted:!1,extractionDate:void 0,extractionMethod:void 0,rawText:void 0,confirmed:!1,confirmedBy:void 0,confirmedAt:void 0},labValues:[],createdAt:new Date,updatedAt:new Date,uploadedBy:""};return await WD(r,s),s},XD=async t=>await GD(t),JD=async(t,e,n)=>{const r=await XD(t);if(!r)throw new Error("TestResult not found");await KD(t,{labValues:n,extractedData:{...r.extractedData,confirmed:!0,confirmedBy:e,confirmedAt:new Date},updatedAt:new Date})},_i=async t=>await QD(t),ZD=()=>{const{user:t}=Nt(),e=De(),[n,r]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState(!0);return b.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const f=(await vi.getAppointmentsByPatient(t.userId)).filter(g=>g.status===He.SCHEDULED||g.status===He.CONFIRMED).sort((g,x)=>g.dateTime.getTime()-x.dateTime.getTime()).slice(0,3);r(f);const p=await _i(t.userId);i(p.slice(0,3))}catch(d){console.error("Error loading dashboard data:",d)}finally{l(!1)}})()},[t]),o?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading dashboard..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Patient Dashboard"}),u.jsx(ee,{title:"Upcoming Appointments",children:n.length>0?u.jsxs("div",{className:"space-y-4",children:[n.map(c=>u.jsxs("div",{className:"border-b pb-4 last:border-0",children:[u.jsx("p",{className:"font-semibold",children:new Date(c.dateTime).toLocaleDateString()}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[new Date(c.dateTime).toLocaleTimeString()," - ",c.type]})]},c.appointmentId)),u.jsx(K,{onClick:()=>e("/patient/appointments"),className:"w-full",children:"View All Appointments"})]}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx("p",{className:"text-gray-500 mb-4",children:"No upcoming appointments"}),u.jsx(K,{onClick:()=>e("/patient/schedule-appointment"),children:"Schedule Appointment"})]})}),u.jsx(ee,{title:"Quick Actions",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx(K,{onClick:()=>e("/patient/schedule-appointment"),className:"h-20",children:"Schedule Appointment"}),u.jsx(K,{onClick:()=>e("/patient/test-results"),className:"h-20",children:"Upload Test Results"}),u.jsx(K,{onClick:()=>e("/patient/timeline"),className:"h-20",children:"View Timeline"}),u.jsx(K,{onClick:()=>e("/patient/profile"),className:"h-20",children:"View Profile"})]})}),u.jsx(ee,{title:"Recent Activity",children:u.jsxs("div",{className:"space-y-4",children:[s.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Recent Test Results"}),s.map(c=>{var d;return u.jsxs("div",{className:"border-b pb-2",children:[u.jsx("p",{className:"font-medium",children:((d=c.testInfo)==null?void 0:d.testName)||"Test Result"}),u.jsx("p",{className:"text-sm text-gray-500",children:new Date(c.fileInfo.uploadDate).toLocaleDateString()})]},c.testResultId)})]}),s.length===0&&u.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})]})})]})})};class To extends Error{constructor(e="Resource not found"){super(e),this.name="NotFoundError",Object.setPrototypeOf(this,To.prototype)}}function jE(t,e){const[n,r]=b.useState(null),[s,i]=b.useState(!0),[o,l]=b.useState(null);return b.useEffect(()=>{if(!t){l(new To("Patient ID is required")),i(!1);return}i(!0),ps.getPatient(t,e).then(d=>{if(!d)throw new To("Patient not found");r(d)}).catch(d=>l(d)).finally(()=>i(!1))},[t,e]),{patient:n,loading:s,error:o,updatePatient:async d=>{if(!t)throw new To("Patient ID is required");i(!0);try{await ps.updatePatient(t,d),r(f=>f?{...f,...d}:null)}catch(f){throw l(f),f}finally{i(!1)}}}}const ej=()=>{var f,p,g,x,w,P,A,E,_,S,D,V,M;const{user:t}=Nt(),e=De(),{patient:n,loading:r,updatePatient:s}=jE((t==null?void 0:t.userId)||"",t==null?void 0:t.userId),[i,o]=b.useState(!1),[l,c]=b.useState({});Xo.useEffect(()=>{var I,v,T,R;n&&c({firstName:((I=n.personalInfo)==null?void 0:I.firstName)||"",lastName:((v=n.personalInfo)==null?void 0:v.lastName)||"",email:((T=n.contactInfo)==null?void 0:T.email)||"",primaryPhone:((R=n.contactInfo)==null?void 0:R.primaryPhone)||""})},[n]);const d=async()=>{try{await s({personalInfo:{...n==null?void 0:n.personalInfo,firstName:l.firstName,lastName:l.lastName},contactInfo:{...n==null?void 0:n.contactInfo,email:l.email,primaryPhone:l.primaryPhone}}),o(!1)}catch(I){console.error("Error updating profile:",I)}};return r?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading profile..."})}):n?u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"My Profile"}),!i&&u.jsx(K,{onClick:()=>o(!0),children:"Edit Profile"})]}),u.jsx(ee,{title:"Personal Information",children:i?u.jsxs("div",{className:"space-y-4",children:[u.jsx(se,{label:"First Name",value:l.firstName,onChange:I=>c({...l,firstName:I.target.value})}),u.jsx(se,{label:"Last Name",value:l.lastName,onChange:I=>c({...l,lastName:I.target.value})}),u.jsx(se,{label:"Email",type:"email",value:l.email,onChange:I=>c({...l,email:I.target.value})}),u.jsx(se,{label:"Phone",value:l.primaryPhone,onChange:I=>c({...l,primaryPhone:I.target.value})}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx(K,{onClick:d,children:"Save Changes"}),u.jsx(K,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"})]})]}):u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Patient ID:"})," ",n.patientId]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Name:"})," ",(f=n.personalInfo)==null?void 0:f.firstName," ",(p=n.personalInfo)==null?void 0:p.lastName]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Date of Birth:"})," ",(g=n.personalInfo)!=null&&g.dateOfBirth?new Date(n.personalInfo.dateOfBirth).toLocaleDateString():"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Gender:"})," ",((x=n.personalInfo)==null?void 0:x.gender)||"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Blood Type:"})," ",((w=n.personalInfo)==null?void 0:w.bloodType)||"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Email:"})," ",((P=n.contactInfo)==null?void 0:P.email)||"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Phone:"})," ",((A=n.contactInfo)==null?void 0:A.primaryPhone)||"N/A"]})]})}),u.jsx(ee,{title:"Medical Information",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Allergies:"})," ",((_=(E=n.medicalInfo)==null?void 0:E.allergies)==null?void 0:_.length)||0," recorded"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Current Medications:"})," ",((D=(S=n.medicalInfo)==null?void 0:S.currentMedications)==null?void 0:D.length)||0]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Medical History:"})," ",((M=(V=n.medicalInfo)==null?void 0:V.medicalHistory)==null?void 0:M.length)||0," conditions"]})]})}),u.jsx(K,{onClick:()=>e("/patient/dashboard"),variant:"secondary",children:"Back to Dashboard"})]})}):u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs(ee,{children:[u.jsx("p",{className:"text-red-500",children:"Patient profile not found"}),u.jsx(K,{onClick:()=>e("/patient/dashboard"),className:"mt-4",children:"Back to Dashboard"})]})})},tj=()=>{const{user:t}=Nt(),e=De(),[n,r]=b.useState([]),[s,i]=b.useState(!0),[o,l]=b.useState("all");b.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const f=await vi.getAppointmentsByPatient(t.userId);r(f.sort((p,g)=>g.dateTime.getTime()-p.dateTime.getTime()))}catch(f){console.error("Error loading appointments:",f)}finally{i(!1)}})()},[t]);const c=o==="all"?n:n.filter(d=>d.status===o);return s?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading appointments..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"My Appointments"}),u.jsx(K,{onClick:()=>e("/patient/schedule-appointment"),children:"Schedule New Appointment"})]}),u.jsx(ee,{children:u.jsxs("div",{className:"flex gap-4",children:[u.jsx(K,{variant:o==="all"?"primary":"secondary",onClick:()=>l("all"),children:"All"}),u.jsx(K,{variant:o===He.SCHEDULED?"primary":"secondary",onClick:()=>l(He.SCHEDULED),children:"Scheduled"}),u.jsx(K,{variant:o===He.COMPLETED?"primary":"secondary",onClick:()=>l(He.COMPLETED),children:"Completed"}),u.jsx(K,{variant:o===He.CANCELLED?"primary":"secondary",onClick:()=>l(He.CANCELLED),children:"Cancelled"})]})}),u.jsx(ee,{title:`Appointments (${c.length})`,children:c.length>0?u.jsx("div",{className:"space-y-4",children:c.map(d=>u.jsx("div",{className:"border rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-lg",children:[new Date(d.dateTime).toLocaleDateString()," at"," ",new Date(d.dateTime).toLocaleTimeString()]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Type: ",d.type," | Status: ",d.status]}),d.reason&&u.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Reason: ",d.reason]})]}),u.jsx("span",{className:`px-3 py-1 rounded text-sm ${d.status===He.COMPLETED?"bg-green-100 text-green-800":d.status===He.CANCELLED?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:d.status})]})},d.appointmentId))}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx("p",{className:"text-gray-500 mb-4",children:"No appointments found"}),u.jsx(K,{onClick:()=>e("/patient/schedule-appointment"),children:"Schedule Your First Appointment"})]})}),u.jsx(K,{onClick:()=>e("/patient/dashboard"),variant:"secondary",children:"Back to Dashboard"})]})})},nj=({patientId:t,doctorId:e,onSuccess:n})=>{const[r,s]=b.useState({patientId:t,doctorId:e||"",duration:30,type:Dl.CONSULTATION,reason:""}),[i,o]=b.useState(""),[l,c]=b.useState(!1),[d,f]=b.useState(null),[p,g]=b.useState(null),x=(A,E)=>{s(_=>({..._,[A]:E}))},w=async()=>{if(!r.doctorId||!i)return;const A=await vi.checkAvailability(r.doctorId,new Date(i),r.duration||30);g(A)},P=async()=>{c(!0),f(null);try{await vi.createAppointment({...r,dateTime:new Date(i)}),n==null||n()}catch(A){f(A.message||"Failed to create appointment")}finally{c(!1)}};return b.useEffect(()=>{w()},[r.doctorId,i]),u.jsxs("form",{className:"space-y-4",children:[u.jsx(se,{label:"Date & Time",type:"datetime-local",value:i,onChange:A=>o(A)}),u.jsx(se,{label:"Duration (minutes)",type:"number",value:String(r.duration||30),onChange:A=>x("duration",Number(A))}),u.jsx(se,{label:"Type",type:"select",value:r.type||Dl.CONSULTATION,onChange:A=>x("type",A),options:Object.values(Dl)}),u.jsx(se,{label:"Reason",value:r.reason||"",onChange:A=>x("reason",A)}),p!==null&&u.jsx("p",{className:`text-sm ${p?"text-green-500":"text-red-500"}`,children:p?"Doctor is available":"Doctor is not available"}),d&&u.jsx("p",{className:"text-red-500",children:d}),u.jsx(K,{onClick:P,disabled:l||!p,children:l?"Booking...":"Book Appointment"})]})},rj=()=>{const{user:t}=Nt(),e=De(),[n,r]=b.useState([]),[s,i]=b.useState(""),[o,l]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const f=await fu.getDoctors();r(f.filter(p=>p.isActive)),f.length>0&&i(f[0].doctorId)}catch(f){console.error("Error loading doctors:",f)}finally{l(!1)}})()},[]);const c=()=>{e("/patient/appointments")};return o?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Schedule Appointment"}),u.jsx(K,{variant:"secondary",onClick:()=>e("/patient/appointments"),children:"Back"})]}),u.jsxs(ee,{children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Doctor"}),u.jsx("select",{value:s,onChange:d=>i(d.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:text-white",children:n.map(d=>{var f,p,g,x;return u.jsxs("option",{value:d.doctorId,children:[(f=d.professionalInfo)==null?void 0:f.title," ",(p=d.professionalInfo)==null?void 0:p.firstName," ",(g=d.professionalInfo)==null?void 0:g.lastName," - ",(x=d.professionalInfo)==null?void 0:x.specialization]},d.doctorId)})})]}),s&&u.jsx(nj,{patientId:(t==null?void 0:t.userId)||"",doctorId:s,onSuccess:c})]})]})})},sj=()=>{const{user:t}=Nt(),e=De(),[n,r]=b.useState([]),[s,i]=b.useState(!0),[o,l]=b.useState(!1),[c,d]=b.useState(null),[f,p]=b.useState("");b.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const P=await _i(t.userId);r(P.sort((A,E)=>E.fileInfo.uploadDate.getTime()-A.fileInfo.uploadDate.getTime()))}catch(P){console.error("Error loading test results:",P)}finally{i(!1)}})()},[t]);const g=w=>{w.target.files&&w.target.files[0]&&d(w.target.files[0])},x=async()=>{if(!(!c||!(t!=null&&t.userId))){l(!0);try{await YD(t.userId,c,{testName:f||c.name,testDate:new Date});const w=await _i(t.userId);r(w.sort((P,A)=>A.fileInfo.uploadDate.getTime()-P.fileInfo.uploadDate.getTime())),d(null),p(""),alert("Test result uploaded successfully!")}catch(w){console.error("Error uploading test result:",w),alert("Error uploading test result. Please try again.")}finally{l(!1)}}};return s?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading test results..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Test Results"}),u.jsx(K,{variant:"secondary",onClick:()=>e("/patient/dashboard"),children:"Back to Dashboard"})]}),u.jsx(ee,{title:"Upload Test Result",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(se,{label:"Test Name (optional)",value:f,onChange:w=>p(w.target.value),placeholder:"e.g., Complete Blood Count"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select PDF File"}),u.jsx("input",{type:"file",accept:"application/pdf",onChange:g,className:"w-full p-2 border rounded dark:bg-gray-700 dark:text-white"})]}),c&&u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Selected: ",c.name," (",(c.size/1024/1024).toFixed(2)," MB)"]}),u.jsx(K,{onClick:x,disabled:!c||o,children:o?"Uploading...":"Upload Test Result"})]})}),u.jsx(ee,{title:`Test Results (${n.length})`,children:n.length>0?u.jsx("div",{className:"space-y-4",children:n.map(w=>u.jsx("div",{className:"border rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-lg",children:w.testInfo.testName}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Uploaded: ",new Date(w.fileInfo.uploadDate).toLocaleDateString()]}),w.testInfo.testDate&&u.jsxs("p",{className:"text-sm text-gray-500",children:["Test Date: ",new Date(w.testInfo.testDate).toLocaleDateString()]}),w.extractedData.confirmed&&u.jsx("p",{className:"text-sm text-green-600 mt-2",children:" Data confirmed by doctor"})]}),w.fileInfo.googleDriveUrl&&u.jsx("a",{href:w.fileInfo.googleDriveUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View PDF"})]})},w.testResultId))}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-gray-500",children:"No test results uploaded yet"})})})]})})};class ij{constructor(){$r(this,"collectionRef",ma(Kn,va.TIMELINES))}async create(e,n,r){const s=mt(this.collectionRef,e);await Sr(s,{...r,patientId:n})}async findByPatient(e){return this.collectionRef,null}async update(e,n){}async addEvent(e,n){const r=await this.findByPatient(e);r&&await this.update(e,{events:[...r.events,n],updatedAt:new Date})}async getByPatientId(e){return await this.findByPatient(e)}}const Mp=new ij,oj=async(t,e,n)=>{await Mp.create(t,e,n)},aj=async t=>await Mp.getByPatientId(t),OE=async(t,e)=>{await Mp.update(t,e)},ki=async t=>await aj(t),LE=async(t,e)=>{let n=await ki(t);const r={...e,eventId:yi(gi.TIMELINE),color:uE[e.eventType]||"#000000"};n?(n.events.push(r),n.updatedAt=new Date,await OE(t,n)):(n={timelineId:yi(gi.TIMELINE),patientId:t,events:[r],createdAt:new Date,updatedAt:new Date},await oj(n.timelineId,t,n))},lj=async t=>{const e=await ki(t);e&&(e.updatedAt=new Date,await OE(t,e))},cj=async(t,e)=>{const n=await ki(t);return n?n.events.filter(r=>r.eventType===e):[]},uj=async(t,e,n)=>{const r=await ki(t);return r?r.events.filter(s=>s.date>=e&&s.date<=n):[]},dj=async(t,e)=>{await LE(t,e)},hj={getTimeline:ki,addEvent:LE,updateTimeline:lj,getEventsByType:cj,getEventsByDateRange:uj,autoUpdateTimeline:dj},fj=()=>{const{user:t}=Nt(),e=De(),[n,r]=b.useState(null),[s,i]=b.useState(!0),[o,l]=b.useState("all");b.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const g=await hj.getTimeline(t.userId);r(g)}catch(g){console.error("Error loading timeline:",g)}finally{i(!1)}})()},[t]);const d=[...(n==null?void 0:n.events.filter(p=>o==="all"||p.eventType===o))||[]].sort((p,g)=>g.date.getTime()-p.date.getTime()),f=p=>uE[p]||"#666";return s?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading timeline..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Medical Timeline"}),u.jsx(K,{variant:"secondary",onClick:()=>e("/patient/dashboard"),children:"Back to Dashboard"})]}),u.jsx(ee,{children:u.jsxs("div",{className:"flex gap-4 flex-wrap",children:[u.jsx(K,{variant:o==="all"?"primary":"secondary",onClick:()=>l("all"),children:"All"}),Object.values(cE).map(p=>u.jsx(K,{variant:o===p?"primary":"secondary",onClick:()=>l(p),children:p.replace("_"," ")},p))]})}),u.jsx(ee,{title:`Timeline Events (${d.length})`,children:d.length>0?u.jsx("div",{className:"space-y-4",children:d.map(p=>u.jsx("div",{className:"border-l-4 pl-4 py-2",style:{borderColor:f(p.eventType)},children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold",children:p.title}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[new Date(p.date).toLocaleDateString()," at"," ",new Date(p.date).toLocaleTimeString()]}),p.description&&u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:p.description})]}),u.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:f(p.eventType)+"20",color:f(p.eventType)},children:p.eventType.replace("_"," ")})]})},p.eventId))}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-gray-500",children:"No timeline events found"})})})]})})},pj=()=>{const{user:t}=Nt(),e=De(),[n,r]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState({totalPatients:0,todayAppointments:0,pendingFollowUps:0,pendingTestResults:0}),[c,d]=b.useState(!0);return b.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const p=new Date;p.setHours(0,0,0,0);const g=new Date(p);g.setDate(g.getDate()+1);const w=(await vi.getAppointmentsByDoctor(t.userId,p,g)).filter(A=>A.status===He.SCHEDULED||A.status===He.CONFIRMED);r(w);const P=await ps.getPatientsByDoctor(t.userId);i(P.slice(0,5)),l({totalPatients:P.length,todayAppointments:w.length,pendingFollowUps:0,pendingTestResults:0})}catch(p){console.error("Error loading dashboard data:",p)}finally{d(!1)}})()},[t]),c?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading dashboard..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Doctor Dashboard"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsxs(ee,{children:[u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Patients"}),u.jsx("p",{className:"text-3xl font-bold",children:o.totalPatients})]}),u.jsxs(ee,{children:[u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Appointments"}),u.jsx("p",{className:"text-3xl font-bold",children:o.todayAppointments})]}),u.jsxs(ee,{children:[u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Follow-ups"}),u.jsx("p",{className:"text-3xl font-bold",children:o.pendingFollowUps})]}),u.jsxs(ee,{children:[u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Test Results"}),u.jsx("p",{className:"text-3xl font-bold",children:o.pendingTestResults})]})]}),u.jsx(ee,{title:"Today's Schedule",children:n.length>0?u.jsx("div",{className:"space-y-4",children:n.map(f=>u.jsx("div",{className:"border rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>e(`/doctor/patient-profile/${f.patientId}`),children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold",children:[new Date(f.dateTime).toLocaleTimeString()," - ",f.type]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Patient ID: ",f.patientId]}),f.reason&&u.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Reason: ",f.reason]})]}),u.jsx(K,{onClick:p=>{p.stopPropagation(),e(`/doctor/new-encounter?appointmentId=${f.appointmentId}`)},children:"Start Encounter"})]})},f.appointmentId))}):u.jsx("p",{className:"text-gray-500 text-center py-4",children:"No appointments scheduled for today"})}),u.jsx(ee,{title:"Recent Patients",children:s.length>0?u.jsxs("div",{className:"space-y-2",children:[s.map(f=>{var p,g;return u.jsxs("div",{className:"border rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>e(`/doctor/patient-profile/${f.patientId}`),children:[u.jsxs("p",{className:"font-semibold",children:[(p=f.personalInfo)==null?void 0:p.firstName," ",(g=f.personalInfo)==null?void 0:g.lastName]}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",f.patientId]})]},f.patientId)}),u.jsx(K,{onClick:()=>e("/doctor/patients"),variant:"secondary",className:"w-full mt-4",children:"View All Patients"})]}):u.jsx("p",{className:"text-gray-500 text-center py-4",children:"No patients assigned yet"})}),u.jsx(ee,{title:"Quick Actions",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsx(K,{onClick:()=>e("/doctor/patients"),className:"h-20",children:"View Patients"}),u.jsx(K,{onClick:()=>e("/doctor/appointments"),className:"h-20",children:"View Appointments"}),u.jsx(K,{onClick:()=>e("/doctor/test-results-review"),className:"h-20",children:"Review Test Results"})]})})]})})},mj=()=>{const{user:t}=Nt(),e=De(),[n,r]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState(""),[c,d]=b.useState(!0);return b.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const p=await ps.getPatientsByDoctor(t.userId);r(p),i(p)}catch(p){console.error("Error loading patients:",p)}finally{d(!1)}})()},[t]),b.useEffect(()=>{if(!o){i(n);return}const f=o.toLowerCase(),p=n.filter(g=>{var x,w,P,A,E,_;return((w=(x=g.personalInfo)==null?void 0:x.firstName)==null?void 0:w.toLowerCase().includes(f))||((A=(P=g.personalInfo)==null?void 0:P.lastName)==null?void 0:A.toLowerCase().includes(f))||g.patientId.toLowerCase().includes(f)||((_=(E=g.contactInfo)==null?void 0:E.email)==null?void 0:_.toLowerCase().includes(f))});i(p)},[o,n]),c?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading patients..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"My Patients"}),u.jsx(K,{variant:"secondary",onClick:()=>e("/doctor/dashboard"),children:"Back to Dashboard"})]}),u.jsx(ee,{children:u.jsx(se,{placeholder:"Search by name, ID, or email...",value:o,onChange:f=>l(f.target.value)})}),u.jsx(ee,{title:`Patients (${s.length})`,children:s.length>0?u.jsx("div",{className:"space-y-4",children:s.map(f=>{var p,g,x,w;return u.jsx("div",{className:"border rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>e(`/doctor/patient-profile/${f.patientId}`),children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-lg",children:[(p=f.personalInfo)==null?void 0:p.firstName," ",(g=f.personalInfo)==null?void 0:g.lastName]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Patient ID: ",f.patientId]}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(x=f.contactInfo)==null?void 0:x.email," | ",(w=f.contactInfo)==null?void 0:w.primaryPhone]})]}),u.jsx(K,{onClick:P=>{P.stopPropagation(),e(`/doctor/patient-profile/${f.patientId}`)},children:"View Profile"})]})},f.patientId)})}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-gray-500",children:o?"No patients found matching your search":"No patients assigned yet"})})})]})})};class gj{constructor(){$r(this,"collectionRef",ma(Kn,va.ENCOUNTERS))}async create(e,n){const r=mt(this.collectionRef,e);await Sr(r,n)}async findById(e){const n=mt(this.collectionRef,e),r=await Tr(n);return r.exists()?r.data():null}async update(e,n){const r=mt(this.collectionRef,e);await dr(r,n)}async findByPatient(e){const n=Vt(this.collectionRef,ht("patientId","==",e));return(await Rt(n)).docs.map(s=>s.data())}async findByDoctor(e){const n=Vt(this.collectionRef,ht("doctorId","==",e));return(await Rt(n)).docs.map(s=>s.data())}async findByAppointment(e){const n=Vt(this.collectionRef,ht("appointmentId","==",e)),r=await Rt(n);return r.empty?null:r.docs[0].data()}}const Ta=new gj,VE=async(t,e)=>{await Ta.create(t,e)},yj=async t=>await Ta.findById(t),ME=async(t,e)=>{await Ta.update(t,e)},vj=async t=>await Ta.findByPatient(t),_j=async t=>await Ta.findByDoctor(t),UE=async t=>{const e=yi(gi.ENCOUNTER),n={...t,encounterId:e,isDraft:!1,createdAt:new Date,updatedAt:new Date};return await VE(e,n),n},FE=async t=>{const e=yi(gi.ENCOUNTER),n={...t,encounterId:e,isDraft:!0,createdAt:new Date,updatedAt:new Date};return await VE(e,n),n},wj=async t=>await yj(t),xj=async(t,e)=>{await ME(t,{...e,updatedAt:new Date})},Ej=async t=>{await ME(t,{isDraft:!1,updatedAt:new Date})},Ij=async t=>await vj(t),Tj=async t=>await _j(t),Sj={createEncounter:UE,saveDraft:FE,getEncounter:wj,updateEncounter:xj,finalizeEncounter:Ej,getEncountersByPatient:Ij,getEncountersByDoctor:Tj},Nj=()=>{var x,w,P,A,E,_,S,D,V,M,I,v,T,R,k,C,N,X,oe,ve,z;const{patientId:t}=Hb(),{user:e}=Nt(),n=De(),{patient:r,loading:s}=jE(t||"",e==null?void 0:e.userId),[i,o]=b.useState("timeline"),[l,c]=b.useState([]),[d,f]=b.useState([]),[p,g]=b.useState(null);return Xo.useEffect(()=>{if(!t)return;(async()=>{try{const[H,Q,pe]=await Promise.all([Sj.getEncountersByPatient(t),_i(t),ki(t)]);c(H),f(Q),g(pe)}catch(H){console.error("Error loading patient data:",H)}})()},[t]),s?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading patient profile..."})}):r?u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:[(x=r.personalInfo)==null?void 0:x.firstName," ",(w=r.personalInfo)==null?void 0:w.lastName]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Patient ID: ",r.patientId]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(K,{onClick:()=>n(`/doctor/new-encounter?patientId=${t}`),children:"New Encounter"}),u.jsx(K,{variant:"secondary",onClick:()=>n("/doctor/patients"),children:"Back"})]})]}),u.jsxs("div",{className:"flex gap-2 border-b",children:[u.jsx("button",{onClick:()=>o("timeline"),className:`px-4 py-2 font-semibold ${i==="timeline"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 dark:text-gray-400"}`,children:"Timeline"}),u.jsx("button",{onClick:()=>o("summary"),className:`px-4 py-2 font-semibold ${i==="summary"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 dark:text-gray-400"}`,children:"Summary"}),u.jsx("button",{onClick:()=>o("profile"),className:`px-4 py-2 font-semibold ${i==="profile"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 dark:text-gray-400"}`,children:"Profile"})]}),i==="timeline"&&u.jsx(ee,{title:"Timeline",children:p&&p.events.length>0?u.jsx("div",{className:"space-y-4",children:p.events.sort((U,H)=>H.date.getTime()-U.date.getTime()).map(U=>u.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[u.jsx("p",{className:"font-semibold",children:U.title}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(U.date).toLocaleDateString()}),U.description&&u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:U.description})]},U.eventId))}):u.jsx("p",{className:"text-gray-500 text-center py-4",children:"No timeline events"})}),i==="summary"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx(ee,{title:"Diseases",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[((A=(P=r.medicalInfo)==null?void 0:P.medicalHistory)==null?void 0:A.length)||0," conditions recorded"]})}),u.jsx(ee,{title:"Recent Vitals",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.length>0?"Available in encounters":"No vitals recorded"})}),u.jsx(ee,{title:"Allergies",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[((_=(E=r.medicalInfo)==null?void 0:E.allergies)==null?void 0:_.length)||0," allergies recorded"]})}),u.jsx(ee,{title:"Medications",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[((D=(S=r.medicalInfo)==null?void 0:S.currentMedications)==null?void 0:D.length)||0," current medications"]})}),u.jsx(ee,{title:"Encounters",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l.length," total encounters"]})}),u.jsx(ee,{title:"Test Results",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[d.length," test results uploaded"]})})]}),i==="profile"&&u.jsxs("div",{className:"space-y-4",children:[u.jsx(ee,{title:"Personal Information",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Name:"})," ",(V=r.personalInfo)==null?void 0:V.firstName," ",(M=r.personalInfo)==null?void 0:M.lastName]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Date of Birth:"})," ",(I=r.personalInfo)!=null&&I.dateOfBirth?new Date(r.personalInfo.dateOfBirth).toLocaleDateString():"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Gender:"})," ",((v=r.personalInfo)==null?void 0:v.gender)||"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Blood Type:"})," ",((T=r.personalInfo)==null?void 0:T.bloodType)||"N/A"]})]})}),u.jsx(ee,{title:"Contact Information",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Email:"})," ",((R=r.contactInfo)==null?void 0:R.email)||"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Phone:"})," ",((k=r.contactInfo)==null?void 0:k.primaryPhone)||"N/A"]})]})}),u.jsx(ee,{title:"Medical Information",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Allergies:"})," ",((N=(C=r.medicalInfo)==null?void 0:C.allergies)==null?void 0:N.length)||0]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Current Medications:"})," ",((oe=(X=r.medicalInfo)==null?void 0:X.currentMedications)==null?void 0:oe.length)||0]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Medical History:"})," ",((z=(ve=r.medicalInfo)==null?void 0:ve.medicalHistory)==null?void 0:z.length)||0]})]})})]})]})}):u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs(ee,{children:[u.jsx("p",{className:"text-red-500",children:"Patient not found"}),u.jsx(K,{onClick:()=>n("/doctor/patients"),className:"mt-4",children:"Back to Patients"})]})})},Aj=()=>{const{user:t}=Nt(),e=De(),[n,r]=b.useState([]),[s,i]=b.useState(!0),[o,l]=b.useState("all"),[c,d]=b.useState("all");b.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{let g,x;c==="today"?(g=new Date,g.setHours(0,0,0,0),x=new Date(g),x.setDate(x.getDate()+1)):c==="week"?(g=new Date,g.setHours(0,0,0,0),x=new Date(g),x.setDate(x.getDate()+7)):c==="month"&&(g=new Date,g.setHours(0,0,0,0),x=new Date(g),x.setMonth(x.getMonth()+1));const w=await vi.getAppointmentsByDoctor(t.userId,g,x);r(w.sort((P,A)=>P.dateTime.getTime()-A.dateTime.getTime()))}catch(g){console.error("Error loading appointments:",g)}finally{i(!1)}})()},[t,c]);const f=o==="all"?n:n.filter(p=>p.status===o);return s?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading appointments..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"My Appointments"}),u.jsx(K,{variant:"secondary",onClick:()=>e("/doctor/dashboard"),children:"Back to Dashboard"})]}),u.jsx(ee,{children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date Range"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(K,{variant:c==="today"?"primary":"secondary",onClick:()=>d("today"),children:"Today"}),u.jsx(K,{variant:c==="week"?"primary":"secondary",onClick:()=>d("week"),children:"This Week"}),u.jsx(K,{variant:c==="month"?"primary":"secondary",onClick:()=>d("month"),children:"This Month"}),u.jsx(K,{variant:c==="all"?"primary":"secondary",onClick:()=>d("all"),children:"All"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(K,{variant:o==="all"?"primary":"secondary",onClick:()=>l("all"),children:"All"}),u.jsx(K,{variant:o===He.SCHEDULED?"primary":"secondary",onClick:()=>l(He.SCHEDULED),children:"Scheduled"}),u.jsx(K,{variant:o===He.COMPLETED?"primary":"secondary",onClick:()=>l(He.COMPLETED),children:"Completed"})]})]})]})}),u.jsx(ee,{title:`Appointments (${f.length})`,children:f.length>0?u.jsx("div",{className:"space-y-4",children:f.map(p=>u.jsx("div",{className:"border rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-lg",children:[new Date(p.dateTime).toLocaleDateString()," at"," ",new Date(p.dateTime).toLocaleTimeString()]}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Patient ID: ",p.patientId," | Type: ",p.type]}),p.reason&&u.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Reason: ",p.reason]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(K,{onClick:()=>e(`/doctor/patient-profile/${p.patientId}`),variant:"secondary",children:"View Patient"}),p.status===He.SCHEDULED&&u.jsx(K,{onClick:()=>e(`/doctor/new-encounter?appointmentId=${p.appointmentId}`),children:"Start Encounter"})]})]})},p.appointmentId))}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No appointments found"})})]})})},Rj=({patientId:t,doctorId:e,appointmentId:n,onSuccess:r})=>{var x,w,P,A,E;const[s,i]=b.useState({patientId:t,doctorId:e,appointmentId:n,encounterType:jl.INITIAL,subjective:{chiefComplaint:""},objective:{},assessment:{},plan:{}}),[o,l]=b.useState(!1),[c,d]=b.useState(null),f=(_,S)=>{i(D=>({...D,[_]:S}))},p=(_,S,D)=>{i(V=>({...V,[_]:{...V[_]||{},[S]:D}}))},g=async(_=!1)=>{l(!0),d(null);try{_?await FE(s):await UE(s),r==null||r()}catch(S){d(S.message||"Failed to save encounter")}finally{l(!1)}};return u.jsxs("form",{className:"space-y-4",children:[u.jsx(se,{label:"Encounter Type",type:"select",value:s.encounterType||jl.INITIAL,onChange:_=>f("encounterType",_),options:Object.values(jl)}),u.jsx("h3",{children:"Subjective"}),u.jsx(se,{label:"Chief Complaint",value:((x=s.subjective)==null?void 0:x.chiefComplaint)||"",onChange:_=>p("subjective","chiefComplaint",_)}),u.jsx(se,{label:"History of Presenting Complaint",value:((w=s.subjective)==null?void 0:w.historyOfPresentingComplaint)||"",onChange:_=>p("subjective","historyOfPresentingComplaint",_)}),u.jsx("h3",{children:"Objective"}),u.jsx(se,{label:"Vital Signs (JSON)",value:JSON.stringify(((P=s.objective)==null?void 0:P.vitalSigns)||{}),onChange:_=>p("objective","vitalSigns",JSON.parse(_))}),u.jsx("h3",{children:"Assessment"}),u.jsx(se,{label:"Problems",value:(((A=s.assessment)==null?void 0:A.problems)||[]).join(", "),onChange:_=>p("assessment","problems",_.split(",").map(S=>S.trim()))}),u.jsx("h3",{children:"Plan"}),u.jsx(se,{label:"Treatment Plan",value:((E=s.plan)==null?void 0:E.treatmentPlan)||"",onChange:_=>p("plan","treatmentPlan",_)}),c&&u.jsx("p",{className:"text-red-500",children:c}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(K,{onClick:()=>g(!0),disabled:o,children:"Save Draft"}),u.jsx(K,{onClick:()=>g(!1),disabled:o,children:"Finalize"})]})]})},Pj=()=>{const t=De(),{user:e}=Nt(),[n]=PE(),r=n.get("appointmentId"),s=n.get("patientId"),i=()=>{t(s?`/doctor/patient-profile/${s}`:"/doctor/dashboard")};return e!=null&&e.userId?u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"New Clinical Encounter"}),u.jsx(K,{variant:"secondary",onClick:()=>t(-1),children:"Cancel"})]}),u.jsx(ee,{children:u.jsx(Rj,{patientId:s||"",doctorId:e.userId,appointmentId:r||void 0,onSuccess:i})})]})}):u.jsx("div",{children:"Loading..."})},Cj=()=>{const{user:t}=Nt(),e=De(),[n,r]=b.useState([]),[s,i]=b.useState(null),[o,l]=b.useState([]),[c,d]=b.useState(!0),[f,p]=b.useState(!1);b.useEffect(()=>{(async()=>{if(t!=null&&t.userId)try{const A=(await _i("")).filter(E=>!E.extractedData.confirmed);r(A)}catch(P){console.error("Error loading test results:",P)}finally{d(!1)}})()},[t]);const g=w=>{i(w),l([...w.labValues])},x=async()=>{if(!(!s||!(t!=null&&t.userId))){p(!0);try{await JD(s.testResultId,t.userId,o),alert("Test result data confirmed successfully!"),i(null);const P=(await _i("")).filter(A=>!A.extractedData.confirmed);r(P)}catch(w){console.error("Error confirming test result:",w),alert("Error confirming test result. Please try again.")}finally{p(!1)}}};return c?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading test results..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Review Test Results"}),u.jsx(K,{variant:"secondary",onClick:()=>e("/doctor/dashboard"),children:"Back to Dashboard"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsx(ee,{title:`Pending Reviews (${n.length})`,children:n.length>0?u.jsx("div",{className:"space-y-2",children:n.map(w=>u.jsxs("div",{className:`border rounded p-3 cursor-pointer ${(s==null?void 0:s.testResultId)===w.testResultId?"bg-blue-50 dark:bg-blue-900 border-blue-500":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,onClick:()=>g(w),children:[u.jsx("p",{className:"font-semibold",children:w.testInfo.testName}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(w.fileInfo.uploadDate).toLocaleDateString()}),u.jsxs("p",{className:"text-xs text-gray-500",children:[w.labValues.length," values extracted"]})]},w.testResultId))}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No pending reviews"})}),s&&u.jsx(ee,{title:"Review Extracted Data",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold",children:s.testInfo.testName}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Uploaded: ",new Date(s.fileInfo.uploadDate).toLocaleDateString()]}),s.fileInfo.googleDriveUrl&&u.jsx("a",{href:s.fileInfo.googleDriveUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View PDF"})]}),u.jsxs("div",{className:"border-t pt-4",children:[u.jsx("h3",{className:"font-semibold mb-3",children:"Laboratory Values"}),o.length>0?u.jsx("div",{className:"space-y-3",children:o.map((w,P)=>u.jsx("div",{className:"border rounded p-3",children:u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsx(se,{label:"Test Name",value:w.testName,onChange:A=>{const E=[...o];E[P].testName=A.target.value,l(E)}}),u.jsx(se,{label:"Value",value:w.value.toString(),onChange:A=>{const E=[...o];E[P].value=A.target.value,l(E)}}),u.jsx(se,{label:"Unit",value:w.unit,onChange:A=>{const E=[...o];E[P].unit=A.target.value,l(E)}}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),u.jsx("select",{value:w.status,onChange:A=>{const E=[...o];E[P].status=A.target.value,l(E)},className:"w-full p-2 border rounded dark:bg-gray-700 dark:text-white",children:Object.values(lE).map(A=>u.jsx("option",{value:A,children:A},A))})]})]})},P))}):u.jsx("p",{className:"text-gray-500",children:"No lab values extracted"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(K,{onClick:x,disabled:f,children:f?"Confirming...":"Confirm Data"}),u.jsx(K,{variant:"secondary",onClick:()=>i(null),children:"Cancel"})]})]})})]})]})})},kj=()=>{var o;const t=De(),e=xa(),{user:n,signOut:r}=Nt(),s=[{path:"/admin/dashboard",label:"Dashboard"},{path:"/admin/patients",label:"Users"},{path:"/admin/appointments",label:"Appointments"},{path:"/admin/reports",label:"Reports"}],i=l=>e.pathname===l;return u.jsxs("header",{className:"flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 bg-white px-6 lg:px-10 py-3 sticky top-0 z-10",children:[u.jsxs("div",{className:"flex items-center gap-3 text-gray-900",children:[u.jsx("img",{src:Ea,alt:"CareSync Logo",className:"h-8 w-8 object-contain"}),u.jsx("h2",{className:"text-xl font-bold leading-tight tracking-tight",children:"CareSync"})]}),u.jsx("div",{className:"hidden lg:flex flex-1 justify-center items-center gap-8",children:s.map(l=>u.jsx("a",{onClick:c=>{c.preventDefault(),t(l.path)},className:`${i(l.path)?"text-[#3c83f6] text-sm font-bold leading-normal border-b-2 border-[#3c83f6] pb-1":"text-gray-600 hover:text-[#3c83f6] text-sm font-medium leading-normal cursor-pointer"}`,children:l.label},l.path))}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{type:"button",className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 w-10 bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:u.jsx("span",{className:"material-symbols-outlined text-xl",children:"notifications"})}),n!=null&&n.photoURL?u.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10",style:{backgroundImage:`url(${n.photoURL})`},title:n.displayName||"Admin"}):u.jsx("div",{className:"bg-gray-300 rounded-full size-10 flex items-center justify-center text-gray-600 font-semibold",children:((o=n==null?void 0:n.displayName)==null?void 0:o.charAt(0).toUpperCase())||"A"})]})]})},bj=()=>{const t=De(),[e,n]=b.useState({totalPatients:0,totalDoctors:0,totalAppointments:0,pendingApprovals:0}),[r,s]=b.useState([]),[i,o]=b.useState(!0);if(b.useEffect(()=>{(async()=>{try{const d=await Ol(),f=[...d.patients,...d.doctors];s(f.slice(0,5));const p=await ps.getPatientsByDoctor(""),g=await fu.getDoctors();n({totalPatients:p.length,totalDoctors:g.length,totalAppointments:0,pendingApprovals:f.length})}catch(d){console.error("Error loading dashboard data:",d)}finally{o(!1)}})()},[]),i)return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f5f7f8]",children:u.jsx(Ve,{size:48,message:"Loading dashboard..."})});const l=c=>{if(!c)return"N/A";try{return(typeof c=="string"?new Date(c):c).toISOString().split("T")[0]}catch{return"N/A"}};return u.jsx("div",{className:"relative flex h-auto min-h-screen w-full flex-col bg-[#f5f7f8] overflow-x-hidden",children:u.jsxs("div",{className:"layout-container flex h-full grow flex-col",children:[u.jsx(kj,{}),u.jsx("main",{className:"flex-1 p-6 lg:p-10",children:u.jsxs("div",{className:"layout-content-container flex flex-col max-w-7xl mx-auto w-full gap-8",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"flex min-w-[158px] flex-1 flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white shadow-sm",children:[u.jsx("p",{className:"text-gray-600 text-sm font-medium leading-normal",children:"Total Patients"}),u.jsx("p",{className:"text-gray-900 tracking-tight text-3xl font-bold leading-tight",children:e.totalPatients.toLocaleString()})]}),u.jsxs("div",{className:"flex min-w-[158px] flex-1 flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white shadow-sm",children:[u.jsx("p",{className:"text-gray-600 text-sm font-medium leading-normal",children:"Total Doctors"}),u.jsx("p",{className:"text-gray-900 tracking-tight text-3xl font-bold leading-tight",children:e.totalDoctors.toLocaleString()})]}),u.jsxs("div",{className:"flex min-w-[158px] flex-1 flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white shadow-sm",children:[u.jsx("p",{className:"text-gray-600 text-sm font-medium leading-normal",children:"Appointments This Month"}),u.jsx("p",{className:"text-gray-900 tracking-tight text-3xl font-bold leading-tight",children:e.totalAppointments.toLocaleString()})]}),u.jsxs("div",{className:"flex min-w-[158px] flex-1 flex-col gap-2 rounded-xl p-6 border border-orange-200 bg-white shadow-sm",children:[u.jsx("p",{className:"text-orange-600 text-sm font-medium leading-normal",children:"Pending Approvals"}),u.jsx("p",{className:"text-orange-600 tracking-tight text-3xl font-bold leading-tight",children:e.pendingApprovals.toLocaleString()})]})]}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("h2",{className:"text-gray-900 text-xl font-bold leading-tight tracking-tight",children:"Pending Approvals"}),u.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:u.jsx("div",{className:"overflow-x-auto",children:r.length>0?u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registration Date"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(c=>u.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center gap-3",children:[c.photoURL?u.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full w-10 h-10",style:{backgroundImage:`url(${c.photoURL})`},title:c.name}):u.jsx("div",{className:"bg-gray-300 rounded-full w-10 h-10 flex items-center justify-center text-gray-600 font-semibold",children:c.name.charAt(0).toUpperCase()}),u.jsx("span",{className:"text-sm font-medium text-gray-900",children:c.name})]})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["#",c.userID]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(c.registeredAt)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("button",{onClick:()=>t(`/admin/approvals?userID=${c.userID}`),className:"h-9 px-4 flex items-center justify-center rounded-lg bg-[#3c83f6] text-white text-sm font-semibold hover:bg-[#3c83f6]/90 transition-colors",children:"Review"})})]},c.userID))})]}):u.jsx("div",{className:"p-8 text-center text-gray-500",children:"No pending approvals"})})})]}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("h2",{className:"text-gray-900 text-xl font-bold leading-tight tracking-tight",children:"Quick Actions"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("button",{onClick:()=>t("/admin/approvals"),className:"flex flex-col items-center justify-center gap-3 rounded-xl p-6 border border-gray-200 bg-white shadow-sm hover:shadow-lg hover:border-[#3c83f6] transition-all duration-300 group",children:[u.jsx("div",{className:"flex items-center justify-center size-12 rounded-full bg-[#3c83f6]/10 text-[#3c83f6] group-hover:bg-[#3c83f6] group-hover:text-white transition-colors",children:u.jsx("span",{className:"material-symbols-outlined text-2xl",children:"person_check"})}),u.jsx("p",{className:"text-gray-700 text-sm font-semibold leading-normal",children:"User Approvals"})]}),u.jsxs("button",{onClick:()=>t("/admin/patients"),className:"flex flex-col items-center justify-center gap-3 rounded-xl p-6 border border-gray-200 bg-white shadow-sm hover:shadow-lg hover:border-[#3c83f6] transition-all duration-300 group",children:[u.jsx("div",{className:"flex items-center justify-center size-12 rounded-full bg-[#3c83f6]/10 text-[#3c83f6] group-hover:bg-[#3c83f6] group-hover:text-white transition-colors",children:u.jsx("span",{className:"material-symbols-outlined text-2xl",children:"groups"})}),u.jsx("p",{className:"text-gray-700 text-sm font-semibold leading-normal",children:"All Patients"})]}),u.jsxs("button",{onClick:()=>t("/admin/doctors"),className:"flex flex-col items-center justify-center gap-3 rounded-xl p-6 border border-gray-200 bg-white shadow-sm hover:shadow-lg hover:border-[#3c83f6] transition-all duration-300 group",children:[u.jsx("div",{className:"flex items-center justify-center size-12 rounded-full bg-[#3c83f6]/10 text-[#3c83f6] group-hover:bg-[#3c83f6] group-hover:text-white transition-colors",children:u.jsx("span",{className:"material-symbols-outlined text-2xl",children:"medical_services"})}),u.jsx("p",{className:"text-gray-700 text-sm font-semibold leading-normal",children:"All Doctors"})]}),u.jsxs("button",{onClick:()=>t("/admin/reports"),className:"flex flex-col items-center justify-center gap-3 rounded-xl p-6 border border-gray-200 bg-white shadow-sm hover:shadow-lg hover:border-[#3c83f6] transition-all duration-300 group",children:[u.jsx("div",{className:"flex items-center justify-center size-12 rounded-full bg-[#3c83f6]/10 text-[#3c83f6] group-hover:bg-[#3c83f6] group-hover:text-white transition-colors",children:u.jsx("span",{className:"material-symbols-outlined text-2xl",children:"bar_chart"})}),u.jsx("p",{className:"text-gray-700 text-sm font-semibold leading-normal",children:"Reports"})]})]})]})]})})]})})},Dj=async t=>(await Op(t.userID,t),t),jj=async t=>await br(t),Oj=async(t,e)=>{await Vr(t,e)},Lj=async(t,e)=>{await Vr(t,{isApproved:!0,approvedBy:e,approvedAt:new Date,status:Pi.ACTIVE,updatedAt:new Date})},Vj=async(t,e)=>{await Vr(t,{isApproved:!1,status:Pi.SUSPENDED,updatedAt:new Date})},Mj=async()=>await fE(),Nv={createUser:Dj,getUserById:jj,updateUser:Oj,approveUser:Lj,rejectUser:Vj,getPendingUsers:Mj},Av=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&"toDate"in t&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&"seconds"in t)return new Date(t.seconds*1e3+(t.nanoseconds||0)/1e6);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}return typeof t=="number"?new Date(t):null},Uj=t=>t?t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",Fj=t=>t?t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",Bj=()=>{var k,C,N;const t=De(),{user:e}=uu(),[n]=PE(),r=n.get("userID"),[s,i]=b.useState([]),[o,l]=b.useState([]),[c,d]=b.useState(null),[f,p]=b.useState(null),[g,x]=b.useState(""),[w,P]=b.useState(""),[A,E]=b.useState(!0),[_,S]=b.useState(!1),[D,V]=b.useState(!1);b.useEffect(()=>{(async()=>{E(!0);try{const oe=await Ol(),ve=Array.isArray(oe.patients)?oe.patients:[],z=Array.isArray(oe.doctors)?oe.doctors:[];if(i(ve),l(z),r){const U=[...ve,...z].find(H=>H.userID===r);if(U){p(U);const H=await br(r);H&&d(H)}}}catch(oe){console.error("Error loading pending approvals:",oe),alert(`Error loading pending approvals: ${(oe==null?void 0:oe.message)||"Unknown error"}. Please check the console for details.`)}finally{E(!1)}})()},[r]);const M=async X=>{p(X),V(!1),x("");try{const oe=await br(X.userID);d(oe)}catch(oe){console.error("Error fetching user details:",oe),d(null)}},I=async(X,oe)=>{if(!e){alert("You must be logged in to approve users.");return}S(!0);try{await Nv.approveUser(X,e.userID||e.userId||"admin"),oe==="patient"?await Tv(X):await Sv(X),alert("User approved successfully!");const ve=await Ol();i(ve.patients||[]),l(ve.doctors||[]),d(null),p(null)}catch(ve){console.error("Error approving user:",ve),alert("Error approving user. Please try again.")}finally{S(!1)}},v=async(X,oe)=>{if(!g.trim()){alert("Please provide a reason for rejection");return}S(!0);try{await Nv.rejectUser(X,g),oe==="patient"?await Tv(X):await Sv(X),alert("User rejected successfully!");const ve=await Ol();i(ve.patients||[]),l(ve.doctors||[]),d(null),p(null),x(""),V(!1)}catch(ve){console.error("Error rejecting user:",ve),alert("Error rejecting user. Please try again.")}finally{S(!1)}},T=[...s,...o],R=w.trim()?T.filter(X=>X.name.toLowerCase().includes(w.toLowerCase())||X.userID.toLowerCase().includes(w.toLowerCase())||X.phone.includes(w)):T;return A?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading approvals..."})}):u.jsx("div",{className:"min-h-screen bg-background-light dark:bg-gray-900 p-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[u.jsx("button",{onClick:()=>t("/admin/dashboard"),className:"text-gray-500 dark:text-gray-400 text-sm font-medium hover:text-gray-700 dark:hover:text-gray-300",children:"Dashboard"}),u.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:"/"}),u.jsx("span",{className:"text-gray-900 dark:text-white text-sm font-medium",children:"Approvals"})]}),u.jsxs("div",{className:"flex flex-wrap justify-between gap-3 mb-8",children:[u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("h1",{className:"text-gray-900 dark:text-white text-3xl font-bold tracking-tight",children:"Admin Approvals"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-base font-normal",children:"Review and manage pending user registrations."})]}),u.jsx(K,{variant:"secondary",onClick:()=>t("/admin/dashboard"),children:"Back to Dashboard"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-6",children:[u.jsxs(ee,{className:"p-6",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Pending Requests"}),u.jsx("div",{className:"mb-4",children:u.jsxs("div",{className:"flex w-full items-stretch rounded-lg h-11 border border-gray-200 dark:border-gray-700",children:[u.jsx("div",{className:"flex items-center justify-center pl-3.5 pr-2 border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 rounded-l-lg",children:u.jsx("span",{className:"material-symbols-outlined text-xl text-gray-500 dark:text-gray-400",children:"search"})}),u.jsx("input",{type:"text",className:"flex-1 px-3.5 py-2 text-sm font-normal text-gray-900 dark:text-white bg-white dark:bg-gray-900 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 placeholder:text-gray-500 dark:placeholder:text-gray-400",placeholder:"Search by name or ID...",value:w,onChange:X=>P(X.target.value)})]})})]}),u.jsx("div",{className:"flex flex-col gap-2",children:R.length>0?R.map(X=>{const oe=Av(X.registeredAt),ve=(f==null?void 0:f.userID)===X.userID;return X.userID.startsWith("PAT"),u.jsxs("div",{className:`flex cursor-pointer items-center gap-4 rounded-xl p-4 transition-colors ${ve?"bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-500 shadow-sm":"bg-white dark:bg-gray-900/50 hover:bg-gray-50 dark:hover:bg-gray-800/60 border border-gray-200 dark:border-gray-800"}`,onClick:()=>M(X),children:[X.photoURL?u.jsx("img",{src:X.photoURL,alt:X.name,className:"h-12 w-12 rounded-full object-cover shrink-0"}):u.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-300 dark:bg-gray-700 flex items-center justify-center shrink-0",children:u.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-lg font-semibold",children:X.name.charAt(0).toUpperCase()})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-base font-medium truncate ${ve?"text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:X.name}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:["ID: ",X.userID]})]}),u.jsx("p",{className:"shrink-0 text-sm text-gray-500 dark:text-gray-400",children:Fj(oe)})]},X.userID)}):u.jsx(ee,{className:"p-8",children:u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No pending approvals"})})})]}),f?u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-900/50 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 h-fit",children:[u.jsxs("div",{className:"p-8",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"User Details"}),u.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[f.photoURL?u.jsx("img",{src:f.photoURL,alt:f.name,className:"h-24 w-24 rounded-full object-cover shrink-0 border-2 border-gray-200 dark:border-gray-700"}):u.jsx("div",{className:"h-24 w-24 rounded-full bg-gray-300 dark:bg-gray-700 flex items-center justify-center shrink-0 border-2 border-gray-200 dark:border-gray-700",children:u.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-3xl font-semibold",children:f.name.charAt(0).toUpperCase()})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.name}),u.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400",children:f.userID.startsWith("PAT")?"Patient":"Doctor"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 mb-8",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"User ID"}),u.jsx("p",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:f.userID})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Registration Date"}),u.jsx("p",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:Uj(Av(f.registeredAt))})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone Number"}),u.jsx("p",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:f.phone})]}),c&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email Address"}),u.jsx("p",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:c.email||"N/A"})]}),((k=c.contactInfo)==null?void 0:k.address)&&u.jsxs("div",{className:"md:col-span-2 space-y-1",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Address"}),u.jsx("p",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:c.contactInfo.address})]}),f.userID.startsWith("DOC")&&c&&"professionalInfo"in c&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Specialization"}),u.jsx("p",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:((C=c.professionalInfo)==null?void 0:C.specialization)||"N/A"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Medical License No."}),u.jsx("p",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:((N=c.professionalInfo)==null?void 0:N.licenseNumber)||"N/A"})]})]})]})]}),D&&u.jsxs("div",{className:"mb-8",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason for Rejection"}),u.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 p-3 text-sm",rows:3,placeholder:"Provide a clear reason for rejecting this user...",value:g,onChange:X=>x(X.target.value)})]})]}),u.jsxs("div",{className:"flex justify-end gap-4 border-t border-gray-200 dark:border-gray-800 p-6 bg-gray-50 dark:bg-gray-900 rounded-b-xl",children:[u.jsx(K,{variant:"secondary",onClick:()=>{V(!D),D&&x("")},disabled:_,className:"px-5 py-2.5",children:D?"Cancel":"Reject"}),D&&g.trim()&&u.jsx(K,{variant:"danger",onClick:()=>{confirm("Are you sure you want to reject this user?")&&v(f.userID,f.userID.startsWith("PAT")?"patient":"doctor")},disabled:_,className:"px-5 py-2.5",children:"Confirm Rejection"}),u.jsx(K,{onClick:()=>{I(f.userID,f.userID.startsWith("PAT")?"patient":"doctor")},disabled:_,className:"px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white",children:"Approve"})]})]}):u.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-gray-900/50 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-8",children:u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"Select a user to view details"})})]})]})})},zj=()=>{const t=De(),[e,n]=b.useState([]),[r,s]=b.useState([]),[i,o]=b.useState(""),[l,c]=b.useState(!0);return b.useEffect(()=>{(async()=>{try{const f=await ps.getPatientsByDoctor("");n(f),s(f)}catch(f){console.error("Error loading patients:",f)}finally{c(!1)}})()},[]),b.useEffect(()=>{if(!i){s(e);return}const d=i.toLowerCase(),f=e.filter(p=>{var g,x,w,P,A,E,_,S,D;return((x=(g=p.personalInfo)==null?void 0:g.firstName)==null?void 0:x.toLowerCase().includes(d))||((P=(w=p.personalInfo)==null?void 0:w.lastName)==null?void 0:P.toLowerCase().includes(d))||((A=p.userID)==null?void 0:A.toLowerCase().includes(d))||((_=(E=p.contactInfo)==null?void 0:E.email)==null?void 0:_.toLowerCase().includes(d))||((D=(S=p.contactInfo)==null?void 0:S.primaryPhone)==null?void 0:D.toLowerCase().includes(d))});s(f)},[i,e]),l?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading patients..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"All Patients"}),u.jsx(K,{variant:"secondary",onClick:()=>t("/admin/dashboard"),children:"Back to Dashboard"})]}),u.jsx(ee,{children:u.jsx(se,{placeholder:"Search by name, ID, email, or phone...",value:i,onChange:d=>o(d)})}),u.jsx(ee,{title:`Patients (${r.length})`,children:r.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"Patient ID"}),u.jsx("th",{className:"text-left p-2",children:"Name"}),u.jsx("th",{className:"text-left p-2",children:"Email"}),u.jsx("th",{className:"text-left p-2",children:"Phone"}),u.jsx("th",{className:"text-left p-2",children:"Assigned Doctor"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),u.jsx("tbody",{children:r.map(d=>{var f,p,g,x,w,P;return u.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-700",children:[u.jsx("td",{className:"p-2",children:d.userID}),u.jsx("td",{className:"p-2",children:u.jsxs("div",{className:"flex items-center gap-2",children:[d.photoURL&&u.jsx("img",{src:d.photoURL,alt:`${(f=d.personalInfo)==null?void 0:f.firstName} ${(p=d.personalInfo)==null?void 0:p.lastName}`,className:"w-8 h-8 rounded-full object-cover"}),u.jsxs("span",{children:[(g=d.personalInfo)==null?void 0:g.firstName," ",(x=d.personalInfo)==null?void 0:x.lastName]})]})}),u.jsx("td",{className:"p-2",children:((w=d.contactInfo)==null?void 0:w.email)||"N/A"}),u.jsx("td",{className:"p-2",children:((P=d.contactInfo)==null?void 0:P.primaryPhone)||"N/A"}),u.jsx("td",{className:"p-2",children:d.assignedDoctorId||"Unassigned"}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${d.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":d.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:d.status||"Inactive"})}),u.jsx("td",{className:"p-2",children:u.jsx(K,{variant:"secondary",onClick:()=>t(`/doctor/patient-profile/${d.userID}`),children:"View"})})]},d.userID)})})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No patients found"})})]})})},$j=()=>{const t=De(),[e,n]=b.useState([]),[r,s]=b.useState([]),[i,o]=b.useState(""),[l,c]=b.useState(!0);return b.useEffect(()=>{(async()=>{try{const f=await fu.getDoctors();n(f),s(f)}catch(f){console.error("Error loading doctors:",f)}finally{c(!1)}})()},[]),b.useEffect(()=>{if(!i){s(e);return}const d=i.toLowerCase(),f=e.filter(p=>{var g,x,w,P,A,E,_,S;return((x=(g=p.professionalInfo)==null?void 0:g.firstName)==null?void 0:x.toLowerCase().includes(d))||((P=(w=p.professionalInfo)==null?void 0:w.lastName)==null?void 0:P.toLowerCase().includes(d))||p.doctorId.toLowerCase().includes(d)||((E=(A=p.professionalInfo)==null?void 0:A.specialization)==null?void 0:E.toLowerCase().includes(d))||((S=(_=p.contactInfo)==null?void 0:_.email)==null?void 0:S.toLowerCase().includes(d))});s(f)},[i,e]),l?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading doctors..."})}):u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"All Doctors"}),u.jsx(K,{variant:"secondary",onClick:()=>t("/admin/dashboard"),children:"Back to Dashboard"})]}),u.jsx(ee,{children:u.jsx(se,{placeholder:"Search by name, ID, specialization, or email...",value:i,onChange:d=>o(d.target.value)})}),u.jsx(ee,{title:`Doctors (${r.length})`,children:r.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"Doctor ID"}),u.jsx("th",{className:"text-left p-2",children:"Name"}),u.jsx("th",{className:"text-left p-2",children:"Specialization"}),u.jsx("th",{className:"text-left p-2",children:"Email"}),u.jsx("th",{className:"text-left p-2",children:"License Number"}),u.jsx("th",{className:"text-left p-2",children:"Patients"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),u.jsx("tbody",{children:r.map(d=>{var f,p,g,x,w,P,A;return u.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-700",children:[u.jsx("td",{className:"p-2",children:d.doctorId}),u.jsxs("td",{className:"p-2",children:[(f=d.professionalInfo)==null?void 0:f.title," ",(p=d.professionalInfo)==null?void 0:p.firstName," ",(g=d.professionalInfo)==null?void 0:g.lastName]}),u.jsx("td",{className:"p-2",children:((x=d.professionalInfo)==null?void 0:x.specialization)||"N/A"}),u.jsx("td",{className:"p-2",children:((w=d.contactInfo)==null?void 0:w.email)||"N/A"}),u.jsx("td",{className:"p-2",children:((P=d.professionalInfo)==null?void 0:P.licenseNumber)||"N/A"}),u.jsx("td",{className:"p-2",children:((A=d.assignedPatients)==null?void 0:A.length)||0}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${d.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.isActive?"Active":"Inactive"})}),u.jsx("td",{className:"p-2",children:u.jsx(K,{variant:"secondary",onClick:()=>t(`/admin/doctor/${d.doctorId}`),children:"View"})})]},d.doctorId)})})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No doctors found"})})]})})},ut=({children:t,allowedRoles:e})=>{const{user:n,loading:r}=Nt();return r?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Ve,{size:48,message:"Loading..."})}):n?!n.isApproved||n.status===Pi.PENDING?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your account is pending admin approval. Please wait for approval."})]})}):e.includes(n.role)?u.jsx(u.Fragment,{children:t}):u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to access this page."})]})}):e.includes(_e.PATIENT)?u.jsx(Nc,{to:"/register/patient/flow",replace:!0}):u.jsx(Nc,{to:"/login",replace:!0})},Hj=()=>u.jsx(uD,{children:u.jsxs(oD,{children:[u.jsx(Se,{path:"/login",element:u.jsx(dD,{})}),u.jsx(Se,{path:"/register/patient",element:u.jsx(hD,{})}),u.jsx(Se,{path:"/register/patient/flow",element:u.jsx(AD,{})}),u.jsx(Se,{path:"/register/doctor",element:u.jsx(DD,{})}),u.jsx(Se,{path:"/patient/dashboard",element:u.jsx(ut,{allowedRoles:[_e.PATIENT],children:u.jsx(ZD,{})})}),u.jsx(Se,{path:"/patient/profile",element:u.jsx(ut,{allowedRoles:[_e.PATIENT],children:u.jsx(ej,{})})}),u.jsx(Se,{path:"/patient/appointments",element:u.jsx(ut,{allowedRoles:[_e.PATIENT],children:u.jsx(tj,{})})}),u.jsx(Se,{path:"/patient/schedule-appointment",element:u.jsx(ut,{allowedRoles:[_e.PATIENT],children:u.jsx(rj,{})})}),u.jsx(Se,{path:"/patient/test-results",element:u.jsx(ut,{allowedRoles:[_e.PATIENT],children:u.jsx(sj,{})})}),u.jsx(Se,{path:"/patient/timeline",element:u.jsx(ut,{allowedRoles:[_e.PATIENT],children:u.jsx(fj,{})})}),u.jsx(Se,{path:"/doctor/dashboard",element:u.jsx(ut,{allowedRoles:[_e.DOCTOR],children:u.jsx(pj,{})})}),u.jsx(Se,{path:"/doctor/patients",element:u.jsx(ut,{allowedRoles:[_e.DOCTOR],children:u.jsx(mj,{})})}),u.jsx(Se,{path:"/doctor/patient-profile/:patientId",element:u.jsx(ut,{allowedRoles:[_e.DOCTOR],children:u.jsx(Nj,{})})}),u.jsx(Se,{path:"/doctor/appointments",element:u.jsx(ut,{allowedRoles:[_e.DOCTOR],children:u.jsx(Aj,{})})}),u.jsx(Se,{path:"/doctor/new-encounter",element:u.jsx(ut,{allowedRoles:[_e.DOCTOR],children:u.jsx(Pj,{})})}),u.jsx(Se,{path:"/doctor/test-results-review",element:u.jsx(ut,{allowedRoles:[_e.DOCTOR],children:u.jsx(Cj,{})})}),u.jsx(Se,{path:"/admin/dashboard",element:u.jsx(ut,{allowedRoles:[_e.ADMIN],children:u.jsx(bj,{})})}),u.jsx(Se,{path:"/admin/approvals",element:u.jsx(ut,{allowedRoles:[_e.ADMIN],children:u.jsx(Bj,{})})}),u.jsx(Se,{path:"/admin/patients",element:u.jsx(ut,{allowedRoles:[_e.ADMIN],children:u.jsx(zj,{})})}),u.jsx(Se,{path:"/admin/doctors",element:u.jsx(ut,{allowedRoles:[_e.ADMIN],children:u.jsx($j,{})})}),u.jsx(Se,{path:"/",element:u.jsx(Nc,{to:"/login",replace:!0})}),u.jsx(Se,{path:"*",element:u.jsx(Nc,{to:"/login",replace:!0})})]})}),qj=()=>u.jsx(pb,{children:u.jsx(Hj,{})}),Wj=console.warn,Gj=console.error;console.warn=(...t)=>{var n;const e=((n=t[0])==null?void 0:n.toString())||"";e.includes("Cross-Origin-Opener-Policy")||e.includes("window.close")||Wj.apply(console,t)};console.error=(...t)=>{var n;const e=((n=t[0])==null?void 0:n.toString())||"";e.includes("Cross-Origin-Opener-Policy")||e.includes("window.close")||Gj.apply(console,t)};Id.createRoot(document.getElementById("root")).render(u.jsx(Xo.StrictMode,{children:u.jsx(qj,{})}));
//# sourceMappingURL=index-vqoCl_C2.js.map
